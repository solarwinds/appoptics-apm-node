npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.1.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.1.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.1.5
added 2 packages from 2 contributors, removed 45 packages, updated 2 packages and audited 892 packages in 4.96s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:04.194Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:04.195Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:04.195Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:04.195Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:04.258Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:04.387Z appoptics:patching patched crypto 
2022-04-21T16:15:04.414Z appoptics:patching patched https 
2022-04-21T16:15:04.414Z appoptics:patching patched http 
2022-04-21T16:15:04.474Z appoptics:patching patched tedious 0.1.5
2022-04-21T16:15:04.477Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.1.5
       should support basic queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.1.5
       should support parameters with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.1.5
       should sanitize query with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.1.5
       should truncate long queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.1.5
       should do nothing when disabled with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.1.5
       should support basic queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.1.5
       should support parameters with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.1.5
       should sanitize query with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.1.5
       should truncate long queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.1.5
       should do nothing when disabled with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.1
updated 2 packages and audited 892 packages in 3.968s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:12.490Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:12.491Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:12.491Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:12.491Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:12.552Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:12.669Z appoptics:patching patched crypto 
2022-04-21T16:15:12.695Z appoptics:patching patched https 
2022-04-21T16:15:12.695Z appoptics:patching patched http 
2022-04-21T16:15:12.755Z appoptics:patching patched tedious 0.2.1
2022-04-21T16:15:12.758Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.2
updated 1 package and audited 892 packages in 4.378s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:21.086Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:21.087Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:21.087Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:21.088Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:21.146Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:21.267Z appoptics:patching patched crypto 
2022-04-21T16:15:21.282Z appoptics:patching patched https 
2022-04-21T16:15:21.283Z appoptics:patching patched http 
2022-04-21T16:15:21.347Z appoptics:patching patched tedious 0.2.2
2022-04-21T16:15:21.350Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.3
removed 1 package, updated 1 package and audited 891 packages in 3.686s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:28.971Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:28.972Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:28.972Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:28.973Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:29.031Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:29.149Z appoptics:patching patched crypto 
2022-04-21T16:15:29.166Z appoptics:patching patched https 
2022-04-21T16:15:29.166Z appoptics:patching patched http 
2022-04-21T16:15:29.255Z appoptics:patching patched tedious 0.2.3
2022-04-21T16:15:29.259Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.4
updated 2 packages and audited 891 packages in 3.694s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:36.962Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:36.962Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:36.962Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:36.963Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:37.022Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:37.142Z appoptics:patching patched crypto 
2022-04-21T16:15:37.158Z appoptics:patching patched https 
2022-04-21T16:15:37.158Z appoptics:patching patched http 
2022-04-21T16:15:37.197Z appoptics:patching patched tedious 0.2.4
2022-04-21T16:15:37.200Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.3.0
updated 1 package and audited 891 packages in 4.813s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:46.174Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:46.174Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:46.174Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:46.175Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:46.268Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:46.413Z appoptics:patching patched crypto 
2022-04-21T16:15:46.430Z appoptics:patching patched https 
2022-04-21T16:15:46.430Z appoptics:patching patched http 
2022-04-21T16:15:46.503Z appoptics:patching patched tedious 0.3.0
2022-04-21T16:15:46.506Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.0.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.0.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.0.0
updated 1 package and audited 891 packages in 4.115s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:15:54.808Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:15:54.808Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:15:54.808Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:15:54.809Z appoptics:debug using context provider: ace-context
2022-04-21T16:15:54.889Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:15:55.050Z appoptics:patching patched crypto 
2022-04-21T16:15:55.084Z appoptics:patching patched https 
2022-04-21T16:15:55.084Z appoptics:patching patched http 
2022-04-21T16:15:55.139Z appoptics:patching patched tedious 1.0.0
2022-04-21T16:15:55.142Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.1.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.1.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.1.0
added 1 package from 1 contributor, updated 1 package and audited 892 packages in 4.111s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:03.279Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:03.279Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:03.279Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:03.280Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:03.340Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:03.461Z appoptics:patching patched crypto 
2022-04-21T16:16:03.476Z appoptics:patching patched https 
2022-04-21T16:16:03.477Z appoptics:patching patched http 
2022-04-21T16:16:03.520Z appoptics:patching patched tedious 1.1.0
2022-04-21T16:16:03.523Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.0
updated 1 package and audited 892 packages in 3.712s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:11.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:11.283Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:11.283Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:11.283Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:11.343Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:11.461Z appoptics:patching patched crypto 
2022-04-21T16:16:11.476Z appoptics:patching patched https 
2022-04-21T16:16:11.477Z appoptics:patching patched http 
2022-04-21T16:16:11.522Z appoptics:patching patched tedious 1.2.0
2022-04-21T16:16:11.525Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.1
updated 1 package and audited 892 packages in 4.74s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:20.178Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:20.179Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:20.179Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:20.179Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:20.239Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:20.356Z appoptics:patching patched crypto 
2022-04-21T16:16:20.374Z appoptics:patching patched https 
2022-04-21T16:16:20.374Z appoptics:patching patched http 
2022-04-21T16:16:20.417Z appoptics:patching patched tedious 1.2.1
2022-04-21T16:16:20.420Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.2
updated 1 package and audited 892 packages in 3.928s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:28.388Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:28.389Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:28.389Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:28.390Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:28.465Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:28.599Z appoptics:patching patched crypto 
2022-04-21T16:16:28.656Z appoptics:patching patched https 
2022-04-21T16:16:28.656Z appoptics:patching patched http 
2022-04-21T16:16:28.745Z appoptics:patching patched tedious 1.2.2
2022-04-21T16:16:28.748Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.0
updated 1 package and audited 892 packages in 3.515s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:36.210Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:36.210Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:36.210Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:36.211Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:36.272Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:36.415Z appoptics:patching patched crypto 
2022-04-21T16:16:36.434Z appoptics:patching patched https 
2022-04-21T16:16:36.435Z appoptics:patching patched http 
2022-04-21T16:16:36.475Z appoptics:patching patched tedious 1.3.0
2022-04-21T16:16:36.478Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.1
updated 1 package and audited 892 packages in 4.395s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:44.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:44.910Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:44.910Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:44.910Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:44.971Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:45.094Z appoptics:patching patched crypto 
2022-04-21T16:16:45.111Z appoptics:patching patched https 
2022-04-21T16:16:45.111Z appoptics:patching patched http 
2022-04-21T16:16:45.152Z appoptics:patching patched tedious 1.3.1
2022-04-21T16:16:45.155Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.2
updated 1 package and audited 892 packages in 4.282s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:53.514Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:53.514Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:53.514Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:53.515Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:53.609Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:53.750Z appoptics:patching patched crypto 
2022-04-21T16:16:53.766Z appoptics:patching patched https 
2022-04-21T16:16:53.767Z appoptics:patching patched http 
2022-04-21T16:16:53.807Z appoptics:patching patched tedious 1.3.2
2022-04-21T16:16:53.810Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.3
updated 1 package and audited 892 packages in 3.861s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:01.679Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:01.680Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:01.680Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:01.680Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:01.740Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:01.856Z appoptics:patching patched crypto 
2022-04-21T16:17:01.872Z appoptics:patching patched https 
2022-04-21T16:17:01.872Z appoptics:patching patched http 
2022-04-21T16:17:01.913Z appoptics:patching patched tedious 1.3.3
2022-04-21T16:17:01.917Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.4
updated 1 package and audited 892 packages in 3.593s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:09.468Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:09.469Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:09.469Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:09.469Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:09.530Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:09.666Z appoptics:patching patched crypto 
2022-04-21T16:17:09.691Z appoptics:patching patched https 
2022-04-21T16:17:09.692Z appoptics:patching patched http 
2022-04-21T16:17:09.734Z appoptics:patching patched tedious 1.3.4
2022-04-21T16:17:09.737Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.5
updated 1 package and audited 892 packages in 4.322s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:18.041Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:18.042Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:18.042Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:18.043Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:18.113Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:18.231Z appoptics:patching patched crypto 
2022-04-21T16:17:18.251Z appoptics:patching patched https 
2022-04-21T16:17:18.251Z appoptics:patching patched http 
2022-04-21T16:17:18.290Z appoptics:patching patched tedious 1.3.5
2022-04-21T16:17:18.294Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.0
updated 1 package and audited 892 packages in 3.693s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:26.043Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:26.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:26.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:26.044Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:26.104Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:26.218Z appoptics:patching patched crypto 
2022-04-21T16:17:26.234Z appoptics:patching patched https 
2022-04-21T16:17:26.234Z appoptics:patching patched http 
2022-04-21T16:17:26.275Z appoptics:patching patched tedious 1.4.0
2022-04-21T16:17:26.279Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.1
updated 1 package and audited 892 packages in 4.164s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:34.388Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:34.388Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:34.388Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:34.389Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:34.449Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:34.565Z appoptics:patching patched crypto 
2022-04-21T16:17:34.583Z appoptics:patching patched https 
2022-04-21T16:17:34.584Z appoptics:patching patched http 
2022-04-21T16:17:34.624Z appoptics:patching patched tedious 1.4.1
2022-04-21T16:17:34.627Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.2
updated 1 package and audited 892 packages in 4.501s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:43.173Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:43.173Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:43.174Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:43.174Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:43.252Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:43.398Z appoptics:patching patched crypto 
2022-04-21T16:17:43.432Z appoptics:patching patched https 
2022-04-21T16:17:43.433Z appoptics:patching patched http 
2022-04-21T16:17:43.491Z appoptics:patching patched tedious 1.4.2
2022-04-21T16:17:43.494Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.3
updated 1 package and audited 892 packages in 3.889s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:51.433Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:51.440Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:51.440Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:51.441Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:51.527Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:51.718Z appoptics:patching patched crypto 
2022-04-21T16:17:51.746Z appoptics:patching patched https 
2022-04-21T16:17:51.747Z appoptics:patching patched http 
2022-04-21T16:17:51.898Z appoptics:patching patched tedious 1.4.3
2022-04-21T16:17:51.902Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.1
updated 1 package and audited 892 packages in 3.702s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:59.539Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:59.540Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:59.540Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:59.541Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:59.600Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:59.731Z appoptics:patching patched crypto 
2022-04-21T16:17:59.756Z appoptics:patching patched https 
2022-04-21T16:17:59.757Z appoptics:patching patched http 
2022-04-21T16:17:59.795Z appoptics:patching patched tedious 1.5.1
2022-04-21T16:17:59.798Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.2
updated 1 package and audited 892 packages in 3.65s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:07.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:07.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:07.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:07.556Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:07.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:07.736Z appoptics:patching patched crypto 
2022-04-21T16:18:07.754Z appoptics:patching patched https 
2022-04-21T16:18:07.754Z appoptics:patching patched http 
2022-04-21T16:18:07.795Z appoptics:patching patched tedious 1.5.2
2022-04-21T16:18:07.798Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.3
updated 1 package and audited 892 packages in 4.129s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:15.892Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:15.893Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:15.893Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:15.894Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:15.952Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:16.065Z appoptics:patching patched crypto 
2022-04-21T16:18:16.082Z appoptics:patching patched https 
2022-04-21T16:18:16.082Z appoptics:patching patched http 
2022-04-21T16:18:16.125Z appoptics:patching patched tedious 1.5.3
2022-04-21T16:18:16.130Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.4
updated 1 package and audited 892 packages in 3.703s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:23.805Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:23.806Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:23.806Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:23.806Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:23.865Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:23.987Z appoptics:patching patched crypto 
2022-04-21T16:18:24.004Z appoptics:patching patched https 
2022-04-21T16:18:24.004Z appoptics:patching patched http 
2022-04-21T16:18:24.046Z appoptics:patching patched tedious 1.5.4
2022-04-21T16:18:24.049Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.5
updated 1 package and audited 892 packages in 3.733s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:31.769Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:31.770Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:31.770Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:31.771Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:31.833Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:31.951Z appoptics:patching patched crypto 
2022-04-21T16:18:31.966Z appoptics:patching patched https 
2022-04-21T16:18:31.966Z appoptics:patching patched http 
2022-04-21T16:18:32.016Z appoptics:patching patched tedious 1.5.5
2022-04-21T16:18:32.019Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.6: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.6
updated 1 package and audited 892 packages in 4.412s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:40.378Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:40.378Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:40.379Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:40.379Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:40.439Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:40.555Z appoptics:patching patched crypto 
2022-04-21T16:18:40.574Z appoptics:patching patched https 
2022-04-21T16:18:40.574Z appoptics:patching patched http 
2022-04-21T16:18:40.616Z appoptics:patching patched tedious 1.5.6
2022-04-21T16:18:40.619Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.6
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.6
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.7: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.7
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.7
updated 1 package and audited 892 packages in 3.708s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:48.327Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:48.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:48.327Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:48.328Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:48.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:48.537Z appoptics:patching patched crypto 
2022-04-21T16:18:48.554Z appoptics:patching patched https 
2022-04-21T16:18:48.554Z appoptics:patching patched http 
2022-04-21T16:18:48.595Z appoptics:patching patched tedious 1.5.7
2022-04-21T16:18:48.598Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.7
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.7
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.8: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.8
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.8
updated 1 package and audited 892 packages in 3.642s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:56.214Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:56.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:56.214Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:56.215Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:56.275Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:56.390Z appoptics:patching patched crypto 
2022-04-21T16:18:56.414Z appoptics:patching patched https 
2022-04-21T16:18:56.414Z appoptics:patching patched http 
2022-04-21T16:18:56.451Z appoptics:patching patched tedious 1.5.8
2022-04-21T16:18:56.455Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.8
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.8
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.6.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.6.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.6.0
updated 1 package and audited 892 packages in 4.31s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:04.700Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:04.701Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:04.701Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:04.702Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:04.762Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:04.878Z appoptics:patching patched crypto 
2022-04-21T16:19:04.894Z appoptics:patching patched https 
2022-04-21T16:19:04.894Z appoptics:patching patched http 
2022-04-21T16:19:04.936Z appoptics:patching patched tedious 1.6.0
2022-04-21T16:19:04.939Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.7.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.7.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.7.0
updated 1 package and audited 892 packages in 3.947s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:12.933Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:12.933Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:12.933Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:12.934Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:13.024Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:13.231Z appoptics:patching patched crypto 
2022-04-21T16:19:13.255Z appoptics:patching patched https 
2022-04-21T16:19:13.256Z appoptics:patching patched http 
2022-04-21T16:19:13.317Z appoptics:patching patched tedious 1.7.0
2022-04-21T16:19:13.320Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.0
updated 1 package and audited 892 packages in 4.027s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:21.309Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:21.310Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:21.310Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:21.311Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:21.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:21.508Z appoptics:patching patched crypto 
2022-04-21T16:19:21.540Z appoptics:patching patched https 
2022-04-21T16:19:21.541Z appoptics:patching patched http 
2022-04-21T16:19:21.587Z appoptics:patching patched tedious 1.8.0
2022-04-21T16:19:21.590Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.8.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.8.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.1
updated 1 package and audited 892 packages in 3.679s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:29.381Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:29.382Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:29.382Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:29.382Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:29.441Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:29.557Z appoptics:patching patched crypto 
2022-04-21T16:19:29.574Z appoptics:patching patched https 
2022-04-21T16:19:29.574Z appoptics:patching patched http 
2022-04-21T16:19:29.614Z appoptics:patching patched tedious 1.8.1
2022-04-21T16:19:29.617Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.8.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.8.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.8.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.8.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.8.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.8.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.8.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.8.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.8.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.9.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.9.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.9.0
updated 1 package and audited 892 packages in 3.846s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:37.527Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:37.527Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:37.527Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:37.528Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:37.585Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:37.707Z appoptics:patching patched crypto 
2022-04-21T16:19:37.723Z appoptics:patching patched https 
2022-04-21T16:19:37.723Z appoptics:patching patched http 
2022-04-21T16:19:37.765Z appoptics:patching patched tedious 1.9.0
2022-04-21T16:19:37.768Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.9.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.9.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.9.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.9.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.9.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.9.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.9.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.9.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.9.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.9.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.9.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.10.0
updated 4 packages and audited 892 packages in 3.971s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:45.746Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:45.747Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:45.747Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:45.747Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:45.806Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:45.930Z appoptics:patching patched crypto 
2022-04-21T16:19:45.946Z appoptics:patching patched https 
2022-04-21T16:19:45.946Z appoptics:patching patched http 
2022-04-21T16:19:45.993Z appoptics:patching patched tedious 1.10.0
2022-04-21T16:19:45.996Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.10.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.10.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.10.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.10.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.10.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.10.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.10.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.10.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.10.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.10.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.10.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.0
updated 1 package and audited 892 packages in 3.582s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:19:53.578Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:19:53.579Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:19:53.579Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:19:53.580Z appoptics:debug using context provider: ace-context
2022-04-21T16:19:53.644Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:19:53.765Z appoptics:patching patched crypto 
2022-04-21T16:19:53.788Z appoptics:patching patched https 
2022-04-21T16:19:53.788Z appoptics:patching patched http 
2022-04-21T16:19:53.827Z appoptics:patching patched tedious 1.11.0
2022-04-21T16:19:53.830Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.1
updated 1 package and audited 892 packages in 4.288s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:02.094Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:02.095Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:02.095Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:02.095Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:02.172Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:02.297Z appoptics:patching patched crypto 
2022-04-21T16:20:02.313Z appoptics:patching patched https 
2022-04-21T16:20:02.314Z appoptics:patching patched http 
2022-04-21T16:20:02.356Z appoptics:patching patched tedious 1.11.1
2022-04-21T16:20:02.359Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.2
updated 1 package and audited 892 packages in 3.552s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:09.858Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:09.859Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:09.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:09.859Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:09.919Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:10.039Z appoptics:patching patched crypto 
2022-04-21T16:20:10.057Z appoptics:patching patched https 
2022-04-21T16:20:10.057Z appoptics:patching patched http 
2022-04-21T16:20:10.100Z appoptics:patching patched tedious 1.11.2
2022-04-21T16:20:10.103Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.4
updated 1 package and audited 892 packages in 3.5s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:17.625Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:17.626Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:17.626Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:17.627Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:17.686Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:17.800Z appoptics:patching patched crypto 
2022-04-21T16:20:17.816Z appoptics:patching patched https 
2022-04-21T16:20:17.816Z appoptics:patching patched http 
2022-04-21T16:20:17.857Z appoptics:patching patched tedious 1.11.4
2022-04-21T16:20:17.860Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.5
updated 1 package and audited 892 packages in 4.516s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:26.298Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:26.298Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:26.298Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:26.299Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:26.358Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:26.474Z appoptics:patching patched crypto 
2022-04-21T16:20:26.490Z appoptics:patching patched https 
2022-04-21T16:20:26.491Z appoptics:patching patched http 
2022-04-21T16:20:26.531Z appoptics:patching patched tedious 1.11.5
2022-04-21T16:20:26.534Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.0
added 8 packages from 3 contributors, removed 1 package, updated 1 package and audited 899 packages in 4.931s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:35.738Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:35.739Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:35.739Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:35.740Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:35.888Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:36.110Z appoptics:patching patched crypto 
2022-04-21T16:20:36.132Z appoptics:patching patched https 
2022-04-21T16:20:36.133Z appoptics:patching patched http 
2022-04-21T16:20:36.207Z appoptics:patching patched tedious 1.12.0
2022-04-21T16:20:36.210Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  2) probes.tedious 1.12.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  3) probes.tedious 1.12.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  4) probes.tedious 1.12.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  5) probes.tedious 1.12.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  6) probes.tedious 1.12.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  7) probes.tedious 1.12.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  8) probes.tedious 1.12.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  9) probes.tedious 1.12.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  10) probes.tedious 1.12.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.1
updated 1 package and audited 899 packages in 4.001s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:44.178Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:44.178Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:44.179Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:44.179Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:44.257Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:44.388Z appoptics:patching patched crypto 
2022-04-21T16:20:44.403Z appoptics:patching patched https 
2022-04-21T16:20:44.404Z appoptics:patching patched http 
2022-04-21T16:20:44.481Z appoptics:patching patched tedious 1.12.1
2022-04-21T16:20:44.484Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.2
updated 1 package and audited 899 packages in 4.017s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:20:52.549Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:20:52.550Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:20:52.550Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:20:52.551Z appoptics:debug using context provider: ace-context
2022-04-21T16:20:52.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:20:52.729Z appoptics:patching patched crypto 
2022-04-21T16:20:52.745Z appoptics:patching patched https 
2022-04-21T16:20:52.745Z appoptics:patching patched http 
2022-04-21T16:20:52.839Z appoptics:patching patched tedious 1.12.2
2022-04-21T16:20:52.843Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.3
updated 1 package and audited 899 packages in 4.541s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:01.362Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:01.363Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:01.363Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:01.363Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:01.423Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:01.542Z appoptics:patching patched crypto 
2022-04-21T16:21:01.569Z appoptics:patching patched https 
2022-04-21T16:21:01.570Z appoptics:patching patched http 
2022-04-21T16:21:01.640Z appoptics:patching patched tedious 1.12.3
2022-04-21T16:21:01.643Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.0
updated 1 package and audited 899 packages in 4.098s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:09.704Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:09.705Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:09.705Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:09.705Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:09.782Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:09.926Z appoptics:patching patched crypto 
2022-04-21T16:21:09.959Z appoptics:patching patched https 
2022-04-21T16:21:09.959Z appoptics:patching patched http 
2022-04-21T16:21:10.038Z appoptics:patching patched tedious 1.13.0
2022-04-21T16:21:10.041Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.1
updated 1 package and audited 899 packages in 4.855s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:19.004Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:19.005Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:19.005Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:19.006Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:19.069Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:19.203Z appoptics:patching patched crypto 
2022-04-21T16:21:19.236Z appoptics:patching patched https 
2022-04-21T16:21:19.236Z appoptics:patching patched http 
2022-04-21T16:21:19.312Z appoptics:patching patched tedious 1.13.1
2022-04-21T16:21:19.315Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.2
updated 1 package and audited 899 packages in 3.474s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:26.761Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:26.762Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:26.762Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:26.763Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:26.822Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:26.947Z appoptics:patching patched crypto 
2022-04-21T16:21:26.972Z appoptics:patching patched https 
2022-04-21T16:21:26.972Z appoptics:patching patched http 
2022-04-21T16:21:27.034Z appoptics:patching patched tedious 1.13.2
2022-04-21T16:21:27.037Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.14.0
added 1 package, updated 1 package and audited 900 packages in 4.201s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:35.225Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:35.226Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:35.226Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:35.227Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:35.285Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:35.402Z appoptics:patching patched crypto 
2022-04-21T16:21:35.418Z appoptics:patching patched https 
2022-04-21T16:21:35.418Z appoptics:patching patched http 
2022-04-21T16:21:35.480Z appoptics:patching patched tedious 1.14.0
2022-04-21T16:21:35.483Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.14.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.14.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  2) probes.tedious 1.14.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  3) probes.tedious 1.14.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  4) probes.tedious 1.14.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  5) probes.tedious 1.14.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  6) probes.tedious 1.14.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  7) probes.tedious 1.14.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  8) probes.tedious 1.14.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  9) probes.tedious 1.14.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  10) probes.tedious 1.14.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> core-js@2.6.12 postinstall /__w/appoptics-apm-node/appoptics-apm-node/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.15.0
added 2 packages from 2 contributors, updated 3 packages, moved 1 package and audited 902 packages in 4.767s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:44.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:44.276Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:44.276Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:44.276Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:44.350Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:44.495Z appoptics:patching patched crypto 
2022-04-21T16:21:44.530Z appoptics:patching patched https 
2022-04-21T16:21:44.530Z appoptics:patching patched http 
2022-04-21T16:21:44.629Z appoptics:patching patched tedious 1.15.0
2022-04-21T16:21:44.632Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.15.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.15.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 1.15.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 1.15.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 1.15.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 1.15.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 1.15.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 1.15.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 1.15.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 1.15.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 1.15.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.0
removed 2 packages, updated 1 package and audited 900 packages in 3.586s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:21:52.202Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:21:52.202Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:21:52.202Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:21:52.203Z appoptics:debug using context provider: ace-context
2022-04-21T16:21:52.262Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:21:52.383Z appoptics:patching patched crypto 
2022-04-21T16:21:52.399Z appoptics:patching patched https 
2022-04-21T16:21:52.399Z appoptics:patching patched http 
2022-04-21T16:21:52.487Z appoptics:patching patched tedious 2.0.0
2022-04-21T16:21:52.491Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.1
updated 1 package and audited 900 packages in 4.115s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:00.689Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:00.690Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:00.690Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:00.690Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:00.749Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:00.866Z appoptics:patching patched crypto 
2022-04-21T16:22:00.882Z appoptics:patching patched https 
2022-04-21T16:22:00.882Z appoptics:patching patched http 
2022-04-21T16:22:00.955Z appoptics:patching patched tedious 2.0.1
2022-04-21T16:22:00.958Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> sspi-client@0.1.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! sspi-client@0.1.0 install: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the sspi-client@0.1.0 install script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_22_08_959Z-debug.log
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.1
added 7 packages from 13 contributors and audited 900 packages in 3.843s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:13.768Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:13.769Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:13.769Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:13.769Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:13.830Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:13.960Z appoptics:patching patched crypto 
2022-04-21T16:22:14.014Z appoptics:patching patched https 
2022-04-21T16:22:14.014Z appoptics:patching patched http 
2022-04-21T16:22:14.119Z appoptics:patching patched tedious 2.1.1
2022-04-21T16:22:14.122Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.2
updated 1 package and audited 900 packages in 4.422s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:22.498Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:22.499Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:22.499Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:22.499Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:22.559Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:22.676Z appoptics:patching patched crypto 
2022-04-21T16:22:22.694Z appoptics:patching patched https 
2022-04-21T16:22:22.694Z appoptics:patching patched http 
2022-04-21T16:22:22.773Z appoptics:patching patched tedious 2.1.2
2022-04-21T16:22:22.776Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.3
updated 1 package and audited 900 packages in 3.918s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:30.629Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:30.629Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:30.630Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:30.630Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:30.689Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:30.807Z appoptics:patching patched crypto 
2022-04-21T16:22:30.828Z appoptics:patching patched https 
2022-04-21T16:22:30.828Z appoptics:patching patched http 
2022-04-21T16:22:30.904Z appoptics:patching patched tedious 2.1.3
2022-04-21T16:22:30.908Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.4
updated 1 package and audited 900 packages in 3.398s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:38.380Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:38.381Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:38.381Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:38.381Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:38.443Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:38.559Z appoptics:patching patched crypto 
2022-04-21T16:22:38.579Z appoptics:patching patched https 
2022-04-21T16:22:38.579Z appoptics:patching patched http 
2022-04-21T16:22:38.655Z appoptics:patching patched tedious 2.1.4
2022-04-21T16:22:38.658Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.5
updated 1 package and audited 900 packages in 4.634s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:47.244Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:47.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:47.245Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:47.245Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:47.307Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:47.424Z appoptics:patching patched crypto 
2022-04-21T16:22:47.442Z appoptics:patching patched https 
2022-04-21T16:22:47.442Z appoptics:patching patched http 
2022-04-21T16:22:47.519Z appoptics:patching patched tedious 2.1.5
2022-04-21T16:22:47.522Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.0
updated 1 package and audited 900 packages in 4.096s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:22:55.873Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:22:55.873Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:22:55.873Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:22:55.878Z appoptics:debug using context provider: ace-context
2022-04-21T16:22:56.024Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:22:56.308Z appoptics:patching patched crypto 
2022-04-21T16:22:56.341Z appoptics:patching patched https 
2022-04-21T16:22:56.341Z appoptics:patching patched http 
2022-04-21T16:22:56.513Z appoptics:patching patched tedious 2.2.0
2022-04-21T16:22:56.522Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.1
updated 1 package and audited 900 packages in 3.747s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:04.206Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:04.207Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:04.207Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:04.207Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:04.264Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:04.384Z appoptics:patching patched crypto 
2022-04-21T16:23:04.405Z appoptics:patching patched https 
2022-04-21T16:23:04.405Z appoptics:patching patched http 
2022-04-21T16:23:04.492Z appoptics:patching patched tedious 2.2.1
2022-04-21T16:23:04.497Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.2
updated 1 package and audited 900 packages in 3.818s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:12.396Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:12.396Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:12.396Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:12.397Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:12.456Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:12.577Z appoptics:patching patched crypto 
2022-04-21T16:23:12.594Z appoptics:patching patched https 
2022-04-21T16:23:12.594Z appoptics:patching patched http 
2022-04-21T16:23:12.673Z appoptics:patching patched tedious 2.2.2
2022-04-21T16:23:12.676Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.3
updated 1 package and audited 900 packages in 4.328s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:20.994Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:20.995Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:20.995Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:20.995Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:21.055Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:21.174Z appoptics:patching patched crypto 
2022-04-21T16:23:21.198Z appoptics:patching patched https 
2022-04-21T16:23:21.198Z appoptics:patching patched http 
2022-04-21T16:23:21.273Z appoptics:patching patched tedious 2.2.3
2022-04-21T16:23:21.276Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.4
updated 1 package and audited 900 packages in 3.643s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:28.946Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:28.947Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:28.947Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:28.947Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:29.008Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:29.128Z appoptics:patching patched crypto 
2022-04-21T16:23:29.144Z appoptics:patching patched https 
2022-04-21T16:23:29.144Z appoptics:patching patched http 
2022-04-21T16:23:29.231Z appoptics:patching patched tedious 2.2.4
2022-04-21T16:23:29.234Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.0
added 1 package from 1 contributor, updated 1 package and audited 901 packages in 5.054s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:38.245Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:38.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:38.245Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:38.246Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:38.307Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:38.425Z appoptics:patching patched crypto 
2022-04-21T16:23:38.443Z appoptics:patching patched https 
2022-04-21T16:23:38.443Z appoptics:patching patched http 
2022-04-21T16:23:38.536Z appoptics:patching patched tedious 2.3.0
2022-04-21T16:23:38.539Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.1
updated 1 package and audited 901 packages in 4.149s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:46.697Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:46.698Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:46.698Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:46.698Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:46.759Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:46.880Z appoptics:patching patched crypto 
2022-04-21T16:23:46.896Z appoptics:patching patched https 
2022-04-21T16:23:46.896Z appoptics:patching patched http 
2022-04-21T16:23:46.989Z appoptics:patching patched tedious 2.3.1
2022-04-21T16:23:46.992Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.4.0
added 1 package from 1 contributor, removed 1 package, updated 1 package and audited 901 packages in 4.141s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:23:55.302Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:23:55.303Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:23:55.303Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:23:55.304Z appoptics:debug using context provider: ace-context
2022-04-21T16:23:55.449Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:23:55.625Z appoptics:patching patched crypto 
2022-04-21T16:23:55.640Z appoptics:patching patched https 
2022-04-21T16:23:55.640Z appoptics:patching patched http 
2022-04-21T16:23:55.736Z appoptics:patching patched tedious 2.4.0
2022-04-21T16:23:55.739Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.0
added 1 package from 1 contributor, updated 1 package and audited 902 packages in 3.979s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:03.679Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:03.680Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:03.680Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:03.680Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:03.739Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:03.875Z appoptics:patching patched crypto 
2022-04-21T16:24:03.893Z appoptics:patching patched https 
2022-04-21T16:24:03.894Z appoptics:patching patched http 
2022-04-21T16:24:04.017Z appoptics:patching patched tedious 2.5.0
2022-04-21T16:24:04.020Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.1
updated 1 package and audited 902 packages in 4.041s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:12.037Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:12.038Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:12.038Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:12.038Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:12.098Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:12.215Z appoptics:patching patched crypto 
2022-04-21T16:24:12.230Z appoptics:patching patched https 
2022-04-21T16:24:12.230Z appoptics:patching patched http 
2022-04-21T16:24:12.321Z appoptics:patching patched tedious 2.5.1
2022-04-21T16:24:12.324Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.0
updated 1 package and audited 902 packages in 4.244s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:20.599Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:20.600Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:20.600Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:20.601Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:20.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:20.779Z appoptics:patching patched crypto 
2022-04-21T16:24:20.795Z appoptics:patching patched https 
2022-04-21T16:24:20.796Z appoptics:patching patched http 
2022-04-21T16:24:20.886Z appoptics:patching patched tedious 2.6.0
2022-04-21T16:24:20.889Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.1
updated 1 package and audited 902 packages in 3.48s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:28.384Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:28.385Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:28.385Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:28.386Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:28.445Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:28.561Z appoptics:patching patched crypto 
2022-04-21T16:24:28.576Z appoptics:patching patched https 
2022-04-21T16:24:28.576Z appoptics:patching patched http 
2022-04-21T16:24:28.686Z appoptics:patching patched tedious 2.6.1
2022-04-21T16:24:28.689Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.2
updated 1 package and audited 902 packages in 4.363s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:37.074Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:37.074Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:37.074Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:37.075Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:37.145Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:37.262Z appoptics:patching patched crypto 
2022-04-21T16:24:37.282Z appoptics:patching patched https 
2022-04-21T16:24:37.283Z appoptics:patching patched http 
2022-04-21T16:24:37.382Z appoptics:patching patched tedious 2.6.2
2022-04-21T16:24:37.385Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.3
updated 1 package and audited 902 packages in 3.797s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:45.316Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:45.317Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:45.317Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:45.317Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:45.387Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:45.515Z appoptics:patching patched crypto 
2022-04-21T16:24:45.537Z appoptics:patching patched https 
2022-04-21T16:24:45.537Z appoptics:patching patched http 
2022-04-21T16:24:45.628Z appoptics:patching patched tedious 2.6.3
2022-04-21T16:24:45.631Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.4
added 1 package from 1 contributor, updated 1 package and audited 903 packages in 3.873s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:24:53.537Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:53.538Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:53.538Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:53.538Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:53.599Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:53.722Z appoptics:patching patched crypto 
2022-04-21T16:24:53.738Z appoptics:patching patched https 
2022-04-21T16:24:53.738Z appoptics:patching patched http 
2022-04-21T16:24:53.861Z appoptics:patching patched tedious 2.6.4
2022-04-21T16:24:53.864Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.0
updated 1 package and audited 903 packages in 3.544s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:01.375Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:01.376Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:01.376Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:01.376Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:01.437Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:01.556Z appoptics:patching patched crypto 
2022-04-21T16:25:01.574Z appoptics:patching patched https 
2022-04-21T16:25:01.575Z appoptics:patching patched http 
2022-04-21T16:25:01.669Z appoptics:patching patched tedious 2.7.0
2022-04-21T16:25:01.672Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.1
updated 1 package and audited 903 packages in 3.52s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:09.234Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:09.235Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:09.235Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:09.236Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:09.294Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:09.411Z appoptics:patching patched crypto 
2022-04-21T16:25:09.434Z appoptics:patching patched https 
2022-04-21T16:25:09.435Z appoptics:patching patched http 
2022-04-21T16:25:09.525Z appoptics:patching patched tedious 2.7.1
2022-04-21T16:25:09.528Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.7.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.7.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.7.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.7.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.7.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.7.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.7.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.0
updated 1 package and audited 903 packages in 5.451s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:18.935Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:18.936Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:18.936Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:18.936Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:18.992Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:19.117Z appoptics:patching patched crypto 
2022-04-21T16:25:19.143Z appoptics:patching patched https 
2022-04-21T16:25:19.143Z appoptics:patching patched http 
2022-04-21T16:25:19.212Z appoptics:patching patched tedious 3.0.0
2022-04-21T16:25:19.215Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  2) probes.tedious 3.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  3) probes.tedious 3.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  4) probes.tedious 3.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  5) probes.tedious 3.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  6) probes.tedious 3.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  7) probes.tedious 3.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  8) probes.tedious 3.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  9) probes.tedious 3.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  10) probes.tedious 3.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.1
removed 9 packages, updated 2 packages and audited 894 packages in 3.868s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:27.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:27.276Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:27.276Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:27.276Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:27.351Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:27.503Z appoptics:patching patched crypto 
2022-04-21T16:25:27.536Z appoptics:patching patched https 
2022-04-21T16:25:27.537Z appoptics:patching patched http 
2022-04-21T16:25:27.611Z appoptics:patching patched tedious 3.0.1
2022-04-21T16:25:27.614Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  2) probes.tedious 3.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  3) probes.tedious 3.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  4) probes.tedious 3.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  5) probes.tedious 3.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  6) probes.tedious 3.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  7) probes.tedious 3.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  8) probes.tedious 3.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  9) probes.tedious 3.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  10) probes.tedious 3.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.0
updated 1 package and audited 894 packages in 3.487s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:35.095Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:35.095Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:35.095Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:35.096Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:35.155Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:35.271Z appoptics:patching patched crypto 
2022-04-21T16:25:35.286Z appoptics:patching patched https 
2022-04-21T16:25:35.286Z appoptics:patching patched http 
2022-04-21T16:25:35.362Z appoptics:patching patched tedious 4.0.0
2022-04-21T16:25:35.366Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 4.0.0
       should support basic queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  2) probes.tedious 4.0.0
       should support parameters with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  3) probes.tedious 4.0.0
       should sanitize query with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  4) probes.tedious 4.0.0
       should truncate long queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  5) probes.tedious 4.0.0
       should do nothing when disabled with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  6) probes.tedious 4.0.0
       should support basic queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  7) probes.tedious 4.0.0
       should support parameters with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  8) probes.tedious 4.0.0
       should sanitize query with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  9) probes.tedious 4.0.0
       should truncate long queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  10) probes.tedious 4.0.0
       should do nothing when disabled with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.1
updated 1 package and audited 894 packages in 4.095s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:43.403Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:43.404Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:43.404Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:43.404Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:43.464Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:43.583Z appoptics:patching patched crypto 
2022-04-21T16:25:43.600Z appoptics:patching patched https 
2022-04-21T16:25:43.600Z appoptics:patching patched http 
2022-04-21T16:25:43.661Z appoptics:patching patched tedious 4.0.1
2022-04-21T16:25:43.664Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.2
updated 1 package and audited 894 packages in 3.944s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:25:51.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:51.806Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:51.806Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:51.807Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:51.894Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:52.054Z appoptics:patching patched crypto 
2022-04-21T16:25:52.081Z appoptics:patching patched https 
2022-04-21T16:25:52.081Z appoptics:patching patched http 
2022-04-21T16:25:52.139Z appoptics:patching patched tedious 4.0.2
2022-04-21T16:25:52.142Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.3
updated 1 package and audited 894 packages in 4.093s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:00.259Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:00.260Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:00.260Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:00.261Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:00.320Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:00.437Z appoptics:patching patched crypto 
2022-04-21T16:26:00.452Z appoptics:patching patched https 
2022-04-21T16:26:00.452Z appoptics:patching patched http 
2022-04-21T16:26:00.514Z appoptics:patching patched tedious 4.0.3
2022-04-21T16:26:00.517Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.4
updated 1 package and audited 894 packages in 3.587s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:08.113Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:08.113Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:08.113Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:08.114Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:08.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:08.322Z appoptics:patching patched crypto 
2022-04-21T16:26:08.338Z appoptics:patching patched https 
2022-04-21T16:26:08.338Z appoptics:patching patched http 
2022-04-21T16:26:08.400Z appoptics:patching patched tedious 4.0.4
2022-04-21T16:26:08.403Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.0
added 29 packages from 62 contributors, updated 1 package and audited 923 packages in 4.813s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:17.227Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:17.228Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:17.228Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:17.228Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:17.289Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:17.420Z appoptics:patching patched crypto 
2022-04-21T16:26:17.453Z appoptics:patching patched https 
2022-04-21T16:26:17.454Z appoptics:patching patched http 
2022-04-21T16:26:17.503Z appoptics:patching patched zlib 
2022-04-21T16:26:17.542Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:17.542Z appoptics:patching patched fs 
2022-04-21T16:26:17.650Z appoptics:patching patched tedious 4.1.0
2022-04-21T16:26:17.653Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.1
updated 1 package and audited 923 packages in 4.266s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:25.970Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:25.971Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:25.971Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:25.972Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:26.073Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:26.348Z appoptics:patching patched crypto 
2022-04-21T16:26:26.399Z appoptics:patching patched https 
2022-04-21T16:26:26.399Z appoptics:patching patched http 
2022-04-21T16:26:26.457Z appoptics:patching patched zlib 
2022-04-21T16:26:26.505Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:26.505Z appoptics:patching patched fs 
2022-04-21T16:26:26.628Z appoptics:patching patched tedious 4.1.1
2022-04-21T16:26:26.632Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.2
updated 1 package and audited 923 packages in 3.977s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:34.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:34.618Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:34.618Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:34.619Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:34.681Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:34.797Z appoptics:patching patched crypto 
2022-04-21T16:26:34.813Z appoptics:patching patched https 
2022-04-21T16:26:34.814Z appoptics:patching patched http 
2022-04-21T16:26:34.860Z appoptics:patching patched zlib 
2022-04-21T16:26:34.896Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:34.896Z appoptics:patching patched fs 
2022-04-21T16:26:35.007Z appoptics:patching patched tedious 4.1.2
2022-04-21T16:26:35.012Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.3
updated 1 package and audited 923 packages in 3.686s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:42.717Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:42.718Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:42.718Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:42.719Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:42.779Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:42.901Z appoptics:patching patched crypto 
2022-04-21T16:26:42.918Z appoptics:patching patched https 
2022-04-21T16:26:42.919Z appoptics:patching patched http 
2022-04-21T16:26:42.965Z appoptics:patching patched zlib 
2022-04-21T16:26:43.001Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:43.001Z appoptics:patching patched fs 
2022-04-21T16:26:43.107Z appoptics:patching patched tedious 4.1.3
2022-04-21T16:26:43.110Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.2.0
updated 1 package and audited 923 packages in 4.123s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:51.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:51.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:51.327Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:51.327Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:51.388Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:51.508Z appoptics:patching patched crypto 
2022-04-21T16:26:51.527Z appoptics:patching patched https 
2022-04-21T16:26:51.527Z appoptics:patching patched http 
2022-04-21T16:26:51.589Z appoptics:patching patched zlib 
2022-04-21T16:26:51.631Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:51.632Z appoptics:patching patched fs 
2022-04-21T16:26:51.736Z appoptics:patching patched tedious 4.2.0
2022-04-21T16:26:51.740Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.0
updated 1 package and audited 923 packages in 3.751s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:26:59.514Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:59.515Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:59.515Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:59.515Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:59.576Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:59.693Z appoptics:patching patched crypto 
2022-04-21T16:26:59.711Z appoptics:patching patched https 
2022-04-21T16:26:59.712Z appoptics:patching patched http 
2022-04-21T16:26:59.759Z appoptics:patching patched zlib 
2022-04-21T16:26:59.793Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:26:59.794Z appoptics:patching patched fs 
2022-04-21T16:26:59.922Z appoptics:patching patched tedious 5.0.0
2022-04-21T16:26:59.925Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.1
updated 1 package and audited 923 packages in 4.758s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:08.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:08.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:08.687Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:08.688Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:08.747Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:08.867Z appoptics:patching patched crypto 
2022-04-21T16:27:08.884Z appoptics:patching patched https 
2022-04-21T16:27:08.884Z appoptics:patching patched http 
2022-04-21T16:27:08.931Z appoptics:patching patched zlib 
2022-04-21T16:27:08.968Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:08.968Z appoptics:patching patched fs 
2022-04-21T16:27:09.090Z appoptics:patching patched tedious 5.0.1
2022-04-21T16:27:09.093Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.2
updated 1 package and audited 923 packages in 4.054s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:17.450Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:17.450Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:17.450Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:17.451Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:17.508Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:17.630Z appoptics:patching patched crypto 
2022-04-21T16:27:17.646Z appoptics:patching patched https 
2022-04-21T16:27:17.646Z appoptics:patching patched http 
2022-04-21T16:27:17.692Z appoptics:patching patched zlib 
2022-04-21T16:27:17.728Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:17.728Z appoptics:patching patched fs 
2022-04-21T16:27:17.827Z appoptics:patching patched tedious 5.0.2
2022-04-21T16:27:17.831Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.3
updated 1 package and audited 923 packages in 4.413s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:26.229Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:26.230Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:26.230Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:26.230Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:26.289Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:26.408Z appoptics:patching patched crypto 
2022-04-21T16:27:26.434Z appoptics:patching patched https 
2022-04-21T16:27:26.434Z appoptics:patching patched http 
2022-04-21T16:27:26.478Z appoptics:patching patched zlib 
2022-04-21T16:27:26.513Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:26.514Z appoptics:patching patched fs 
2022-04-21T16:27:26.616Z appoptics:patching patched tedious 5.0.3
2022-04-21T16:27:26.619Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.0
updated 1 package and audited 923 packages in 3.551s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:34.147Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:34.148Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:34.148Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:34.148Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:34.208Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:34.328Z appoptics:patching patched crypto 
2022-04-21T16:27:34.345Z appoptics:patching patched https 
2022-04-21T16:27:34.345Z appoptics:patching patched http 
2022-04-21T16:27:34.392Z appoptics:patching patched zlib 
2022-04-21T16:27:34.428Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:34.428Z appoptics:patching patched fs 
2022-04-21T16:27:34.540Z appoptics:patching patched tedious 6.0.0
2022-04-21T16:27:34.543Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.1
updated 1 package and audited 923 packages in 3.795s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:42.384Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:42.384Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:42.384Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:42.385Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:42.448Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:42.567Z appoptics:patching patched crypto 
2022-04-21T16:27:42.586Z appoptics:patching patched https 
2022-04-21T16:27:42.586Z appoptics:patching patched http 
2022-04-21T16:27:42.632Z appoptics:patching patched zlib 
2022-04-21T16:27:42.668Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:42.668Z appoptics:patching patched fs 
2022-04-21T16:27:42.767Z appoptics:patching patched tedious 6.0.1
2022-04-21T16:27:42.770Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.0
updated 1 package and audited 923 packages in 4.609s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:27:51.371Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:51.371Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:51.371Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:51.372Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:51.431Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:51.550Z appoptics:patching patched crypto 
2022-04-21T16:27:51.567Z appoptics:patching patched https 
2022-04-21T16:27:51.567Z appoptics:patching patched http 
2022-04-21T16:27:51.612Z appoptics:patching patched zlib 
2022-04-21T16:27:51.648Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:27:51.648Z appoptics:patching patched fs 
2022-04-21T16:27:51.748Z appoptics:patching patched tedious 6.1.0
2022-04-21T16:27:51.751Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.1
updated 1 package and audited 923 packages in 4.574s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:00.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:00.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:00.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:00.447Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:00.506Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:00.626Z appoptics:patching patched crypto 
2022-04-21T16:28:00.642Z appoptics:patching patched https 
2022-04-21T16:28:00.642Z appoptics:patching patched http 
2022-04-21T16:28:00.688Z appoptics:patching patched zlib 
2022-04-21T16:28:00.724Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:00.724Z appoptics:patching patched fs 
2022-04-21T16:28:00.822Z appoptics:patching patched tedious 6.1.1
2022-04-21T16:28:00.825Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.2
updated 1 package and audited 923 packages in 4.077s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:08.887Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:08.888Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:08.888Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:08.888Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:08.947Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:09.080Z appoptics:patching patched crypto 
2022-04-21T16:28:09.103Z appoptics:patching patched https 
2022-04-21T16:28:09.103Z appoptics:patching patched http 
2022-04-21T16:28:09.153Z appoptics:patching patched zlib 
2022-04-21T16:28:09.188Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:09.188Z appoptics:patching patched fs 
2022-04-21T16:28:09.288Z appoptics:patching patched tedious 6.1.2
2022-04-21T16:28:09.291Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.0
updated 1 package and audited 923 packages in 4.35s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:17.754Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:17.755Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:17.755Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:17.755Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:17.899Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:18.100Z appoptics:patching patched crypto 
2022-04-21T16:28:18.134Z appoptics:patching patched https 
2022-04-21T16:28:18.135Z appoptics:patching patched http 
2022-04-21T16:28:18.178Z appoptics:patching patched zlib 
2022-04-21T16:28:18.214Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:18.214Z appoptics:patching patched fs 
2022-04-21T16:28:18.316Z appoptics:patching patched tedious 6.2.0
2022-04-21T16:28:18.319Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.1
added 1 package, removed 1 package, updated 1 package and audited 923 packages in 4.628s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:26.997Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:26.998Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:26.998Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:26.998Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:27.057Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:27.176Z appoptics:patching patched crypto 
2022-04-21T16:28:27.194Z appoptics:patching patched https 
2022-04-21T16:28:27.194Z appoptics:patching patched http 
2022-04-21T16:28:27.241Z appoptics:patching patched zlib 
2022-04-21T16:28:27.278Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:27.278Z appoptics:patching patched fs 
2022-04-21T16:28:27.373Z appoptics:patching patched tedious 6.2.1
2022-04-21T16:28:27.376Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (56ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.3.0
added 10 packages from 5 contributors, updated 1 package and audited 933 packages in 4.597s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:36.054Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:36.055Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:36.055Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:36.056Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:36.121Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:36.244Z appoptics:patching patched crypto 
2022-04-21T16:28:36.261Z appoptics:patching patched https 
2022-04-21T16:28:36.261Z appoptics:patching patched http 
2022-04-21T16:28:36.302Z appoptics:patching patched zlib 
2022-04-21T16:28:36.308Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:36.308Z appoptics:patching patched fs 
2022-04-21T16:28:36.481Z appoptics:patching patched tedious 6.3.0
2022-04-21T16:28:36.485Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.4.0
added 1 package from 35 contributors, updated 1 package and audited 934 packages in 3.809s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:44.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:44.282Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:44.282Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:44.283Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:44.343Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:44.463Z appoptics:patching patched crypto 
2022-04-21T16:28:44.482Z appoptics:patching patched https 
2022-04-21T16:28:44.483Z appoptics:patching patched http 
2022-04-21T16:28:44.525Z appoptics:patching patched zlib 
2022-04-21T16:28:44.530Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:44.530Z appoptics:patching patched fs 
2022-04-21T16:28:44.701Z appoptics:patching patched tedious 6.4.0
2022-04-21T16:28:44.707Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.5.0
added 2 packages from 1 contributor, removed 1 package, updated 3 packages and audited 935 packages in 4.146s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:28:52.900Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:52.901Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:52.901Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:52.902Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:52.961Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:53.078Z appoptics:patching patched crypto 
2022-04-21T16:28:53.099Z appoptics:patching patched https 
2022-04-21T16:28:53.099Z appoptics:patching patched http 
2022-04-21T16:28:53.141Z appoptics:patching patched zlib 
2022-04-21T16:28:53.146Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:53.146Z appoptics:patching patched fs 
2022-04-21T16:28:53.317Z appoptics:patching patched tedious 6.5.0
2022-04-21T16:28:53.320Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.0
updated 1 package and audited 935 packages in 4.558s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:01.900Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:01.901Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:01.901Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:01.902Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:01.960Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:02.087Z appoptics:patching patched crypto 
2022-04-21T16:29:02.102Z appoptics:patching patched https 
2022-04-21T16:29:02.103Z appoptics:patching patched http 
2022-04-21T16:29:02.165Z appoptics:patching patched zlib 
2022-04-21T16:29:02.170Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:02.170Z appoptics:patching patched fs 
2022-04-21T16:29:02.342Z appoptics:patching patched tedious 6.6.0
2022-04-21T16:29:02.348Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.1
added 1 package from 2 contributors, updated 1 package and audited 936 packages in 4.416s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:10.908Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:10.909Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:10.909Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:10.909Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:10.969Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:11.102Z appoptics:patching patched crypto 
2022-04-21T16:29:11.130Z appoptics:patching patched https 
2022-04-21T16:29:11.131Z appoptics:patching patched http 
2022-04-21T16:29:11.188Z appoptics:patching patched zlib 
2022-04-21T16:29:11.193Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:11.194Z appoptics:patching patched fs 
2022-04-21T16:29:11.396Z appoptics:patching patched tedious 6.6.1
2022-04-21T16:29:11.399Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.2
updated 1 package and audited 936 packages in 4.008s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:19.382Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:19.383Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:19.383Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:19.383Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:19.443Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:19.566Z appoptics:patching patched crypto 
2022-04-21T16:29:19.587Z appoptics:patching patched https 
2022-04-21T16:29:19.587Z appoptics:patching patched http 
2022-04-21T16:29:19.630Z appoptics:patching patched zlib 
2022-04-21T16:29:19.635Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:19.635Z appoptics:patching patched fs 
2022-04-21T16:29:19.812Z appoptics:patching patched tedious 6.6.2
2022-04-21T16:29:19.815Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (57ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.3
updated 1 package and audited 936 packages in 4.223s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:28.078Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:28.079Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:28.079Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:28.080Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:28.156Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:28.277Z appoptics:patching patched crypto 
2022-04-21T16:29:28.293Z appoptics:patching patched https 
2022-04-21T16:29:28.293Z appoptics:patching patched http 
2022-04-21T16:29:28.336Z appoptics:patching patched zlib 
2022-04-21T16:29:28.341Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:28.341Z appoptics:patching patched fs 
2022-04-21T16:29:28.511Z appoptics:patching patched tedious 6.6.3
2022-04-21T16:29:28.515Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.4
updated 1 package and audited 936 packages in 5.387s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:37.894Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:37.895Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:37.895Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:37.896Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:37.955Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:38.074Z appoptics:patching patched crypto 
2022-04-21T16:29:38.098Z appoptics:patching patched https 
2022-04-21T16:29:38.099Z appoptics:patching patched http 
2022-04-21T16:29:38.156Z appoptics:patching patched zlib 
2022-04-21T16:29:38.162Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:38.162Z appoptics:patching patched fs 
2022-04-21T16:29:38.347Z appoptics:patching patched tedious 6.6.4
2022-04-21T16:29:38.350Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.5
updated 1 package and audited 936 packages in 4.465s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:46.838Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:46.839Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:46.839Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:46.839Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:46.905Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:47.027Z appoptics:patching patched crypto 
2022-04-21T16:29:47.053Z appoptics:patching patched https 
2022-04-21T16:29:47.054Z appoptics:patching patched http 
2022-04-21T16:29:47.095Z appoptics:patching patched zlib 
2022-04-21T16:29:47.100Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:47.101Z appoptics:patching patched fs 
2022-04-21T16:29:47.279Z appoptics:patching patched tedious 6.6.5
2022-04-21T16:29:47.283Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.6
updated 1 package and audited 936 packages in 4.394s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:29:55.700Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:55.701Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:55.701Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:55.701Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:55.761Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:55.885Z appoptics:patching patched crypto 
2022-04-21T16:29:55.902Z appoptics:patching patched https 
2022-04-21T16:29:55.903Z appoptics:patching patched http 
2022-04-21T16:29:55.946Z appoptics:patching patched zlib 
2022-04-21T16:29:55.951Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:55.951Z appoptics:patching patched fs 
2022-04-21T16:29:56.130Z appoptics:patching patched tedious 6.6.6
2022-04-21T16:29:56.133Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.0
updated 1 package and audited 936 packages in 3.824s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:03.970Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:03.971Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:03.971Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:03.972Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:04.032Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:04.151Z appoptics:patching patched crypto 
2022-04-21T16:30:04.167Z appoptics:patching patched https 
2022-04-21T16:30:04.167Z appoptics:patching patched http 
2022-04-21T16:30:04.211Z appoptics:patching patched zlib 
2022-04-21T16:30:04.216Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:04.217Z appoptics:patching patched fs 
2022-04-21T16:30:04.392Z appoptics:patching patched tedious 6.7.0
2022-04-21T16:30:04.395Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.1
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 923 packages in 5.29s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:13.812Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:13.813Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:13.813Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:13.813Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:13.872Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:13.991Z appoptics:patching patched crypto 
2022-04-21T16:30:14.010Z appoptics:patching patched https 
2022-04-21T16:30:14.010Z appoptics:patching patched http 
2022-04-21T16:30:14.071Z appoptics:patching patched zlib 
2022-04-21T16:30:14.074Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:14.074Z appoptics:patching patched fs 
2022-04-21T16:30:14.189Z appoptics:patching patched tedious 6.7.1
2022-04-21T16:30:14.192Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@7.0.0
added 19 packages from 45 contributors, removed 8 packages, updated 6 packages, moved 1 package and audited 934 packages in 5.704s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:23.930Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:23.930Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:23.930Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:23.931Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:23.989Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:24.111Z appoptics:patching patched crypto 
2022-04-21T16:30:24.136Z appoptics:patching patched https 
2022-04-21T16:30:24.136Z appoptics:patching patched http 
2022-04-21T16:30:24.175Z appoptics:patching patched zlib 
2022-04-21T16:30:24.180Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:24.180Z appoptics:patching patched fs 
2022-04-21T16:30:24.354Z appoptics:patching patched tedious 7.0.0
2022-04-21T16:30:24.357Z appoptics:debug starting runtimeMetrics


  probes.tedious 7.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.0
added 1 package from 1 contributor, updated 1 package and audited 935 packages in 4.714s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:33.236Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:33.236Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:33.236Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:33.237Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:33.295Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:33.424Z appoptics:patching patched crypto 
2022-04-21T16:30:33.441Z appoptics:patching patched https 
2022-04-21T16:30:33.442Z appoptics:patching patched http 
2022-04-21T16:30:33.485Z appoptics:patching patched zlib 
2022-04-21T16:30:33.491Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:33.491Z appoptics:patching patched fs 
2022-04-21T16:30:33.720Z appoptics:patching patched tedious 8.0.0
2022-04-21T16:30:33.723Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
updated 1 package and audited 935 packages in 3.886s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:41.717Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:41.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:41.717Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:41.718Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:41.778Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:41.898Z appoptics:patching patched crypto 
2022-04-21T16:30:41.913Z appoptics:patching patched https 
2022-04-21T16:30:41.913Z appoptics:patching patched http 
2022-04-21T16:30:41.957Z appoptics:patching patched zlib 
2022-04-21T16:30:41.962Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:41.962Z appoptics:patching patched fs 
2022-04-21T16:30:42.153Z appoptics:patching patched tedious 8.0.1
2022-04-21T16:30:42.156Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.0
updated 2 packages and audited 935 packages in 4.371s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:50.559Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:50.560Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:50.560Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:50.560Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:50.619Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:50.736Z appoptics:patching patched crypto 
2022-04-21T16:30:50.753Z appoptics:patching patched https 
2022-04-21T16:30:50.754Z appoptics:patching patched http 
2022-04-21T16:30:50.804Z appoptics:patching patched zlib 
2022-04-21T16:30:50.809Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:50.809Z appoptics:patching patched fs 
2022-04-21T16:30:51.001Z appoptics:patching patched tedious 8.1.0
2022-04-21T16:30:51.004Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.1
updated 1 package and audited 935 packages in 4.273s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:30:59.483Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:59.483Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:59.483Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:59.484Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:59.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:59.670Z appoptics:patching patched crypto 
2022-04-21T16:30:59.713Z appoptics:patching patched https 
2022-04-21T16:30:59.713Z appoptics:patching patched http 
2022-04-21T16:30:59.763Z appoptics:patching patched zlib 
2022-04-21T16:30:59.768Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:59.769Z appoptics:patching patched fs 
2022-04-21T16:30:59.959Z appoptics:patching patched tedious 8.1.1
2022-04-21T16:30:59.962Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.2.0
updated 1 package and audited 935 packages in 4.587s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:08.577Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:08.578Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:08.578Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:08.578Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:08.636Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:08.770Z appoptics:patching patched crypto 
2022-04-21T16:31:08.786Z appoptics:patching patched https 
2022-04-21T16:31:08.787Z appoptics:patching patched http 
2022-04-21T16:31:08.837Z appoptics:patching patched zlib 
2022-04-21T16:31:08.842Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:08.842Z appoptics:patching patched fs 
2022-04-21T16:31:09.045Z appoptics:patching patched tedious 8.2.0
2022-04-21T16:31:09.048Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:09 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.0
updated 1 package and audited 935 packages in 4.463s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:17.568Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:17.568Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:17.568Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:17.569Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:17.633Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:17.754Z appoptics:patching patched crypto 
2022-04-21T16:31:17.770Z appoptics:patching patched https 
2022-04-21T16:31:17.770Z appoptics:patching patched http 
2022-04-21T16:31:17.816Z appoptics:patching patched zlib 
2022-04-21T16:31:17.821Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:17.822Z appoptics:patching patched fs 
2022-04-21T16:31:18.048Z appoptics:patching patched tedious 8.3.0
2022-04-21T16:31:18.052Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:18 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:31:18 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.1
updated 1 package and audited 935 packages in 3.723s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:25.874Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:25.874Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:25.874Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:25.875Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:25.935Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:26.058Z appoptics:patching patched crypto 
2022-04-21T16:31:26.079Z appoptics:patching patched https 
2022-04-21T16:31:26.079Z appoptics:patching patched http 
2022-04-21T16:31:26.122Z appoptics:patching patched zlib 
2022-04-21T16:31:26.127Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:26.127Z appoptics:patching patched fs 
2022-04-21T16:31:26.322Z appoptics:patching patched tedious 8.3.1
2022-04-21T16:31:26.325Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:27 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:31:27 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.0
updated 1 package and audited 935 packages in 4.97s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:35.387Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:35.387Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:35.387Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:35.388Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:35.448Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:35.565Z appoptics:patching patched crypto 
2022-04-21T16:31:35.583Z appoptics:patching patched https 
2022-04-21T16:31:35.583Z appoptics:patching patched http 
2022-04-21T16:31:35.626Z appoptics:patching patched zlib 
2022-04-21T16:31:35.631Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:35.631Z appoptics:patching patched fs 
2022-04-21T16:31:35.826Z appoptics:patching patched tedious 9.0.0
2022-04-21T16:31:35.829Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:36 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.1
updated 1 package and audited 935 packages in 4.691s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:44.597Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:44.598Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:44.598Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:44.598Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:44.659Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:44.785Z appoptics:patching patched crypto 
2022-04-21T16:31:44.802Z appoptics:patching patched https 
2022-04-21T16:31:44.802Z appoptics:patching patched http 
2022-04-21T16:31:44.848Z appoptics:patching patched zlib 
2022-04-21T16:31:44.853Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:44.853Z appoptics:patching patched fs 
2022-04-21T16:31:45.050Z appoptics:patching patched tedious 9.0.1
2022-04-21T16:31:45.053Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:45 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.0
updated 1 package and audited 935 packages in 4.105s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:31:53.236Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:53.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:53.237Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:53.237Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:53.316Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:53.458Z appoptics:patching patched crypto 
2022-04-21T16:31:53.491Z appoptics:patching patched https 
2022-04-21T16:31:53.491Z appoptics:patching patched http 
2022-04-21T16:31:53.550Z appoptics:patching patched zlib 
2022-04-21T16:31:53.555Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:53.555Z appoptics:patching patched fs 
2022-04-21T16:31:53.772Z appoptics:patching patched tedious 9.1.0
2022-04-21T16:31:53.776Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:31:54 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.1
updated 3 packages and audited 935 packages in 4.65s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:02.481Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:02.482Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:02.482Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:02.483Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:02.542Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:02.688Z appoptics:patching patched crypto 
2022-04-21T16:32:02.710Z appoptics:patching patched https 
2022-04-21T16:32:02.710Z appoptics:patching patched http 
2022-04-21T16:32:02.754Z appoptics:patching patched zlib 
2022-04-21T16:32:02.759Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:02.759Z appoptics:patching patched fs 
2022-04-21T16:32:02.957Z appoptics:patching patched tedious 9.1.1
2022-04-21T16:32:02.961Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:32:03 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.0
updated 1 package and audited 935 packages in 3.684s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:10.784Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:10.785Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:10.785Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:10.785Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:10.843Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:10.969Z appoptics:patching patched crypto 
2022-04-21T16:32:10.986Z appoptics:patching patched https 
2022-04-21T16:32:10.987Z appoptics:patching patched http 
2022-04-21T16:32:11.034Z appoptics:patching patched zlib 
2022-04-21T16:32:11.039Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:11.040Z appoptics:patching patched fs 
2022-04-21T16:32:11.240Z appoptics:patching patched tedious 9.2.0
2022-04-21T16:32:11.243Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:32:12 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:32:12 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.1
updated 1 package and audited 935 packages in 4.223s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:19.583Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:19.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:19.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:19.585Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:19.646Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:19.793Z appoptics:patching patched crypto 
2022-04-21T16:32:19.810Z appoptics:patching patched https 
2022-04-21T16:32:19.810Z appoptics:patching patched http 
2022-04-21T16:32:19.856Z appoptics:patching patched zlib 
2022-04-21T16:32:19.861Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:19.861Z appoptics:patching patched fs 
2022-04-21T16:32:20.053Z appoptics:patching patched tedious 9.2.1
2022-04-21T16:32:20.056Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:32:20 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:32:20 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.2
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 922 packages in 4.181s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:28.280Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:28.281Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:28.281Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:28.281Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:28.353Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:28.511Z appoptics:patching patched crypto 
2022-04-21T16:32:28.545Z appoptics:patching patched https 
2022-04-21T16:32:28.546Z appoptics:patching patched http 
2022-04-21T16:32:28.624Z appoptics:patching patched zlib 
2022-04-21T16:32:28.626Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:28.627Z appoptics:patching patched fs 
2022-04-21T16:32:28.836Z appoptics:patching patched tedious 9.2.2
2022-04-21T16:32:28.841Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:32:29 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:32:29 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.3
added 22 packages from 54 contributors, updated 2 packages, moved 2 packages and audited 944 packages in 4.157s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:37.137Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:37.138Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:37.138Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:37.138Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:37.197Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:37.316Z appoptics:patching patched crypto 
2022-04-21T16:32:37.335Z appoptics:patching patched https 
2022-04-21T16:32:37.335Z appoptics:patching patched http 
2022-04-21T16:32:37.397Z appoptics:patching patched zlib 
2022-04-21T16:32:37.400Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:37.400Z appoptics:patching patched fs 
2022-04-21T16:32:37.625Z appoptics:patching patched tedious 9.2.3
2022-04-21T16:32:37.628Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Thu, 21 Apr 2022 16:32:38 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Thu, 21 Apr 2022 16:32:38 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@10.0.0
updated 1 package and audited 944 packages in 4.412s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:46.095Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:46.096Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:46.096Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:46.096Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:46.157Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:46.277Z appoptics:patching patched crypto 
2022-04-21T16:32:46.294Z appoptics:patching patched https 
2022-04-21T16:32:46.294Z appoptics:patching patched http 
2022-04-21T16:32:46.360Z appoptics:patching patched zlib 
2022-04-21T16:32:46.363Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:46.363Z appoptics:patching patched fs 
2022-04-21T16:32:46.582Z appoptics:patching patched tedious 10.0.0
2022-04-21T16:32:46.585Z appoptics:debug starting runtimeMetrics


  probes.tedious 10.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 10.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 10.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 10.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 10.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 10.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 10.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 10.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 10.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 10.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 10.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 10.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 10.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.0
updated 1 package and audited 944 packages in 5.176s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:32:55.822Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:55.823Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:55.823Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:55.824Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:55.886Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:56.004Z appoptics:patching patched crypto 
2022-04-21T16:32:56.020Z appoptics:patching patched https 
2022-04-21T16:32:56.020Z appoptics:patching patched http 
2022-04-21T16:32:56.081Z appoptics:patching patched zlib 
2022-04-21T16:32:56.083Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:56.084Z appoptics:patching patched fs 
2022-04-21T16:32:56.305Z appoptics:patching patched tedious 11.0.0
2022-04-21T16:32:56.308Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.1
added 1 package from 3 contributors, removed 22 packages, updated 3 packages, moved 2 packages and audited 923 packages in 4.359s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:04.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:04.809Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:04.810Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:04.810Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:04.890Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:05.015Z appoptics:patching patched crypto 
2022-04-21T16:33:05.030Z appoptics:patching patched https 
2022-04-21T16:33:05.031Z appoptics:patching patched http 
2022-04-21T16:33:05.096Z appoptics:patching patched zlib 
2022-04-21T16:33:05.099Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:05.099Z appoptics:patching patched fs 
2022-04-21T16:33:05.234Z appoptics:patching patched tedious 11.0.1
2022-04-21T16:33:05.238Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.2
added 1 package from 1 contributor, updated 1 package and audited 924 packages in 4.705s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:13.961Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:13.961Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:13.961Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:13.962Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:14.022Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:14.139Z appoptics:patching patched crypto 
2022-04-21T16:33:14.155Z appoptics:patching patched https 
2022-04-21T16:33:14.155Z appoptics:patching patched http 
2022-04-21T16:33:14.216Z appoptics:patching patched zlib 
2022-04-21T16:33:14.219Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:14.219Z appoptics:patching patched fs 
2022-04-21T16:33:14.349Z appoptics:patching patched tedious 11.0.2
2022-04-21T16:33:14.352Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.3
updated 1 package and audited 924 packages in 4.141s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:22.548Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:22.549Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:22.549Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:22.549Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:22.606Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:22.730Z appoptics:patching patched crypto 
2022-04-21T16:33:22.746Z appoptics:patching patched https 
2022-04-21T16:33:22.746Z appoptics:patching patched http 
2022-04-21T16:33:22.814Z appoptics:patching patched zlib 
2022-04-21T16:33:22.816Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:22.817Z appoptics:patching patched fs 
2022-04-21T16:33:22.948Z appoptics:patching patched tedious 11.0.3
2022-04-21T16:33:22.951Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.4
updated 1 package and audited 924 packages in 4.293s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:31.293Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:31.294Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:31.294Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:31.294Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:31.353Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:31.485Z appoptics:patching patched crypto 
2022-04-21T16:33:31.502Z appoptics:patching patched https 
2022-04-21T16:33:31.502Z appoptics:patching patched http 
2022-04-21T16:33:31.564Z appoptics:patching patched zlib 
2022-04-21T16:33:31.566Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:31.567Z appoptics:patching patched fs 
2022-04-21T16:33:31.701Z appoptics:patching patched tedious 11.0.4
2022-04-21T16:33:31.704Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.5
updated 1 package and audited 924 packages in 4.506s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:40.291Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:40.291Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:40.291Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:40.292Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:40.361Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:40.538Z appoptics:patching patched crypto 
2022-04-21T16:33:40.572Z appoptics:patching patched https 
2022-04-21T16:33:40.573Z appoptics:patching patched http 
2022-04-21T16:33:40.650Z appoptics:patching patched zlib 
2022-04-21T16:33:40.653Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:40.653Z appoptics:patching patched fs 
2022-04-21T16:33:40.818Z appoptics:patching patched tedious 11.0.5
2022-04-21T16:33:40.821Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.6
updated 1 package and audited 924 packages in 3.588s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:48.415Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:48.416Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:48.416Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:48.417Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:48.476Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:48.595Z appoptics:patching patched crypto 
2022-04-21T16:33:48.612Z appoptics:patching patched https 
2022-04-21T16:33:48.613Z appoptics:patching patched http 
2022-04-21T16:33:48.674Z appoptics:patching patched zlib 
2022-04-21T16:33:48.677Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:48.677Z appoptics:patching patched fs 
2022-04-21T16:33:48.823Z appoptics:patching patched tedious 11.0.6
2022-04-21T16:33:48.826Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.6
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.6
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.6
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.6
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.6
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.6
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.6
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.6
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.7
updated 1 package and audited 924 packages in 3.747s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:33:56.600Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:56.600Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:56.600Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:56.601Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:56.658Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:56.780Z appoptics:patching patched crypto 
2022-04-21T16:33:56.796Z appoptics:patching patched https 
2022-04-21T16:33:56.796Z appoptics:patching patched http 
2022-04-21T16:33:56.857Z appoptics:patching patched zlib 
2022-04-21T16:33:56.860Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:56.860Z appoptics:patching patched fs 
2022-04-21T16:33:56.989Z appoptics:patching patched tedious 11.0.7
2022-04-21T16:33:56.992Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.7
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.7
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.7
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.7
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.7
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.7
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.7
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.7
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.8
updated 1 package and audited 924 packages in 5.021s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:34:06.041Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:06.042Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:06.042Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:06.043Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:06.104Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:06.221Z appoptics:patching patched crypto 
2022-04-21T16:34:06.236Z appoptics:patching patched https 
2022-04-21T16:34:06.236Z appoptics:patching patched http 
2022-04-21T16:34:06.303Z appoptics:patching patched zlib 
2022-04-21T16:34:06.306Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:06.306Z appoptics:patching patched fs 
2022-04-21T16:34:06.444Z appoptics:patching patched tedious 11.0.8
2022-04-21T16:34:06.447Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.8
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.8
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.8
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.8
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.8
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.8
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.8
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.8
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_34_19_085Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.0.9
added 56 packages from 41 contributors, removed 2 packages, updated 4 packages and audited 1015 packages in 9.511s

92 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:34:20.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:20.049Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:20.049Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:20.050Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:20.119Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:20.260Z appoptics:patching patched crypto 
2022-04-21T16:34:20.277Z appoptics:patching patched https 
2022-04-21T16:34:20.277Z appoptics:patching patched http 
2022-04-21T16:34:20.338Z appoptics:patching patched zlib 
2022-04-21T16:34:20.341Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:20.341Z appoptics:patching patched fs 
2022-04-21T16:34:20.478Z appoptics:patching patched tedious 11.0.9
2022-04-21T16:34:20.481Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.9
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.9
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.9
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.9
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.9
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.9
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.9
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.9
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.9
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.9
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.9
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.9
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.9
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_34_29_802Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.0.10
updated 1 package and audited 1015 packages in 6.109s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:34:30.783Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:30.784Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:30.784Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:30.785Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:30.845Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:30.979Z appoptics:patching patched crypto 
2022-04-21T16:34:30.995Z appoptics:patching patched https 
2022-04-21T16:34:30.996Z appoptics:patching patched http 
2022-04-21T16:34:31.062Z appoptics:patching patched zlib 
2022-04-21T16:34:31.065Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:31.065Z appoptics:patching patched fs 
2022-04-21T16:34:31.198Z appoptics:patching patched tedious 11.0.10
2022-04-21T16:34:31.201Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.10
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.10
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.10
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.10
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.10
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.10
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.10
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.10
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.10
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.10
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.10
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.10
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.10
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_34_40_737Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.1.0
updated 1 package and audited 1015 packages in 6.307s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:34:41.725Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:41.726Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:41.726Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:41.727Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:41.783Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:41.912Z appoptics:patching patched crypto 
2022-04-21T16:34:41.931Z appoptics:patching patched https 
2022-04-21T16:34:41.931Z appoptics:patching patched http 
2022-04-21T16:34:41.991Z appoptics:patching patched zlib 
2022-04-21T16:34:41.994Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:41.994Z appoptics:patching patched fs 
2022-04-21T16:34:42.127Z appoptics:patching patched tedious 11.1.0
2022-04-21T16:34:42.130Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_34_51_266Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.1.1
updated 1 package and audited 1015 packages in 5.945s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:34:52.161Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:52.162Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:52.162Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:52.163Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:52.222Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:52.359Z appoptics:patching patched crypto 
2022-04-21T16:34:52.379Z appoptics:patching patched https 
2022-04-21T16:34:52.380Z appoptics:patching patched http 
2022-04-21T16:34:52.441Z appoptics:patching patched zlib 
2022-04-21T16:34:52.444Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:52.444Z appoptics:patching patched fs 
2022-04-21T16:34:52.581Z appoptics:patching patched tedious 11.1.1
2022-04-21T16:34:52.584Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_01_195Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.2.0
updated 1 package and audited 1015 packages in 5.637s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:02.658Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:02.659Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:02.659Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:02.663Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:02.784Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:03.000Z appoptics:patching patched crypto 
2022-04-21T16:35:03.053Z appoptics:patching patched https 
2022-04-21T16:35:03.054Z appoptics:patching patched http 
2022-04-21T16:35:03.117Z appoptics:patching patched zlib 
2022-04-21T16:35:03.120Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:03.120Z appoptics:patching patched fs 
2022-04-21T16:35:03.255Z appoptics:patching patched tedious 11.2.0
2022-04-21T16:35:03.258Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_11_850Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.3.0
added 1 package from 2 contributors, updated 4 packages and audited 1016 packages in 5.437s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:12.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:12.815Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:12.815Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:12.816Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:12.875Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:12.995Z appoptics:patching patched crypto 
2022-04-21T16:35:13.012Z appoptics:patching patched https 
2022-04-21T16:35:13.012Z appoptics:patching patched http 
2022-04-21T16:35:13.077Z appoptics:patching patched zlib 
2022-04-21T16:35:13.081Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:13.081Z appoptics:patching patched fs 
2022-04-21T16:35:13.259Z appoptics:patching patched tedious 11.3.0
2022-04-21T16:35:13.263Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_22_389Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.3.1
updated 1 package and audited 1016 packages in 5.955s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:23.336Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:23.337Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:23.337Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:23.338Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:23.398Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:23.517Z appoptics:patching patched crypto 
2022-04-21T16:35:23.535Z appoptics:patching patched https 
2022-04-21T16:35:23.536Z appoptics:patching patched http 
2022-04-21T16:35:23.600Z appoptics:patching patched zlib 
2022-04-21T16:35:23.603Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:23.603Z appoptics:patching patched fs 
2022-04-21T16:35:23.742Z appoptics:patching patched tedious 11.3.1
2022-04-21T16:35:23.745Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_32_361Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.0
updated 1 package and audited 1016 packages in 5.422s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:33.319Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:33.320Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:33.320Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:33.320Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:33.382Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:33.505Z appoptics:patching patched crypto 
2022-04-21T16:35:33.522Z appoptics:patching patched https 
2022-04-21T16:35:33.522Z appoptics:patching patched http 
2022-04-21T16:35:33.591Z appoptics:patching patched zlib 
2022-04-21T16:35:33.594Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:33.594Z appoptics:patching patched fs 
2022-04-21T16:35:33.732Z appoptics:patching patched tedious 11.4.0
2022-04-21T16:35:33.736Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_42_827Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.1
updated 1 package and audited 1016 packages in 5.942s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:43.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:43.810Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:43.810Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:43.810Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:43.876Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:43.997Z appoptics:patching patched crypto 
2022-04-21T16:35:44.020Z appoptics:patching patched https 
2022-04-21T16:35:44.020Z appoptics:patching patched http 
2022-04-21T16:35:44.076Z appoptics:patching patched zlib 
2022-04-21T16:35:44.079Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:44.080Z appoptics:patching patched fs 
2022-04-21T16:35:44.239Z appoptics:patching patched tedious 11.4.1
2022-04-21T16:35:44.243Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_35_53_502Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.2
updated 1 package and audited 1016 packages in 6.007s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:35:54.463Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:54.464Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:54.464Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:54.464Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:54.524Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:54.644Z appoptics:patching patched crypto 
2022-04-21T16:35:54.663Z appoptics:patching patched https 
2022-04-21T16:35:54.663Z appoptics:patching patched http 
2022-04-21T16:35:54.722Z appoptics:patching patched zlib 
2022-04-21T16:35:54.725Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:54.725Z appoptics:patching patched fs 
2022-04-21T16:35:54.862Z appoptics:patching patched tedious 11.4.2
2022-04-21T16:35:54.865Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_36_04_756Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.5.0
updated 1 package and audited 1016 packages in 6.683s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:36:05.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:05.705Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:05.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:05.706Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:05.767Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:05.889Z appoptics:patching patched crypto 
2022-04-21T16:36:05.905Z appoptics:patching patched https 
2022-04-21T16:36:05.906Z appoptics:patching patched http 
2022-04-21T16:36:05.964Z appoptics:patching patched zlib 
2022-04-21T16:36:05.967Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:05.967Z appoptics:patching patched fs 
2022-04-21T16:36:06.103Z appoptics:patching patched tedious 11.5.0
2022-04-21T16:36:06.106Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.5.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.5.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.5.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.5.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.5.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.5.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_36_16_039Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.6.0
updated 1 package and audited 1016 packages in 6.799s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:36:16.986Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:16.987Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:16.987Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:16.987Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:17.047Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:17.173Z appoptics:patching patched crypto 
2022-04-21T16:36:17.190Z appoptics:patching patched https 
2022-04-21T16:36:17.190Z appoptics:patching patched http 
2022-04-21T16:36:17.252Z appoptics:patching patched zlib 
2022-04-21T16:36:17.255Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:17.255Z appoptics:patching patched fs 
2022-04-21T16:36:17.396Z appoptics:patching patched tedious 11.6.0
2022-04-21T16:36:17.399Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.6.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.6.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.6.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.6.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.6.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.6.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_36_27_805Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.6.1
updated 1 package and audited 1016 packages in 7.24s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:36:28.734Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:28.734Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:28.734Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:28.735Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:28.793Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:28.913Z appoptics:patching patched crypto 
2022-04-21T16:36:28.931Z appoptics:patching patched https 
2022-04-21T16:36:28.931Z appoptics:patching patched http 
2022-04-21T16:36:28.990Z appoptics:patching patched zlib 
2022-04-21T16:36:28.993Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:28.993Z appoptics:patching patched fs 
2022-04-21T16:36:29.144Z appoptics:patching patched tedious 11.6.1
2022-04-21T16:36:29.147Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.6.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.6.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.6.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.6.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.6.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.6.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_36_38_821Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.7.0
updated 1 package and audited 1016 packages in 6.527s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:36:39.734Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:39.735Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:39.735Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:39.735Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:39.795Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:39.914Z appoptics:patching patched crypto 
2022-04-21T16:36:39.931Z appoptics:patching patched https 
2022-04-21T16:36:39.931Z appoptics:patching patched http 
2022-04-21T16:36:39.991Z appoptics:patching patched zlib 
2022-04-21T16:36:39.994Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:39.994Z appoptics:patching patched fs 
2022-04-21T16:36:40.134Z appoptics:patching patched tedious 11.7.0
2022-04-21T16:36:40.138Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.7.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.7.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.7.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.7.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.7.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.7.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_36_49_897Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.8.0
updated 1 package and audited 1016 packages in 6.603s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:36:50.826Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:50.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:50.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:50.827Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:50.887Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:51.008Z appoptics:patching patched crypto 
2022-04-21T16:36:51.026Z appoptics:patching patched https 
2022-04-21T16:36:51.027Z appoptics:patching patched http 
2022-04-21T16:36:51.086Z appoptics:patching patched zlib 
2022-04-21T16:36:51.089Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:51.090Z appoptics:patching patched fs 
2022-04-21T16:36:51.230Z appoptics:patching patched tedious 11.8.0
2022-04-21T16:36:51.233Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.8.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.8.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.8.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.8.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.8.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.8.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_00_167Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.0.0
updated 1 package and audited 1016 packages in 5.857s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:01.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:01.182Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:01.182Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:01.183Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:01.244Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:01.364Z appoptics:patching patched crypto 
2022-04-21T16:37:01.381Z appoptics:patching patched https 
2022-04-21T16:37:01.381Z appoptics:patching patched http 
2022-04-21T16:37:01.446Z appoptics:patching patched zlib 
2022-04-21T16:37:01.449Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:01.449Z appoptics:patching patched fs 
2022-04-21T16:37:01.587Z appoptics:patching patched tedious 12.0.0
2022-04-21T16:37:01.590Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_11_783Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.1.0
updated 1 package and audited 1016 packages in 7.266s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:12.976Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:12.977Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:12.977Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:12.978Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:13.037Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:13.168Z appoptics:patching patched crypto 
2022-04-21T16:37:13.195Z appoptics:patching patched https 
2022-04-21T16:37:13.195Z appoptics:patching patched http 
2022-04-21T16:37:13.253Z appoptics:patching patched zlib 
2022-04-21T16:37:13.256Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:13.256Z appoptics:patching patched fs 
2022-04-21T16:37:13.393Z appoptics:patching patched tedious 12.1.0
2022-04-21T16:37:13.396Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_21_997Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.2.0
updated 1 package and audited 1016 packages in 5.653s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:23.300Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:23.300Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:23.300Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:23.301Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:23.364Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:23.507Z appoptics:patching patched crypto 
2022-04-21T16:37:23.542Z appoptics:patching patched https 
2022-04-21T16:37:23.542Z appoptics:patching patched http 
2022-04-21T16:37:23.621Z appoptics:patching patched zlib 
2022-04-21T16:37:23.623Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:23.624Z appoptics:patching patched fs 
2022-04-21T16:37:23.793Z appoptics:patching patched tedious 12.2.0
2022-04-21T16:37:23.796Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_32_793Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.3.0
updated 3 packages and audited 1016 packages in 5.781s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:33.685Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:33.686Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:33.686Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:33.686Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:33.747Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:33.868Z appoptics:patching patched crypto 
2022-04-21T16:37:33.885Z appoptics:patching patched https 
2022-04-21T16:37:33.885Z appoptics:patching patched http 
2022-04-21T16:37:33.946Z appoptics:patching patched zlib 
2022-04-21T16:37:33.949Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:33.949Z appoptics:patching patched fs 
2022-04-21T16:37:34.092Z appoptics:patching patched tedious 12.3.0
2022-04-21T16:37:34.095Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_43_542Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.0
removed 17 packages, updated 1 package and audited 999 packages in 6.247s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:44.490Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:44.491Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:44.491Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:44.491Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:44.548Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:44.667Z appoptics:patching patched crypto 
2022-04-21T16:37:44.691Z appoptics:patching patched https 
2022-04-21T16:37:44.691Z appoptics:patching patched http 
2022-04-21T16:37:44.748Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:44.749Z appoptics:patching patched fs 
2022-04-21T16:37:44.763Z appoptics:patching patched zlib 
2022-04-21T16:37:44.899Z appoptics:patching patched tedious 13.0.0
2022-04-21T16:37:44.903Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_37_54_633Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.1
updated 1 package and audited 999 packages in 6.519s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:37:55.522Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:55.523Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:55.523Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:55.523Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:55.583Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:55.704Z appoptics:patching patched crypto 
2022-04-21T16:37:55.720Z appoptics:patching patched https 
2022-04-21T16:37:55.720Z appoptics:patching patched http 
2022-04-21T16:37:55.776Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:55.776Z appoptics:patching patched fs 
2022-04-21T16:37:55.791Z appoptics:patching patched zlib 
2022-04-21T16:37:55.923Z appoptics:patching patched tedious 13.0.1
2022-04-21T16:37:55.927Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_04_490Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.2
updated 1 package and audited 999 packages in 5.406s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:38:05.456Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:05.457Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:05.457Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:05.458Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:05.513Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:05.637Z appoptics:patching patched crypto 
2022-04-21T16:38:05.661Z appoptics:patching patched https 
2022-04-21T16:38:05.662Z appoptics:patching patched http 
2022-04-21T16:38:05.719Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:05.719Z appoptics:patching patched fs 
2022-04-21T16:38:05.734Z appoptics:patching patched zlib 
2022-04-21T16:38:05.873Z appoptics:patching patched tedious 13.0.2
2022-04-21T16:38:05.876Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_15_586Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.3
updated 1 package and audited 999 packages in 6.554s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:38:16.574Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:16.574Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:16.575Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:16.575Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:16.635Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:16.754Z appoptics:patching patched crypto 
2022-04-21T16:38:16.772Z appoptics:patching patched https 
2022-04-21T16:38:16.772Z appoptics:patching patched http 
2022-04-21T16:38:16.831Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:16.832Z appoptics:patching patched fs 
2022-04-21T16:38:16.846Z appoptics:patching patched zlib 
2022-04-21T16:38:16.986Z appoptics:patching patched tedious 13.0.3
2022-04-21T16:38:16.989Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_25_667Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.4
updated 1 package and audited 999 packages in 5.546s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:38:26.630Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:26.631Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:26.631Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:26.632Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:26.695Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:26.814Z appoptics:patching patched crypto 
2022-04-21T16:38:26.831Z appoptics:patching patched https 
2022-04-21T16:38:26.831Z appoptics:patching patched http 
2022-04-21T16:38:26.892Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:26.892Z appoptics:patching patched fs 
2022-04-21T16:38:26.907Z appoptics:patching patched zlib 
2022-04-21T16:38:27.048Z appoptics:patching patched tedious 13.0.4
2022-04-21T16:38:27.051Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_37_729Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.5
updated 1 package and audited 999 packages in 7.574s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:38:38.746Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:38.746Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:38.746Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:38.747Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:38.808Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:38.929Z appoptics:patching patched crypto 
2022-04-21T16:38:38.946Z appoptics:patching patched https 
2022-04-21T16:38:38.946Z appoptics:patching patched http 
2022-04-21T16:38:39.008Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:39.008Z appoptics:patching patched fs 
2022-04-21T16:38:39.023Z appoptics:patching patched zlib 
2022-04-21T16:38:39.167Z appoptics:patching patched tedious 13.0.5
2022-04-21T16:38:39.170Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_48_455Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.1.0
updated 1 package and audited 999 packages in 6.048s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:38:49.366Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:49.367Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:49.367Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:49.368Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:49.428Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:49.549Z appoptics:patching patched crypto 
2022-04-21T16:38:49.571Z appoptics:patching patched https 
2022-04-21T16:38:49.571Z appoptics:patching patched http 
2022-04-21T16:38:49.632Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:49.633Z appoptics:patching patched fs 
2022-04-21T16:38:49.647Z appoptics:patching patched zlib 
2022-04-21T16:38:49.793Z appoptics:patching patched tedious 13.1.0
2022-04-21T16:38:49.796Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_38_59_240Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.2.0
updated 1 package and audited 999 packages in 6.302s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:00.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:00.183Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:00.183Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:00.183Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:00.240Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:00.364Z appoptics:patching patched crypto 
2022-04-21T16:39:00.382Z appoptics:patching patched https 
2022-04-21T16:39:00.383Z appoptics:patching patched http 
2022-04-21T16:39:00.446Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:00.446Z appoptics:patching patched fs 
2022-04-21T16:39:00.461Z appoptics:patching patched zlib 
2022-04-21T16:39:00.600Z appoptics:patching patched tedious 13.2.0
2022-04-21T16:39:00.603Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_39_09_888Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.0.0
updated 1 package and audited 999 packages in 6.113s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:10.834Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:10.834Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:10.834Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:10.835Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:10.894Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:11.012Z appoptics:patching patched crypto 
2022-04-21T16:39:11.028Z appoptics:patching patched https 
2022-04-21T16:39:11.028Z appoptics:patching patched http 
2022-04-21T16:39:11.088Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:11.089Z appoptics:patching patched fs 
2022-04-21T16:39:11.103Z appoptics:patching patched zlib 
2022-04-21T16:39:11.243Z appoptics:patching patched tedious 14.0.0
2022-04-21T16:39:11.246Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.0.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.0.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.0.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.0.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.0.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.0.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_39_20_364Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.1.0
updated 1 package and audited 999 packages in 6.178s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:21.483Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:21.484Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:21.484Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:21.484Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:21.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:21.662Z appoptics:patching patched crypto 
2022-04-21T16:39:21.678Z appoptics:patching patched https 
2022-04-21T16:39:21.679Z appoptics:patching patched http 
2022-04-21T16:39:21.738Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:21.738Z appoptics:patching patched fs 
2022-04-21T16:39:21.756Z appoptics:patching patched zlib 
2022-04-21T16:39:21.924Z appoptics:patching patched tedious 14.1.0
2022-04-21T16:39:21.927Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5169) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.1.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.1.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.1.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.1.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.1.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.1.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-21T16_39_30_976Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.2.0
updated 1 package and audited 999 packages in 6.111s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:32.341Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:32.341Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:32.341Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:32.342Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:32.414Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:32.572Z appoptics:patching patched crypto 
2022-04-21T16:39:32.621Z appoptics:patching patched https 
2022-04-21T16:39:32.621Z appoptics:patching patched http 
2022-04-21T16:39:32.696Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:32.697Z appoptics:patching patched fs 
2022-04-21T16:39:32.715Z appoptics:patching patched zlib 
2022-04-21T16:39:32.903Z appoptics:patching patched tedious 14.2.0
2022-04-21T16:39:32.906Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5229) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.2.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.2.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.2.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.2.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.2.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.2.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.3.0
added 5 packages from 3 contributors, removed 9 packages, updated 5 packages and audited 958 packages in 6.025s

87 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:43.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:43.050Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:43.050Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:43.051Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:43.127Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:43.272Z appoptics:patching patched crypto 
2022-04-21T16:39:43.306Z appoptics:patching patched https 
2022-04-21T16:39:43.306Z appoptics:patching patched http 
2022-04-21T16:39:43.361Z appoptics:patching patched zlib 
2022-04-21T16:39:43.416Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:43.417Z appoptics:patching patched fs 
2022-04-21T16:39:43.549Z appoptics:patching patched tedious 14.3.0
2022-04-21T16:39:43.553Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5251) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.3.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.3.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.3.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.3.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.3.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.3.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.4.0
updated 1 package and audited 958 packages in 4.591s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:39:52.206Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:52.207Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:52.207Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:52.208Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:52.266Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:52.386Z appoptics:patching patched crypto 
2022-04-21T16:39:52.406Z appoptics:patching patched https 
2022-04-21T16:39:52.406Z appoptics:patching patched http 
2022-04-21T16:39:52.456Z appoptics:patching patched zlib 
2022-04-21T16:39:52.499Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:52.499Z appoptics:patching patched fs 
2022-04-21T16:39:52.606Z appoptics:patching patched tedious 14.4.0
2022-04-21T16:39:52.609Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5273) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.4.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.4.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.4.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.4.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.4.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.4.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
added 27 packages from 51 contributors, removed 50 packages, updated 7 packages, moved 1 package and audited 935 packages in 5.092s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
