
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:24:57.028Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:24:57.028Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:24:57.028Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:24:57.029Z appoptics:debug using context provider: ace-context
2022-04-21T16:24:57.095Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:24:57.217Z appoptics:patching patched crypto 
2022-04-21T16:24:57.239Z appoptics:patching patched https 
2022-04-21T16:24:57.240Z appoptics:patching patched http 
2022-04-21T16:24:57.286Z appoptics:patching patched pino 2.3.0
2022-04-21T16:24:57.289Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:04.411Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:04.412Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:04.412Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:04.412Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:04.468Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:04.604Z appoptics:patching patched crypto 
2022-04-21T16:25:04.640Z appoptics:patching patched https 
2022-04-21T16:25:04.641Z appoptics:patching patched http 
2022-04-21T16:25:04.676Z appoptics:patching patched pino 2.4.0
2022-04-21T16:25:04.679Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:11.952Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:11.958Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:11.958Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:11.959Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:12.144Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:12.399Z appoptics:patching patched crypto 
2022-04-21T16:25:12.479Z appoptics:patching patched https 
2022-04-21T16:25:12.486Z appoptics:patching patched http 
2022-04-21T16:25:12.657Z appoptics:patching patched pino 2.4.1
2022-04-21T16:25:12.670Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message (50ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (107ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (400ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:20.082Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:20.083Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:20.083Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:20.084Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:20.145Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:20.258Z appoptics:patching patched crypto 
2022-04-21T16:25:20.275Z appoptics:patching patched https 
2022-04-21T16:25:20.275Z appoptics:patching patched http 
2022-04-21T16:25:20.319Z appoptics:patching patched pino 2.4.2
2022-04-21T16:25:20.323Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:27.863Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:27.864Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:27.864Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:27.865Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:27.924Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:28.039Z appoptics:patching patched crypto 
2022-04-21T16:25:28.057Z appoptics:patching patched https 
2022-04-21T16:25:28.057Z appoptics:patching patched http 
2022-04-21T16:25:28.102Z appoptics:patching patched pino 2.4.3
2022-04-21T16:25:28.106Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:34.227Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:34.228Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:34.228Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:34.229Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:34.307Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:34.426Z appoptics:patching patched crypto 
2022-04-21T16:25:34.443Z appoptics:patching patched https 
2022-04-21T16:25:34.444Z appoptics:patching patched http 
2022-04-21T16:25:34.489Z appoptics:patching patched pino 2.4.4
2022-04-21T16:25:34.493Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:41.564Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:41.564Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:41.564Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:41.565Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:41.617Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:41.718Z appoptics:patching patched crypto 
2022-04-21T16:25:41.733Z appoptics:patching patched https 
2022-04-21T16:25:41.734Z appoptics:patching patched http 
2022-04-21T16:25:41.773Z appoptics:patching patched pino 2.5.0
2022-04-21T16:25:41.776Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:48.174Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:48.175Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:48.175Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:48.175Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:48.236Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:48.354Z appoptics:patching patched crypto 
2022-04-21T16:25:48.372Z appoptics:patching patched https 
2022-04-21T16:25:48.372Z appoptics:patching patched http 
2022-04-21T16:25:48.420Z appoptics:patching patched pino 2.6.0
2022-04-21T16:25:48.424Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:25:55.063Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:25:55.064Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:25:55.064Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:25:55.064Z appoptics:debug using context provider: ace-context
2022-04-21T16:25:55.124Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:25:55.239Z appoptics:patching patched crypto 
2022-04-21T16:25:55.264Z appoptics:patching patched https 
2022-04-21T16:25:55.265Z appoptics:patching patched http 
2022-04-21T16:25:55.304Z appoptics:patching patched pino 2.6.1
2022-04-21T16:25:55.308Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:01.570Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:01.570Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:01.570Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:01.571Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:01.646Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:01.773Z appoptics:patching patched crypto 
2022-04-21T16:26:01.813Z appoptics:patching patched https 
2022-04-21T16:26:01.814Z appoptics:patching patched http 
2022-04-21T16:26:01.856Z appoptics:patching patched pino 2.7.0
2022-04-21T16:26:01.860Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:08.254Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:08.259Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:08.259Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:08.260Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:08.345Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:08.487Z appoptics:patching patched crypto 
2022-04-21T16:26:08.505Z appoptics:patching patched https 
2022-04-21T16:26:08.524Z appoptics:patching patched http 
2022-04-21T16:26:08.567Z appoptics:patching patched pino 2.7.1
2022-04-21T16:26:08.570Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:15.305Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:15.306Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:15.306Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:15.307Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:15.367Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:15.481Z appoptics:patching patched crypto 
2022-04-21T16:26:15.498Z appoptics:patching patched https 
2022-04-21T16:26:15.499Z appoptics:patching patched http 
2022-04-21T16:26:15.574Z appoptics:patching patched pino 2.7.2
2022-04-21T16:26:15.581Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:22.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:22.062Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:22.062Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:22.063Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:22.121Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:22.234Z appoptics:patching patched crypto 
2022-04-21T16:26:22.251Z appoptics:patching patched https 
2022-04-21T16:26:22.252Z appoptics:patching patched http 
2022-04-21T16:26:22.294Z appoptics:patching patched pino 2.7.3
2022-04-21T16:26:22.298Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:29.171Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:29.171Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:29.172Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:29.172Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:29.231Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:29.343Z appoptics:patching patched crypto 
2022-04-21T16:26:29.361Z appoptics:patching patched https 
2022-04-21T16:26:29.362Z appoptics:patching patched http 
2022-04-21T16:26:29.401Z appoptics:patching patched pino 2.7.4
2022-04-21T16:26:29.405Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:35.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:35.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:35.646Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:35.647Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:35.706Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:35.819Z appoptics:patching patched crypto 
2022-04-21T16:26:35.843Z appoptics:patching patched https 
2022-04-21T16:26:35.844Z appoptics:patching patched http 
2022-04-21T16:26:35.907Z appoptics:patching patched pino 2.7.5
2022-04-21T16:26:35.910Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:42.990Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:42.990Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:42.990Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:42.991Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:43.050Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:43.162Z appoptics:patching patched crypto 
2022-04-21T16:26:43.179Z appoptics:patching patched https 
2022-04-21T16:26:43.180Z appoptics:patching patched http 
2022-04-21T16:26:43.222Z appoptics:patching patched pino 2.8.0
2022-04-21T16:26:43.226Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:49.493Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:49.493Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:49.493Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:49.497Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:49.565Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:49.698Z appoptics:patching patched crypto 
2022-04-21T16:26:49.723Z appoptics:patching patched https 
2022-04-21T16:26:49.723Z appoptics:patching patched http 
2022-04-21T16:26:49.790Z appoptics:patching patched pino 2.8.1
2022-04-21T16:26:49.794Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:26:56.577Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:26:56.577Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:26:56.578Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:26:56.578Z appoptics:debug using context provider: ace-context
2022-04-21T16:26:56.638Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:26:56.751Z appoptics:patching patched crypto 
2022-04-21T16:26:56.769Z appoptics:patching patched https 
2022-04-21T16:26:56.769Z appoptics:patching patched http 
2022-04-21T16:26:56.820Z appoptics:patching patched pino 2.8.2
2022-04-21T16:26:56.824Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:03.853Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:03.854Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:03.854Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:03.855Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:03.951Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:04.086Z appoptics:patching patched crypto 
2022-04-21T16:27:04.104Z appoptics:patching patched https 
2022-04-21T16:27:04.105Z appoptics:patching patched http 
2022-04-21T16:27:04.154Z appoptics:patching patched pino 2.8.3
2022-04-21T16:27:04.158Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:10.317Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:10.318Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:10.318Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:10.318Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:10.378Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:10.493Z appoptics:patching patched crypto 
2022-04-21T16:27:10.511Z appoptics:patching patched https 
2022-04-21T16:27:10.512Z appoptics:patching patched http 
2022-04-21T16:27:10.563Z appoptics:patching patched pino 2.9.0
2022-04-21T16:27:10.566Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:17.849Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:17.850Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:17.850Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:17.851Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:17.904Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:18.016Z appoptics:patching patched crypto 
2022-04-21T16:27:18.033Z appoptics:patching patched https 
2022-04-21T16:27:18.034Z appoptics:patching patched http 
2022-04-21T16:27:18.081Z appoptics:patching patched pino 2.10.0
2022-04-21T16:27:18.084Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:24.195Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:24.196Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:24.196Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:24.197Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:24.255Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:24.364Z appoptics:patching patched crypto 
2022-04-21T16:27:24.382Z appoptics:patching patched https 
2022-04-21T16:27:24.383Z appoptics:patching patched http 
2022-04-21T16:27:24.435Z appoptics:patching patched pino 2.10.1
2022-04-21T16:27:24.439Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:31.599Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:31.600Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:31.600Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:31.600Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:31.654Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:31.756Z appoptics:patching patched crypto 
2022-04-21T16:27:31.772Z appoptics:patching patched https 
2022-04-21T16:27:31.772Z appoptics:patching patched http 
2022-04-21T16:27:31.815Z appoptics:patching patched pino 2.11.0
2022-04-21T16:27:31.818Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:37.768Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:37.769Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:37.769Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:37.769Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:37.822Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:37.924Z appoptics:patching patched crypto 
2022-04-21T16:27:37.940Z appoptics:patching patched https 
2022-04-21T16:27:37.940Z appoptics:patching patched http 
2022-04-21T16:27:37.987Z appoptics:patching patched pino 2.12.0
2022-04-21T16:27:37.990Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:44.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:44.457Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:44.457Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:44.458Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:44.517Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:44.632Z appoptics:patching patched crypto 
2022-04-21T16:27:44.649Z appoptics:patching patched https 
2022-04-21T16:27:44.650Z appoptics:patching patched http 
2022-04-21T16:27:44.699Z appoptics:patching patched pino 2.12.1
2022-04-21T16:27:44.703Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:51.666Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:51.667Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:51.667Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:51.668Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:51.750Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:51.882Z appoptics:patching patched crypto 
2022-04-21T16:27:51.899Z appoptics:patching patched https 
2022-04-21T16:27:51.916Z appoptics:patching patched http 
2022-04-21T16:27:51.966Z appoptics:patching patched pino 2.12.2
2022-04-21T16:27:51.970Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:27:58.395Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:27:58.396Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:27:58.396Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:27:58.396Z appoptics:debug using context provider: ace-context
2022-04-21T16:27:58.449Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:27:58.550Z appoptics:patching patched crypto 
2022-04-21T16:27:58.567Z appoptics:patching patched https 
2022-04-21T16:27:58.567Z appoptics:patching patched http 
2022-04-21T16:27:58.611Z appoptics:patching patched pino 2.12.3
2022-04-21T16:27:58.614Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:05.525Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:05.525Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:05.525Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:05.526Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:05.585Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:05.726Z appoptics:patching patched crypto 
2022-04-21T16:28:05.743Z appoptics:patching patched https 
2022-04-21T16:28:05.744Z appoptics:patching patched http 
2022-04-21T16:28:05.821Z appoptics:patching patched pino 2.12.4
2022-04-21T16:28:05.825Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:12.312Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:12.313Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:12.313Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:12.314Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:12.369Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:12.484Z appoptics:patching patched crypto 
2022-04-21T16:28:12.502Z appoptics:patching patched https 
2022-04-21T16:28:12.502Z appoptics:patching patched http 
2022-04-21T16:28:12.553Z appoptics:patching patched pino 2.13.0
2022-04-21T16:28:12.556Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:20.005Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:20.007Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:20.007Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:20.008Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:20.122Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:20.283Z appoptics:patching patched crypto 
2022-04-21T16:28:20.301Z appoptics:patching patched https 
2022-04-21T16:28:20.302Z appoptics:patching patched http 
2022-04-21T16:28:20.353Z appoptics:patching patched pino 2.13.2
2022-04-21T16:28:20.356Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:26.512Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:26.513Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:26.513Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:26.514Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:26.576Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:26.698Z appoptics:patching patched crypto 
2022-04-21T16:28:26.715Z appoptics:patching patched https 
2022-04-21T16:28:26.716Z appoptics:patching patched http 
2022-04-21T16:28:26.783Z appoptics:patching patched pino 2.14.0
2022-04-21T16:28:26.786Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:33.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:33.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:33.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:33.585Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:33.643Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:33.755Z appoptics:patching patched crypto 
2022-04-21T16:28:33.772Z appoptics:patching patched https 
2022-04-21T16:28:33.773Z appoptics:patching patched http 
2022-04-21T16:28:33.820Z appoptics:patching patched pino 2.15.0
2022-04-21T16:28:33.824Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:40.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:40.810Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:40.810Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:40.811Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:40.871Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:40.986Z appoptics:patching patched crypto 
2022-04-21T16:28:41.004Z appoptics:patching patched https 
2022-04-21T16:28:41.005Z appoptics:patching patched http 
2022-04-21T16:28:41.036Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:41.036Z appoptics:patching patched fs 
2022-04-21T16:28:41.064Z appoptics:patching patched pino 2.16.0
2022-04-21T16:28:41.076Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:47.214Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:47.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:47.215Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:47.215Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:47.273Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:47.386Z appoptics:patching patched crypto 
2022-04-21T16:28:47.404Z appoptics:patching patched https 
2022-04-21T16:28:47.404Z appoptics:patching patched http 
2022-04-21T16:28:47.432Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:47.432Z appoptics:patching patched fs 
2022-04-21T16:28:47.445Z appoptics:patching patched pino 3.0.0
2022-04-21T16:28:47.449Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:28:56.859Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:28:56.859Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:28:56.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:28:56.860Z appoptics:debug using context provider: ace-context
2022-04-21T16:28:56.918Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:28:57.031Z appoptics:patching patched crypto 
2022-04-21T16:28:57.049Z appoptics:patching patched https 
2022-04-21T16:28:57.049Z appoptics:patching patched http 
2022-04-21T16:28:57.077Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:28:57.077Z appoptics:patching patched fs 
2022-04-21T16:28:57.091Z appoptics:patching patched pino 3.0.1
2022-04-21T16:28:57.094Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 12s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:09.745Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:09.745Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:09.745Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:09.746Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:09.805Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:09.917Z appoptics:patching patched crypto 
2022-04-21T16:29:09.934Z appoptics:patching patched https 
2022-04-21T16:29:09.934Z appoptics:patching patched http 
2022-04-21T16:29:09.969Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:09.970Z appoptics:patching patched fs 
2022-04-21T16:29:09.985Z appoptics:patching patched pino 3.0.2
2022-04-21T16:29:09.989Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:17.424Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:17.424Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:17.424Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:17.425Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:17.484Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:17.597Z appoptics:patching patched crypto 
2022-04-21T16:29:17.615Z appoptics:patching patched https 
2022-04-21T16:29:17.615Z appoptics:patching patched http 
2022-04-21T16:29:17.642Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:17.642Z appoptics:patching patched fs 
2022-04-21T16:29:17.656Z appoptics:patching patched pino 3.0.3
2022-04-21T16:29:17.659Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (101ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:23.818Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:23.819Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:23.819Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:23.820Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:23.883Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:23.995Z appoptics:patching patched crypto 
2022-04-21T16:29:24.013Z appoptics:patching patched https 
2022-04-21T16:29:24.014Z appoptics:patching patched http 
2022-04-21T16:29:24.043Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:24.044Z appoptics:patching patched fs 
2022-04-21T16:29:24.057Z appoptics:patching patched pino 3.0.4
2022-04-21T16:29:24.060Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:31.089Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:31.089Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:31.089Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:31.090Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:31.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:31.271Z appoptics:patching patched crypto 
2022-04-21T16:29:31.294Z appoptics:patching patched https 
2022-04-21T16:29:31.295Z appoptics:patching patched http 
2022-04-21T16:29:31.316Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:31.317Z appoptics:patching patched fs 
2022-04-21T16:29:31.328Z appoptics:patching patched pino 3.0.5
2022-04-21T16:29:31.332Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:37.259Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:37.259Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:37.260Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:37.260Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:37.312Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:37.411Z appoptics:patching patched crypto 
2022-04-21T16:29:37.427Z appoptics:patching patched https 
2022-04-21T16:29:37.427Z appoptics:patching patched http 
2022-04-21T16:29:37.452Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:37.452Z appoptics:patching patched fs 
2022-04-21T16:29:37.468Z appoptics:patching patched pino 3.0.6
2022-04-21T16:29:37.471Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:43.827Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:43.828Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:43.828Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:43.828Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:43.888Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:44.003Z appoptics:patching patched crypto 
2022-04-21T16:29:44.020Z appoptics:patching patched https 
2022-04-21T16:29:44.021Z appoptics:patching patched http 
2022-04-21T16:29:44.059Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:44.059Z appoptics:patching patched fs 
2022-04-21T16:29:44.072Z appoptics:patching patched pino 3.0.7
2022-04-21T16:29:44.076Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:50.363Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:50.364Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:50.364Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:50.364Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:50.422Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:50.598Z appoptics:patching patched crypto 
2022-04-21T16:29:50.644Z appoptics:patching patched https 
2022-04-21T16:29:50.644Z appoptics:patching patched http 
2022-04-21T16:29:50.672Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:50.673Z appoptics:patching patched fs 
2022-04-21T16:29:50.685Z appoptics:patching patched pino 3.1.0
2022-04-21T16:29:50.688Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:29:57.431Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:29:57.431Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:29:57.431Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:29:57.432Z appoptics:debug using context provider: ace-context
2022-04-21T16:29:57.511Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:29:57.637Z appoptics:patching patched crypto 
2022-04-21T16:29:57.678Z appoptics:patching patched https 
2022-04-21T16:29:57.679Z appoptics:patching patched http 
2022-04-21T16:29:57.709Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:29:57.710Z appoptics:patching patched fs 
2022-04-21T16:29:57.725Z appoptics:patching patched pino 3.1.1
2022-04-21T16:29:57.729Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:04.657Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:04.658Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:04.658Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:04.659Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:04.711Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:04.811Z appoptics:patching patched crypto 
2022-04-21T16:30:04.827Z appoptics:patching patched https 
2022-04-21T16:30:04.828Z appoptics:patching patched http 
2022-04-21T16:30:04.864Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:04.865Z appoptics:patching patched fs 
2022-04-21T16:30:04.878Z appoptics:patching patched pino 3.1.2
2022-04-21T16:30:04.881Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:11.368Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:11.369Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:11.369Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:11.370Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:11.428Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:11.541Z appoptics:patching patched crypto 
2022-04-21T16:30:11.558Z appoptics:patching patched https 
2022-04-21T16:30:11.559Z appoptics:patching patched http 
2022-04-21T16:30:11.586Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:11.586Z appoptics:patching patched fs 
2022-04-21T16:30:11.605Z appoptics:patching patched pino 3.1.3
2022-04-21T16:30:11.608Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:18.414Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:18.414Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:18.414Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:18.415Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:18.473Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:18.587Z appoptics:patching patched crypto 
2022-04-21T16:30:18.604Z appoptics:patching patched https 
2022-04-21T16:30:18.604Z appoptics:patching patched http 
2022-04-21T16:30:18.639Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:18.639Z appoptics:patching patched fs 
2022-04-21T16:30:18.652Z appoptics:patching patched pino 3.2.0
2022-04-21T16:30:18.656Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:24.984Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:24.984Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:24.984Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:24.985Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:25.044Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:25.157Z appoptics:patching patched crypto 
2022-04-21T16:30:25.174Z appoptics:patching patched https 
2022-04-21T16:30:25.175Z appoptics:patching patched http 
2022-04-21T16:30:25.202Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:25.202Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:31.973Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:31.973Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:31.973Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:31.974Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:32.034Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:32.177Z appoptics:patching patched crypto 
2022-04-21T16:30:32.194Z appoptics:patching patched https 
2022-04-21T16:30:32.195Z appoptics:patching patched http 
2022-04-21T16:30:32.221Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:32.222Z appoptics:patching patched fs 
2022-04-21T16:30:32.240Z appoptics:patching patched pino 3.3.1
2022-04-21T16:30:32.244Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:38.145Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:38.146Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:38.146Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:38.147Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:38.207Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:38.341Z appoptics:patching patched crypto 
2022-04-21T16:30:38.375Z appoptics:patching patched https 
2022-04-21T16:30:38.376Z appoptics:patching patched http 
2022-04-21T16:30:38.408Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:38.408Z appoptics:patching patched fs 
2022-04-21T16:30:38.424Z appoptics:patching patched pino 3.3.2
2022-04-21T16:30:38.428Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


added 2 packages, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:45.443Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:45.444Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:45.444Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:45.445Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:45.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:45.617Z appoptics:patching patched crypto 
2022-04-21T16:30:45.634Z appoptics:patching patched https 
2022-04-21T16:30:45.635Z appoptics:patching patched http 
2022-04-21T16:30:45.663Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:45.663Z appoptics:patching patched fs 
2022-04-21T16:30:45.679Z appoptics:patching patched pino 3.4.0
2022-04-21T16:30:45.683Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:52.833Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:52.833Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:52.834Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:52.834Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:52.911Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:53.039Z appoptics:patching patched crypto 
2022-04-21T16:30:53.082Z appoptics:patching patched https 
2022-04-21T16:30:53.082Z appoptics:patching patched http 
2022-04-21T16:30:53.113Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:53.114Z appoptics:patching patched fs 
2022-04-21T16:30:53.130Z appoptics:patching patched pino 4.0.0
2022-04-21T16:30:53.133Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:30:59.140Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:30:59.140Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:30:59.140Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:30:59.141Z appoptics:debug using context provider: ace-context
2022-04-21T16:30:59.203Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:30:59.318Z appoptics:patching patched crypto 
2022-04-21T16:30:59.335Z appoptics:patching patched https 
2022-04-21T16:30:59.336Z appoptics:patching patched http 
2022-04-21T16:30:59.365Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:30:59.365Z appoptics:patching patched fs 
2022-04-21T16:30:59.381Z appoptics:patching patched pino 4.0.1
2022-04-21T16:30:59.384Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:06.664Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:06.664Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:06.664Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:06.665Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:06.724Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:06.836Z appoptics:patching patched crypto 
2022-04-21T16:31:06.853Z appoptics:patching patched https 
2022-04-21T16:31:06.854Z appoptics:patching patched http 
2022-04-21T16:31:06.880Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:06.881Z appoptics:patching patched fs 
2022-04-21T16:31:06.900Z appoptics:patching patched pino 4.0.2
2022-04-21T16:31:06.903Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:13.215Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:13.216Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:13.216Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:13.216Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:13.275Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:13.387Z appoptics:patching patched crypto 
2022-04-21T16:31:13.404Z appoptics:patching patched https 
2022-04-21T16:31:13.405Z appoptics:patching patched http 
2022-04-21T16:31:13.432Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:13.433Z appoptics:patching patched fs 
2022-04-21T16:31:13.453Z appoptics:patching patched pino 4.0.3
2022-04-21T16:31:13.456Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:20.137Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:20.138Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:20.138Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:20.138Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:20.197Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:20.308Z appoptics:patching patched crypto 
2022-04-21T16:31:20.325Z appoptics:patching patched https 
2022-04-21T16:31:20.326Z appoptics:patching patched http 
2022-04-21T16:31:20.355Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:20.355Z appoptics:patching patched fs 
2022-04-21T16:31:20.370Z appoptics:patching patched pino 4.1.0
2022-04-21T16:31:20.374Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:26.644Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:26.645Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:26.645Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:26.646Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:26.704Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:26.816Z appoptics:patching patched crypto 
2022-04-21T16:31:26.834Z appoptics:patching patched https 
2022-04-21T16:31:26.835Z appoptics:patching patched http 
2022-04-21T16:31:26.870Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:26.870Z appoptics:patching patched fs 
2022-04-21T16:31:26.886Z appoptics:patching patched pino 4.1.1
2022-04-21T16:31:26.889Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:33.701Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:33.702Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:33.702Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:33.703Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:33.761Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:33.875Z appoptics:patching patched crypto 
2022-04-21T16:31:33.892Z appoptics:patching patched https 
2022-04-21T16:31:33.892Z appoptics:patching patched http 
2022-04-21T16:31:33.930Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:33.931Z appoptics:patching patched fs 
2022-04-21T16:31:33.946Z appoptics:patching patched pino 4.1.2
2022-04-21T16:31:33.950Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:40.563Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:40.564Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:40.564Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:40.565Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:40.634Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:40.782Z appoptics:patching patched crypto 
2022-04-21T16:31:40.802Z appoptics:patching patched https 
2022-04-21T16:31:40.803Z appoptics:patching patched http 
2022-04-21T16:31:40.864Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:40.864Z appoptics:patching patched fs 
2022-04-21T16:31:40.884Z appoptics:patching patched pino 4.2.0
2022-04-21T16:31:40.888Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:46.944Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:46.945Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:46.945Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:46.946Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:47.011Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:47.133Z appoptics:patching patched crypto 
2022-04-21T16:31:47.151Z appoptics:patching patched https 
2022-04-21T16:31:47.169Z appoptics:patching patched http 
2022-04-21T16:31:47.201Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:47.201Z appoptics:patching patched fs 
2022-04-21T16:31:47.218Z appoptics:patching patched pino 4.2.1
2022-04-21T16:31:47.222Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:31:53.916Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:31:53.917Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:31:53.917Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:31:53.918Z appoptics:debug using context provider: ace-context
2022-04-21T16:31:53.976Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:31:54.088Z appoptics:patching patched crypto 
2022-04-21T16:31:54.105Z appoptics:patching patched https 
2022-04-21T16:31:54.106Z appoptics:patching patched http 
2022-04-21T16:31:54.157Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:31:54.158Z appoptics:patching patched fs 
2022-04-21T16:31:54.176Z appoptics:patching patched pino 4.2.2
2022-04-21T16:31:54.180Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:00.520Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:00.521Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:00.521Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:00.521Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:00.574Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:00.678Z appoptics:patching patched crypto 
2022-04-21T16:32:00.693Z appoptics:patching patched https 
2022-04-21T16:32:00.694Z appoptics:patching patched http 
2022-04-21T16:32:00.719Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:00.719Z appoptics:patching patched fs 
2022-04-21T16:32:00.734Z appoptics:patching patched pino 4.2.3
2022-04-21T16:32:00.737Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:07.271Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:07.272Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:07.272Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:07.272Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:07.330Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:07.443Z appoptics:patching patched crypto 
2022-04-21T16:32:07.460Z appoptics:patching patched https 
2022-04-21T16:32:07.461Z appoptics:patching patched http 
2022-04-21T16:32:07.498Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:07.499Z appoptics:patching patched fs 
2022-04-21T16:32:07.514Z appoptics:patching patched pino 4.2.4
2022-04-21T16:32:07.518Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:13.742Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:13.743Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:13.743Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:13.743Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:13.822Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:13.939Z appoptics:patching patched crypto 
2022-04-21T16:32:13.957Z appoptics:patching patched https 
2022-04-21T16:32:13.958Z appoptics:patching patched http 
2022-04-21T16:32:13.988Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:13.988Z appoptics:patching patched fs 
2022-04-21T16:32:14.004Z appoptics:patching patched pino 4.3.0
2022-04-21T16:32:14.007Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:20.783Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:20.784Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:20.784Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:20.784Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:20.843Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:20.957Z appoptics:patching patched crypto 
2022-04-21T16:32:20.975Z appoptics:patching patched https 
2022-04-21T16:32:20.975Z appoptics:patching patched http 
2022-04-21T16:32:21.015Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:21.015Z appoptics:patching patched fs 
2022-04-21T16:32:21.031Z appoptics:patching patched pino 4.4.0
2022-04-21T16:32:21.035Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:27.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:27.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:27.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:27.178Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:27.236Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:27.348Z appoptics:patching patched crypto 
2022-04-21T16:32:27.369Z appoptics:patching patched https 
2022-04-21T16:32:27.369Z appoptics:patching patched http 
2022-04-21T16:32:27.414Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:27.414Z appoptics:patching patched fs 
2022-04-21T16:32:27.430Z appoptics:patching patched pino 4.5.0
2022-04-21T16:32:27.434Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:34.513Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:34.513Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:34.513Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:34.514Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:34.572Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:34.682Z appoptics:patching patched crypto 
2022-04-21T16:32:34.699Z appoptics:patching patched https 
2022-04-21T16:32:34.700Z appoptics:patching patched http 
2022-04-21T16:32:34.726Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:34.726Z appoptics:patching patched fs 
2022-04-21T16:32:34.745Z appoptics:patching patched pino 4.5.1
2022-04-21T16:32:34.748Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:41.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:41.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:41.150Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:41.151Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:41.278Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:41.486Z appoptics:patching patched crypto 
2022-04-21T16:32:41.528Z appoptics:patching patched https 
2022-04-21T16:32:41.528Z appoptics:patching patched http 
2022-04-21T16:32:41.556Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:41.556Z appoptics:patching patched fs 
2022-04-21T16:32:41.572Z appoptics:patching patched pino 4.5.2
2022-04-21T16:32:41.577Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:47.660Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:47.661Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:47.661Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:47.662Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:47.720Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:47.833Z appoptics:patching patched crypto 
2022-04-21T16:32:47.851Z appoptics:patching patched https 
2022-04-21T16:32:47.851Z appoptics:patching patched http 
2022-04-21T16:32:47.880Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:47.884Z appoptics:patching patched fs 
2022-04-21T16:32:47.900Z appoptics:patching patched pino 4.5.3
2022-04-21T16:32:47.903Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:32:55.191Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:32:55.191Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:32:55.191Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:32:55.192Z appoptics:debug using context provider: ace-context
2022-04-21T16:32:55.246Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:32:55.348Z appoptics:patching patched crypto 
2022-04-21T16:32:55.364Z appoptics:patching patched https 
2022-04-21T16:32:55.365Z appoptics:patching patched http 
2022-04-21T16:32:55.392Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:32:55.393Z appoptics:patching patched fs 
2022-04-21T16:32:55.410Z appoptics:patching patched pino 4.5.4
2022-04-21T16:32:55.413Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:01.542Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:01.543Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:01.543Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:01.543Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:01.603Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:01.718Z appoptics:patching patched crypto 
2022-04-21T16:33:01.735Z appoptics:patching patched https 
2022-04-21T16:33:01.736Z appoptics:patching patched http 
2022-04-21T16:33:01.764Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:01.764Z appoptics:patching patched fs 
2022-04-21T16:33:01.780Z appoptics:patching patched pino 4.6.0
2022-04-21T16:33:01.783Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:08.559Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:08.559Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:08.559Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:08.560Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:08.626Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:08.750Z appoptics:patching patched crypto 
2022-04-21T16:33:08.767Z appoptics:patching patched https 
2022-04-21T16:33:08.768Z appoptics:patching patched http 
2022-04-21T16:33:08.789Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:08.790Z appoptics:patching patched fs 
2022-04-21T16:33:08.817Z appoptics:patching patched pino 4.7.0
2022-04-21T16:33:08.821Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:15.420Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:15.421Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:15.421Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:15.422Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:15.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:15.614Z appoptics:patching patched crypto 
2022-04-21T16:33:15.633Z appoptics:patching patched https 
2022-04-21T16:33:15.633Z appoptics:patching patched http 
2022-04-21T16:33:15.664Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:15.664Z appoptics:patching patched fs 
2022-04-21T16:33:15.685Z appoptics:patching patched pino 4.7.1
2022-04-21T16:33:15.688Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:22.260Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:22.261Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:22.261Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:22.262Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:22.322Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:22.440Z appoptics:patching patched crypto 
2022-04-21T16:33:22.458Z appoptics:patching patched https 
2022-04-21T16:33:22.459Z appoptics:patching patched http 
2022-04-21T16:33:22.486Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:22.490Z appoptics:patching patched fs 
2022-04-21T16:33:22.510Z appoptics:patching patched pino 4.7.2
2022-04-21T16:33:22.514Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:29.429Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:29.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:29.430Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:29.431Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:29.516Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:29.679Z appoptics:patching patched crypto 
2022-04-21T16:33:29.762Z appoptics:patching patched https 
2022-04-21T16:33:29.763Z appoptics:patching patched http 
2022-04-21T16:33:29.851Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:29.852Z appoptics:patching patched fs 
2022-04-21T16:33:29.904Z appoptics:patching patched pino 4.7.3
2022-04-21T16:33:29.910Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (195ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:36.237Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:36.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:36.238Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:36.238Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:36.298Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:36.413Z appoptics:patching patched crypto 
2022-04-21T16:33:36.435Z appoptics:patching patched https 
2022-04-21T16:33:36.436Z appoptics:patching patched http 
2022-04-21T16:33:36.486Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:36.486Z appoptics:patching patched fs 
2022-04-21T16:33:36.507Z appoptics:patching patched pino 4.8.0
2022-04-21T16:33:36.510Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:43.682Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:43.682Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:43.682Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:43.683Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:43.740Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:43.842Z appoptics:patching patched crypto 
2022-04-21T16:33:43.858Z appoptics:patching patched https 
2022-04-21T16:33:43.858Z appoptics:patching patched http 
2022-04-21T16:33:43.885Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:43.886Z appoptics:patching patched fs 
2022-04-21T16:33:43.910Z appoptics:patching patched pino 4.8.1
2022-04-21T16:33:43.914Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:33:50.304Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:33:50.305Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:33:50.305Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:33:50.305Z appoptics:debug using context provider: ace-context
2022-04-21T16:33:50.367Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:33:50.480Z appoptics:patching patched crypto 
2022-04-21T16:33:50.498Z appoptics:patching patched https 
2022-04-21T16:33:50.498Z appoptics:patching patched http 
2022-04-21T16:33:50.525Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:33:50.525Z appoptics:patching patched fs 
2022-04-21T16:33:50.549Z appoptics:patching patched pino 4.8.2
2022-04-21T16:33:50.553Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:01.329Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:01.330Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:01.330Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:01.330Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:01.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:01.507Z appoptics:patching patched crypto 
2022-04-21T16:34:01.532Z appoptics:patching patched https 
2022-04-21T16:34:01.532Z appoptics:patching patched http 
2022-04-21T16:34:01.558Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:01.559Z appoptics:patching patched fs 
2022-04-21T16:34:01.579Z appoptics:patching patched pino 4.9.0
2022-04-21T16:34:01.582Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 938 packages in 17s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:19.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:19.809Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:19.809Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:19.810Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:19.877Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:20.002Z appoptics:patching patched crypto 
2022-04-21T16:34:20.045Z appoptics:patching patched https 
2022-04-21T16:34:20.046Z appoptics:patching patched http 
2022-04-21T16:34:20.079Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:20.079Z appoptics:patching patched fs 
2022-04-21T16:34:20.101Z appoptics:patching patched pino 4.10.0
2022-04-21T16:34:20.105Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:26.436Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:26.437Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:26.437Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:26.437Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:26.497Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:26.613Z appoptics:patching patched crypto 
2022-04-21T16:34:26.632Z appoptics:patching patched https 
2022-04-21T16:34:26.633Z appoptics:patching patched http 
2022-04-21T16:34:26.680Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:26.681Z appoptics:patching patched fs 
2022-04-21T16:34:26.709Z appoptics:patching patched pino 4.10.1
2022-04-21T16:34:26.712Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:33.314Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:33.315Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:33.315Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:33.315Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:33.369Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:33.476Z appoptics:patching patched crypto 
2022-04-21T16:34:33.491Z appoptics:patching patched https 
2022-04-21T16:34:33.499Z appoptics:patching patched http 
2022-04-21T16:34:33.526Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:33.526Z appoptics:patching patched fs 
2022-04-21T16:34:33.545Z appoptics:patching patched pino 4.10.2
2022-04-21T16:34:33.548Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 2 packages, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:39.775Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:39.786Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:39.786Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:39.788Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:39.878Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:40.006Z appoptics:patching patched crypto 
2022-04-21T16:34:40.047Z appoptics:patching patched https 
2022-04-21T16:34:40.048Z appoptics:patching patched http 
2022-04-21T16:34:40.080Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:40.080Z appoptics:patching patched fs 
2022-04-21T16:34:40.105Z appoptics:patching patched pino 4.10.3
2022-04-21T16:34:40.110Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:46.507Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:46.508Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:46.508Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:46.509Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:46.568Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:46.682Z appoptics:patching patched crypto 
2022-04-21T16:34:46.699Z appoptics:patching patched https 
2022-04-21T16:34:46.700Z appoptics:patching patched http 
2022-04-21T16:34:46.727Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:46.728Z appoptics:patching patched fs 
2022-04-21T16:34:46.753Z appoptics:patching patched pino 4.10.4
2022-04-21T16:34:46.756Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:34:53.759Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:34:53.760Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:34:53.760Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:34:53.761Z appoptics:debug using context provider: ace-context
2022-04-21T16:34:53.819Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:34:53.929Z appoptics:patching patched crypto 
2022-04-21T16:34:53.947Z appoptics:patching patched https 
2022-04-21T16:34:53.947Z appoptics:patching patched http 
2022-04-21T16:34:53.974Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:34:53.974Z appoptics:patching patched fs 
2022-04-21T16:34:53.998Z appoptics:patching patched pino 4.11.0
2022-04-21T16:34:54.001Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


added 1 package, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:00.565Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:00.566Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:00.566Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:00.566Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:00.625Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:00.739Z appoptics:patching patched crypto 
2022-04-21T16:35:00.756Z appoptics:patching patched https 
2022-04-21T16:35:00.757Z appoptics:patching patched http 
2022-04-21T16:35:00.789Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:00.790Z appoptics:patching patched fs 
2022-04-21T16:35:00.810Z appoptics:patching patched pino 4.12.0
2022-04-21T16:35:00.813Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:08.031Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:08.032Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:08.032Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:08.033Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:08.085Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:08.185Z appoptics:patching patched crypto 
2022-04-21T16:35:08.200Z appoptics:patching patched https 
2022-04-21T16:35:08.200Z appoptics:patching patched http 
2022-04-21T16:35:08.233Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:08.233Z appoptics:patching patched fs 
2022-04-21T16:35:08.251Z appoptics:patching patched pino 4.13.0
2022-04-21T16:35:08.254Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (101ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 2 packages, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:13.927Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:13.928Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:13.928Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:13.929Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:13.982Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:14.082Z appoptics:patching patched crypto 
2022-04-21T16:35:14.098Z appoptics:patching patched https 
2022-04-21T16:35:14.098Z appoptics:patching patched http 
2022-04-21T16:35:14.124Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:14.124Z appoptics:patching patched fs 
2022-04-21T16:35:14.146Z appoptics:patching patched pino 4.14.0
2022-04-21T16:35:14.149Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:20.831Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:20.832Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:20.832Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:20.833Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:20.891Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:21.004Z appoptics:patching patched crypto 
2022-04-21T16:35:21.021Z appoptics:patching patched https 
2022-04-21T16:35:21.021Z appoptics:patching patched http 
2022-04-21T16:35:21.050Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:21.051Z appoptics:patching patched fs 
2022-04-21T16:35:21.074Z appoptics:patching patched pino 4.15.0
2022-04-21T16:35:21.078Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (108ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:27.517Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:27.518Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:27.518Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:27.519Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:27.594Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:27.730Z appoptics:patching patched crypto 
2022-04-21T16:35:27.770Z appoptics:patching patched https 
2022-04-21T16:35:27.771Z appoptics:patching patched http 
2022-04-21T16:35:27.803Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:27.803Z appoptics:patching patched fs 
2022-04-21T16:35:27.824Z appoptics:patching patched pino 4.15.1
2022-04-21T16:35:27.827Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:34.240Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:34.240Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:34.240Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:34.241Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:34.300Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:34.412Z appoptics:patching patched crypto 
2022-04-21T16:35:34.429Z appoptics:patching patched https 
2022-04-21T16:35:34.430Z appoptics:patching patched http 
2022-04-21T16:35:34.462Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:34.462Z appoptics:patching patched fs 
2022-04-21T16:35:34.483Z appoptics:patching patched pino 4.15.2
2022-04-21T16:35:34.486Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 2 packages, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:41.571Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:41.572Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:41.572Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:41.573Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:41.632Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:41.745Z appoptics:patching patched crypto 
2022-04-21T16:35:41.763Z appoptics:patching patched https 
2022-04-21T16:35:41.764Z appoptics:patching patched http 
2022-04-21T16:35:41.797Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:41.797Z appoptics:patching patched fs 
2022-04-21T16:35:41.818Z appoptics:patching patched pino 4.15.3
2022-04-21T16:35:41.821Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:48.320Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:48.321Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:48.321Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:48.321Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:48.383Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:48.495Z appoptics:patching patched crypto 
2022-04-21T16:35:48.512Z appoptics:patching patched https 
2022-04-21T16:35:48.513Z appoptics:patching patched http 
2022-04-21T16:35:48.544Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:48.544Z appoptics:patching patched fs 
2022-04-21T16:35:48.564Z appoptics:patching patched pino 4.15.4
2022-04-21T16:35:48.567Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:35:55.666Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:35:55.666Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:35:55.666Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:35:55.667Z appoptics:debug using context provider: ace-context
2022-04-21T16:35:55.726Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:35:55.840Z appoptics:patching patched crypto 
2022-04-21T16:35:55.858Z appoptics:patching patched https 
2022-04-21T16:35:55.859Z appoptics:patching patched http 
2022-04-21T16:35:55.890Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:35:55.891Z appoptics:patching patched fs 
2022-04-21T16:35:55.911Z appoptics:patching patched pino 4.16.0
2022-04-21T16:35:55.914Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:02.353Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:02.353Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:02.353Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:02.354Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:02.413Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:02.527Z appoptics:patching patched crypto 
2022-04-21T16:36:02.544Z appoptics:patching patched https 
2022-04-21T16:36:02.544Z appoptics:patching patched http 
2022-04-21T16:36:02.578Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:02.578Z appoptics:patching patched fs 
2022-04-21T16:36:02.598Z appoptics:patching patched pino 4.16.1
2022-04-21T16:36:02.602Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:09.201Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:09.202Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:09.202Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:09.203Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:09.273Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:09.388Z appoptics:patching patched crypto 
2022-04-21T16:36:09.427Z appoptics:patching patched https 
2022-04-21T16:36:09.428Z appoptics:patching patched http 
2022-04-21T16:36:09.457Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:09.457Z appoptics:patching patched fs 
2022-04-21T16:36:09.476Z appoptics:patching patched pino 4.17.0
2022-04-21T16:36:09.479Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:15.790Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:15.791Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:15.791Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:15.791Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:15.858Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:15.969Z appoptics:patching patched crypto 
2022-04-21T16:36:16.020Z appoptics:patching patched https 
2022-04-21T16:36:16.021Z appoptics:patching patched http 
2022-04-21T16:36:16.051Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:16.051Z appoptics:patching patched fs 
2022-04-21T16:36:16.070Z appoptics:patching patched pino 4.17.1
2022-04-21T16:36:16.073Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:22.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:22.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:22.248Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:22.249Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:22.302Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:22.404Z appoptics:patching patched crypto 
2022-04-21T16:36:22.420Z appoptics:patching patched https 
2022-04-21T16:36:22.421Z appoptics:patching patched http 
2022-04-21T16:36:22.447Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:22.447Z appoptics:patching patched fs 
2022-04-21T16:36:22.465Z appoptics:patching patched pino 4.17.2
2022-04-21T16:36:22.468Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:28.801Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:28.802Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:28.802Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:28.802Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:28.875Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:29.017Z appoptics:patching patched crypto 
2022-04-21T16:36:29.063Z appoptics:patching patched https 
2022-04-21T16:36:29.063Z appoptics:patching patched http 
2022-04-21T16:36:29.101Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:29.101Z appoptics:patching patched fs 
2022-04-21T16:36:29.124Z appoptics:patching patched pino 4.17.3
2022-04-21T16:36:29.128Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:35.493Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:35.494Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:35.494Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:35.494Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:35.554Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:35.667Z appoptics:patching patched crypto 
2022-04-21T16:36:35.684Z appoptics:patching patched https 
2022-04-21T16:36:35.685Z appoptics:patching patched http 
2022-04-21T16:36:35.712Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:35.713Z appoptics:patching patched fs 
2022-04-21T16:36:35.733Z appoptics:patching patched pino 4.17.5
2022-04-21T16:36:35.736Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:42.724Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:42.724Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:42.724Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:42.725Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:42.783Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:42.895Z appoptics:patching patched crypto 
2022-04-21T16:36:42.912Z appoptics:patching patched https 
2022-04-21T16:36:42.912Z appoptics:patching patched http 
2022-04-21T16:36:42.950Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:42.951Z appoptics:patching patched fs 
2022-04-21T16:36:42.970Z appoptics:patching patched pino 4.17.6
2022-04-21T16:36:42.974Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:49.141Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:49.142Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:49.142Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:49.142Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:49.201Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:49.315Z appoptics:patching patched crypto 
2022-04-21T16:36:49.334Z appoptics:patching patched https 
2022-04-21T16:36:49.335Z appoptics:patching patched http 
2022-04-21T16:36:49.374Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:49.374Z appoptics:patching patched fs 
2022-04-21T16:36:49.382Z appoptics:patching patched pino 5.0.0
2022-04-21T16:36:49.385Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 2 packages, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:36:56.754Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:36:56.754Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:36:56.755Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:36:56.755Z appoptics:debug using context provider: ace-context
2022-04-21T16:36:56.820Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:36:56.964Z appoptics:patching patched crypto 
2022-04-21T16:36:56.981Z appoptics:patching patched https 
2022-04-21T16:36:56.981Z appoptics:patching patched http 
2022-04-21T16:36:57.016Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:36:57.016Z appoptics:patching patched fs 
2022-04-21T16:36:57.024Z appoptics:patching patched pino 5.0.1
2022-04-21T16:36:57.027Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:03.140Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:03.141Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:03.141Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:03.142Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:03.203Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:03.329Z appoptics:patching patched crypto 
2022-04-21T16:37:03.350Z appoptics:patching patched https 
2022-04-21T16:37:03.376Z appoptics:patching patched http 
2022-04-21T16:37:03.410Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:03.410Z appoptics:patching patched fs 
2022-04-21T16:37:03.419Z appoptics:patching patched pino 5.0.2
2022-04-21T16:37:03.422Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:10.338Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:10.339Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:10.339Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:10.339Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:10.398Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:10.510Z appoptics:patching patched crypto 
2022-04-21T16:37:10.528Z appoptics:patching patched https 
2022-04-21T16:37:10.528Z appoptics:patching patched http 
2022-04-21T16:37:10.556Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:10.556Z appoptics:patching patched fs 
2022-04-21T16:37:10.564Z appoptics:patching patched pino 5.0.3
2022-04-21T16:37:10.567Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:17.295Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:17.296Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:17.296Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:17.297Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:17.370Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:17.489Z appoptics:patching patched crypto 
2022-04-21T16:37:17.533Z appoptics:patching patched https 
2022-04-21T16:37:17.534Z appoptics:patching patched http 
2022-04-21T16:37:17.568Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:17.568Z appoptics:patching patched fs 
2022-04-21T16:37:17.578Z appoptics:patching patched pino 5.0.4
2022-04-21T16:37:17.582Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:23.514Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:23.515Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:23.515Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:23.516Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:23.569Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:23.668Z appoptics:patching patched crypto 
2022-04-21T16:37:23.684Z appoptics:patching patched https 
2022-04-21T16:37:23.685Z appoptics:patching patched http 
2022-04-21T16:37:23.711Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:23.714Z appoptics:patching patched fs 
2022-04-21T16:37:23.722Z appoptics:patching patched pino 5.0.5
2022-04-21T16:37:23.725Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:30.718Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:30.719Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:30.719Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:30.719Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:30.779Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:30.896Z appoptics:patching patched crypto 
2022-04-21T16:37:30.914Z appoptics:patching patched https 
2022-04-21T16:37:30.915Z appoptics:patching patched http 
2022-04-21T16:37:30.943Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:30.943Z appoptics:patching patched fs 
2022-04-21T16:37:30.955Z appoptics:patching patched pino 5.1.0
2022-04-21T16:37:30.959Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:37.395Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:37.396Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:37.396Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:37.397Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:37.476Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:37.597Z appoptics:patching patched crypto 
2022-04-21T16:37:37.615Z appoptics:patching patched https 
2022-04-21T16:37:37.616Z appoptics:patching patched http 
2022-04-21T16:37:37.648Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:37.648Z appoptics:patching patched fs 
2022-04-21T16:37:37.656Z appoptics:patching patched pino 5.1.1
2022-04-21T16:37:37.660Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:46.811Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:46.812Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:46.812Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:46.812Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:46.950Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:47.080Z appoptics:patching patched crypto 
2022-04-21T16:37:47.121Z appoptics:patching patched https 
2022-04-21T16:37:47.122Z appoptics:patching patched http 
2022-04-21T16:37:47.155Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:47.155Z appoptics:patching patched fs 
2022-04-21T16:37:47.163Z appoptics:patching patched pino 5.2.0
2022-04-21T16:37:47.167Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:37:54.805Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:37:54.806Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:37:54.806Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:37:54.807Z appoptics:debug using context provider: ace-context
2022-04-21T16:37:54.881Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:37:55.105Z appoptics:patching patched crypto 
2022-04-21T16:37:55.142Z appoptics:patching patched https 
2022-04-21T16:37:55.143Z appoptics:patching patched http 
2022-04-21T16:37:55.201Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:37:55.201Z appoptics:patching patched fs 
2022-04-21T16:37:55.209Z appoptics:patching patched pino 5.3.0
2022-04-21T16:37:55.214Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:02.162Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:02.162Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:02.162Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:02.163Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:02.217Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:02.319Z appoptics:patching patched crypto 
2022-04-21T16:38:02.334Z appoptics:patching patched https 
2022-04-21T16:38:02.335Z appoptics:patching patched http 
2022-04-21T16:38:02.360Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:02.360Z appoptics:patching patched fs 
2022-04-21T16:38:02.371Z appoptics:patching patched pino 5.3.1
2022-04-21T16:38:02.374Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:09.072Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:09.073Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:09.073Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:09.073Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:09.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:09.274Z appoptics:patching patched crypto 
2022-04-21T16:38:09.314Z appoptics:patching patched https 
2022-04-21T16:38:09.315Z appoptics:patching patched http 
2022-04-21T16:38:09.346Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:09.347Z appoptics:patching patched fs 
2022-04-21T16:38:09.355Z appoptics:patching patched pino 5.4.0
2022-04-21T16:38:09.358Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:15.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:15.178Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:15.178Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:15.179Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:15.244Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:15.397Z appoptics:patching patched crypto 
2022-04-21T16:38:15.415Z appoptics:patching patched https 
2022-04-21T16:38:15.416Z appoptics:patching patched http 
2022-04-21T16:38:15.469Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:15.469Z appoptics:patching patched fs 
2022-04-21T16:38:15.477Z appoptics:patching patched pino 5.4.1
2022-04-21T16:38:15.481Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:22.655Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:22.656Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:22.656Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:22.657Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:22.715Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:22.831Z appoptics:patching patched crypto 
2022-04-21T16:38:22.849Z appoptics:patching patched https 
2022-04-21T16:38:22.850Z appoptics:patching patched http 
2022-04-21T16:38:22.878Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:22.878Z appoptics:patching patched fs 
2022-04-21T16:38:22.886Z appoptics:patching patched pino 5.5.0
2022-04-21T16:38:22.890Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:28.898Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:28.899Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:28.899Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:28.900Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:28.959Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:29.075Z appoptics:patching patched crypto 
2022-04-21T16:38:29.092Z appoptics:patching patched https 
2022-04-21T16:38:29.093Z appoptics:patching patched http 
2022-04-21T16:38:29.122Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:29.122Z appoptics:patching patched fs 
2022-04-21T16:38:29.130Z appoptics:patching patched pino 5.6.0
2022-04-21T16:38:29.133Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:36.350Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:36.350Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:36.350Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:36.351Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:36.409Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:36.523Z appoptics:patching patched crypto 
2022-04-21T16:38:36.541Z appoptics:patching patched https 
2022-04-21T16:38:36.541Z appoptics:patching patched http 
2022-04-21T16:38:36.569Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:36.569Z appoptics:patching patched fs 
2022-04-21T16:38:36.577Z appoptics:patching patched pino 5.6.1
2022-04-21T16:38:36.580Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:42.771Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:42.772Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:42.772Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:42.773Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:42.849Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:42.976Z appoptics:patching patched crypto 
2022-04-21T16:38:43.019Z appoptics:patching patched https 
2022-04-21T16:38:43.019Z appoptics:patching patched http 
2022-04-21T16:38:43.057Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:43.058Z appoptics:patching patched fs 
2022-04-21T16:38:43.066Z appoptics:patching patched pino 5.6.2
2022-04-21T16:38:43.070Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:49.877Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:49.877Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:49.878Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:49.878Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:49.937Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:50.049Z appoptics:patching patched crypto 
2022-04-21T16:38:50.066Z appoptics:patching patched https 
2022-04-21T16:38:50.067Z appoptics:patching patched http 
2022-04-21T16:38:50.107Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:50.108Z appoptics:patching patched fs 
2022-04-21T16:38:50.120Z appoptics:patching patched pino 5.6.3
2022-04-21T16:38:50.124Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:38:56.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:38:56.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:38:56.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:38:56.657Z appoptics:debug using context provider: ace-context
2022-04-21T16:38:56.723Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:38:56.844Z appoptics:patching patched crypto 
2022-04-21T16:38:56.875Z appoptics:patching patched https 
2022-04-21T16:38:56.876Z appoptics:patching patched http 
2022-04-21T16:38:56.925Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:38:56.925Z appoptics:patching patched fs 
2022-04-21T16:38:56.933Z appoptics:patching patched pino 5.6.4
2022-04-21T16:38:56.936Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 929 packages in 11s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:08.780Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:08.781Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:08.781Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:08.781Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:08.859Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:09.019Z appoptics:patching patched crypto 
2022-04-21T16:39:09.048Z appoptics:patching patched https 
2022-04-21T16:39:09.048Z appoptics:patching patched http 
2022-04-21T16:39:09.094Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:09.094Z appoptics:patching patched fs 
2022-04-21T16:39:09.141Z appoptics:patching patched pino 5.7.0
2022-04-21T16:39:09.155Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 14s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:23.840Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:23.840Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:23.840Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:23.841Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:23.901Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:24.039Z appoptics:patching patched crypto 
2022-04-21T16:39:24.056Z appoptics:patching patched https 
2022-04-21T16:39:24.057Z appoptics:patching patched http 
2022-04-21T16:39:24.106Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:24.112Z appoptics:patching patched fs 
2022-04-21T16:39:24.123Z appoptics:patching patched pino 5.8.0
2022-04-21T16:39:24.127Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:30.609Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:30.609Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:30.609Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:30.610Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:30.670Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:30.794Z appoptics:patching patched crypto 
2022-04-21T16:39:30.838Z appoptics:patching patched https 
2022-04-21T16:39:30.839Z appoptics:patching patched http 
2022-04-21T16:39:30.876Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:30.876Z appoptics:patching patched fs 
2022-04-21T16:39:30.881Z appoptics:patching patched pino 5.8.1
2022-04-21T16:39:30.885Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:37.701Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:37.702Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:37.702Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:37.702Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:37.762Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:37.877Z appoptics:patching patched crypto 
2022-04-21T16:39:37.895Z appoptics:patching patched https 
2022-04-21T16:39:37.896Z appoptics:patching patched http 
2022-04-21T16:39:37.933Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:37.933Z appoptics:patching patched fs 
2022-04-21T16:39:37.938Z appoptics:patching patched pino 5.9.0
2022-04-21T16:39:37.942Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


added 1 package, changed 2 packages, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:44.525Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:44.525Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:44.525Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:44.526Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:44.601Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:44.729Z appoptics:patching patched crypto 
2022-04-21T16:39:44.763Z appoptics:patching patched https 
2022-04-21T16:39:44.764Z appoptics:patching patched http 
2022-04-21T16:39:44.819Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:44.819Z appoptics:patching patched fs 
2022-04-21T16:39:44.824Z appoptics:patching patched pino 5.10.1
2022-04-21T16:39:44.830Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (201ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:51.339Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:51.340Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:51.340Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:51.341Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:51.399Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:51.514Z appoptics:patching patched crypto 
2022-04-21T16:39:51.531Z appoptics:patching patched https 
2022-04-21T16:39:51.532Z appoptics:patching patched http 
2022-04-21T16:39:51.567Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:51.568Z appoptics:patching patched fs 
2022-04-21T16:39:51.573Z appoptics:patching patched pino 5.10.2
2022-04-21T16:39:51.576Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:39:58.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:39:58.217Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:39:58.217Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:39:58.218Z appoptics:debug using context provider: ace-context
2022-04-21T16:39:58.288Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:39:58.405Z appoptics:patching patched crypto 
2022-04-21T16:39:58.444Z appoptics:patching patched https 
2022-04-21T16:39:58.445Z appoptics:patching patched http 
2022-04-21T16:39:58.477Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:39:58.478Z appoptics:patching patched fs 
2022-04-21T16:39:58.482Z appoptics:patching patched pino 5.10.3
2022-04-21T16:39:58.486Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 930 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:04.532Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:04.533Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:04.533Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:04.537Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:04.602Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:04.716Z appoptics:patching patched crypto 
2022-04-21T16:40:04.734Z appoptics:patching patched https 
2022-04-21T16:40:04.734Z appoptics:patching patched http 
2022-04-21T16:40:04.769Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:04.770Z appoptics:patching patched fs 
2022-04-21T16:40:04.775Z appoptics:patching patched pino 5.10.4
2022-04-21T16:40:04.778Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


removed 3 packages, changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:12.132Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:12.133Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:12.133Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:12.134Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:12.193Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:12.306Z appoptics:patching patched crypto 
2022-04-21T16:40:12.324Z appoptics:patching patched https 
2022-04-21T16:40:12.325Z appoptics:patching patched http 
2022-04-21T16:40:12.357Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:12.357Z appoptics:patching patched fs 
2022-04-21T16:40:12.362Z appoptics:patching patched pino 5.10.5
2022-04-21T16:40:12.366Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (101ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:18.667Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:18.667Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:18.667Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:18.668Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:18.727Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:18.839Z appoptics:patching patched crypto 
2022-04-21T16:40:18.856Z appoptics:patching patched https 
2022-04-21T16:40:18.857Z appoptics:patching patched http 
2022-04-21T16:40:18.892Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:18.892Z appoptics:patching patched fs 
2022-04-21T16:40:18.913Z appoptics:patching patched pino 5.10.6
2022-04-21T16:40:18.919Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:26.088Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:26.088Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:26.088Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:26.089Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:26.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:26.266Z appoptics:patching patched crypto 
2022-04-21T16:40:26.283Z appoptics:patching patched https 
2022-04-21T16:40:26.284Z appoptics:patching patched http 
2022-04-21T16:40:26.320Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:26.320Z appoptics:patching patched fs 
2022-04-21T16:40:26.326Z appoptics:patching patched pino 5.10.7
2022-04-21T16:40:26.329Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:32.803Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:32.804Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:32.804Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:32.805Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:32.882Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:33.018Z appoptics:patching patched crypto 
2022-04-21T16:40:33.061Z appoptics:patching patched https 
2022-04-21T16:40:33.062Z appoptics:patching patched http 
2022-04-21T16:40:33.101Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:33.102Z appoptics:patching patched fs 
2022-04-21T16:40:33.107Z appoptics:patching patched pino 5.10.8
2022-04-21T16:40:33.111Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:39.581Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:39.582Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:39.582Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:39.583Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:39.641Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:39.754Z appoptics:patching patched crypto 
2022-04-21T16:40:39.771Z appoptics:patching patched https 
2022-04-21T16:40:39.772Z appoptics:patching patched http 
2022-04-21T16:40:39.808Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:39.808Z appoptics:patching patched fs 
2022-04-21T16:40:39.813Z appoptics:patching patched pino 5.10.9
2022-04-21T16:40:39.816Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:46.781Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:46.781Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:46.781Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:46.782Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:46.858Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:46.978Z appoptics:patching patched crypto 
2022-04-21T16:40:46.995Z appoptics:patching patched https 
2022-04-21T16:40:46.995Z appoptics:patching patched http 
2022-04-21T16:40:47.027Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:47.027Z appoptics:patching patched fs 
2022-04-21T16:40:47.036Z appoptics:patching patched pino 5.10.10
2022-04-21T16:40:47.040Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:40:53.263Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:40:53.263Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:40:53.263Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:40:53.264Z appoptics:debug using context provider: ace-context
2022-04-21T16:40:53.323Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:40:53.437Z appoptics:patching patched crypto 
2022-04-21T16:40:53.457Z appoptics:patching patched https 
2022-04-21T16:40:53.457Z appoptics:patching patched http 
2022-04-21T16:40:53.516Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:40:53.517Z appoptics:patching patched fs 
2022-04-21T16:40:53.524Z appoptics:patching patched pino 5.11.0
2022-04-21T16:40:53.528Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:00.631Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:00.631Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:00.632Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:00.632Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:00.691Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:00.816Z appoptics:patching patched crypto 
2022-04-21T16:41:00.834Z appoptics:patching patched https 
2022-04-21T16:41:00.835Z appoptics:patching patched http 
2022-04-21T16:41:00.872Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:00.872Z appoptics:patching patched fs 
2022-04-21T16:41:00.878Z appoptics:patching patched pino 5.11.1
2022-04-21T16:41:00.881Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:07.223Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:07.223Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:07.223Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:07.224Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:07.283Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:07.396Z appoptics:patching patched crypto 
2022-04-21T16:41:07.414Z appoptics:patching patched https 
2022-04-21T16:41:07.415Z appoptics:patching patched http 
2022-04-21T16:41:07.449Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:07.450Z appoptics:patching patched fs 
2022-04-21T16:41:07.455Z appoptics:patching patched pino 5.11.2
2022-04-21T16:41:07.458Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:14.291Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:14.291Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:14.291Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:14.292Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:14.351Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:14.469Z appoptics:patching patched crypto 
2022-04-21T16:41:14.486Z appoptics:patching patched https 
2022-04-21T16:41:14.487Z appoptics:patching patched http 
2022-04-21T16:41:14.521Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:14.522Z appoptics:patching patched fs 
2022-04-21T16:41:14.527Z appoptics:patching patched pino 5.11.3
2022-04-21T16:41:14.530Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:21.250Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:21.251Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:21.251Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:21.252Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:21.329Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:21.460Z appoptics:patching patched crypto 
2022-04-21T16:41:21.503Z appoptics:patching patched https 
2022-04-21T16:41:21.504Z appoptics:patching patched http 
2022-04-21T16:41:21.542Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:21.542Z appoptics:patching patched fs 
2022-04-21T16:41:21.547Z appoptics:patching patched pino 5.12.0
2022-04-21T16:41:21.551Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:28.121Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:28.121Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:28.121Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:28.122Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:28.182Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:28.293Z appoptics:patching patched crypto 
2022-04-21T16:41:28.311Z appoptics:patching patched https 
2022-04-21T16:41:28.311Z appoptics:patching patched http 
2022-04-21T16:41:28.349Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:28.350Z appoptics:patching patched fs 
2022-04-21T16:41:28.355Z appoptics:patching patched pino 5.12.1
2022-04-21T16:41:28.358Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:35.052Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:35.053Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:35.053Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:35.054Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:35.114Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:35.226Z appoptics:patching patched crypto 
2022-04-21T16:41:35.244Z appoptics:patching patched https 
2022-04-21T16:41:35.245Z appoptics:patching patched http 
2022-04-21T16:41:35.281Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:35.281Z appoptics:patching patched fs 
2022-04-21T16:41:35.286Z appoptics:patching patched pino 5.12.2
2022-04-21T16:41:35.290Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:41.738Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:41.738Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:41.738Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:41.739Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:41.798Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:41.910Z appoptics:patching patched crypto 
2022-04-21T16:41:41.927Z appoptics:patching patched https 
2022-04-21T16:41:41.928Z appoptics:patching patched http 
2022-04-21T16:41:41.964Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:41.965Z appoptics:patching patched fs 
2022-04-21T16:41:41.970Z appoptics:patching patched pino 5.12.3
2022-04-21T16:41:41.973Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:49.030Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:49.031Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:49.031Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:49.035Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:49.139Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:49.260Z appoptics:patching patched crypto 
2022-04-21T16:41:49.278Z appoptics:patching patched https 
2022-04-21T16:41:49.279Z appoptics:patching patched http 
2022-04-21T16:41:49.315Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:49.315Z appoptics:patching patched fs 
2022-04-21T16:41:49.321Z appoptics:patching patched pino 5.12.4
2022-04-21T16:41:49.324Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:41:55.484Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:41:55.485Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:41:55.485Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:41:55.485Z appoptics:debug using context provider: ace-context
2022-04-21T16:41:55.547Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:41:55.678Z appoptics:patching patched crypto 
2022-04-21T16:41:55.729Z appoptics:patching patched https 
2022-04-21T16:41:55.730Z appoptics:patching patched http 
2022-04-21T16:41:55.768Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:41:55.768Z appoptics:patching patched fs 
2022-04-21T16:41:55.773Z appoptics:patching patched pino 5.12.5
2022-04-21T16:41:55.777Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:02.897Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:02.897Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:02.897Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:02.898Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:02.957Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:03.069Z appoptics:patching patched crypto 
2022-04-21T16:42:03.087Z appoptics:patching patched https 
2022-04-21T16:42:03.087Z appoptics:patching patched http 
2022-04-21T16:42:03.124Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:03.124Z appoptics:patching patched fs 
2022-04-21T16:42:03.129Z appoptics:patching patched pino 5.12.6
2022-04-21T16:42:03.133Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:09.709Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:09.710Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:09.710Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:09.711Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:09.817Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:09.981Z appoptics:patching patched crypto 
2022-04-21T16:42:10.029Z appoptics:patching patched https 
2022-04-21T16:42:10.029Z appoptics:patching patched http 
2022-04-21T16:42:10.068Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:10.068Z appoptics:patching patched fs 
2022-04-21T16:42:10.073Z appoptics:patching patched pino 5.13.0
2022-04-21T16:42:10.077Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:17.188Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:17.188Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:17.188Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:17.189Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:17.248Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:17.362Z appoptics:patching patched crypto 
2022-04-21T16:42:17.379Z appoptics:patching patched https 
2022-04-21T16:42:17.380Z appoptics:patching patched http 
2022-04-21T16:42:17.416Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:17.416Z appoptics:patching patched fs 
2022-04-21T16:42:17.421Z appoptics:patching patched pino 5.13.1
2022-04-21T16:42:17.425Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:24.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:24.423Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:24.423Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:24.424Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:24.483Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:24.596Z appoptics:patching patched crypto 
2022-04-21T16:42:24.613Z appoptics:patching patched https 
2022-04-21T16:42:24.614Z appoptics:patching patched http 
2022-04-21T16:42:24.650Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:24.650Z appoptics:patching patched fs 
2022-04-21T16:42:24.655Z appoptics:patching patched pino 5.13.2
2022-04-21T16:42:24.659Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:31.194Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:31.194Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:31.194Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:31.195Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:31.254Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:31.372Z appoptics:patching patched crypto 
2022-04-21T16:42:31.390Z appoptics:patching patched https 
2022-04-21T16:42:31.391Z appoptics:patching patched http 
2022-04-21T16:42:31.422Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:31.422Z appoptics:patching patched fs 
2022-04-21T16:42:31.427Z appoptics:patching patched pino 5.13.3
2022-04-21T16:42:31.431Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:38.263Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:38.264Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:38.264Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:38.264Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:38.325Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:38.436Z appoptics:patching patched crypto 
2022-04-21T16:42:38.453Z appoptics:patching patched https 
2022-04-21T16:42:38.454Z appoptics:patching patched http 
2022-04-21T16:42:38.489Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:38.489Z appoptics:patching patched fs 
2022-04-21T16:42:38.494Z appoptics:patching patched pino 5.13.4
2022-04-21T16:42:38.497Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:44.768Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:44.768Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:44.768Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:44.769Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:44.828Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:44.940Z appoptics:patching patched crypto 
2022-04-21T16:42:44.958Z appoptics:patching patched https 
2022-04-21T16:42:44.958Z appoptics:patching patched http 
2022-04-21T16:42:44.995Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:44.995Z appoptics:patching patched fs 
2022-04-21T16:42:45.000Z appoptics:patching patched pino 5.13.5
2022-04-21T16:42:45.004Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:51.648Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:51.649Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:51.649Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:51.650Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:51.709Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:51.822Z appoptics:patching patched crypto 
2022-04-21T16:42:51.839Z appoptics:patching patched https 
2022-04-21T16:42:51.839Z appoptics:patching patched http 
2022-04-21T16:42:51.871Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:51.871Z appoptics:patching patched fs 
2022-04-21T16:42:51.877Z appoptics:patching patched pino 5.13.6
2022-04-21T16:42:51.880Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:42:58.537Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:42:58.537Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:42:58.537Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:42:58.538Z appoptics:debug using context provider: ace-context
2022-04-21T16:42:58.612Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:42:58.738Z appoptics:patching patched crypto 
2022-04-21T16:42:58.780Z appoptics:patching patched https 
2022-04-21T16:42:58.781Z appoptics:patching patched http 
2022-04-21T16:42:58.817Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:42:58.817Z appoptics:patching patched fs 
2022-04-21T16:42:58.822Z appoptics:patching patched pino 5.14.0
2022-04-21T16:42:58.825Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:05.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:05.249Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:05.249Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:05.249Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:05.310Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:05.418Z appoptics:patching patched crypto 
2022-04-21T16:43:05.446Z appoptics:patching patched https 
2022-04-21T16:43:05.447Z appoptics:patching patched http 
2022-04-21T16:43:05.477Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:05.477Z appoptics:patching patched fs 
2022-04-21T16:43:05.482Z appoptics:patching patched pino 5.15.0
2022-04-21T16:43:05.485Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:12.546Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:12.547Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:12.547Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:12.548Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:12.616Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:12.730Z appoptics:patching patched crypto 
2022-04-21T16:43:12.748Z appoptics:patching patched https 
2022-04-21T16:43:12.748Z appoptics:patching patched http 
2022-04-21T16:43:12.779Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:12.779Z appoptics:patching patched fs 
2022-04-21T16:43:12.784Z appoptics:patching patched pino 5.16.0
2022-04-21T16:43:12.787Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:19.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:19.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:19.081Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:19.081Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:19.140Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:19.252Z appoptics:patching patched crypto 
2022-04-21T16:43:19.270Z appoptics:patching patched https 
2022-04-21T16:43:19.271Z appoptics:patching patched http 
2022-04-21T16:43:19.309Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:19.310Z appoptics:patching patched fs 
2022-04-21T16:43:19.315Z appoptics:patching patched pino 5.17.0
2022-04-21T16:43:19.318Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:26.109Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:26.110Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:26.110Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:26.110Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:26.169Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:26.281Z appoptics:patching patched crypto 
2022-04-21T16:43:26.299Z appoptics:patching patched https 
2022-04-21T16:43:26.300Z appoptics:patching patched http 
2022-04-21T16:43:26.332Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:26.332Z appoptics:patching patched fs 
2022-04-21T16:43:26.337Z appoptics:patching patched pino 6.0.0
2022-04-21T16:43:26.341Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4228
         "time": 1650559406365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4228
         "time": 1650559406373
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4228
         "time": 1650559406376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4228
         "time": 1650559406379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4228
         "time": 1650559406381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4228
         "time": 1650559406384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4228
         "time": 1650559406385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4228
         "time": 1650559406386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4228
         "time": 1650559406388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4228
         "time": 1650559406389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4228
         "time": 1650559406390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4228
         "time": 1650559406392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4228
         "time": 1650559406495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 00C084488F978BDC651DC17B70CFACDAB733FBFD-1"
         "pid": 4228
         "time": 1650559406524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:32.967Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:32.968Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:32.968Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:32.969Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:33.028Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:33.147Z appoptics:patching patched crypto 
2022-04-21T16:43:33.166Z appoptics:patching patched https 
2022-04-21T16:43:33.166Z appoptics:patching patched http 
2022-04-21T16:43:33.201Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:33.201Z appoptics:patching patched fs 
2022-04-21T16:43:33.207Z appoptics:patching patched pino 6.1.0
2022-04-21T16:43:33.210Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4250
         "time": 1650559413234
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4250
         "time": 1650559413242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4250
         "time": 1650559413245
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4250
         "time": 1650559413248
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4250
         "time": 1650559413250
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4250
         "time": 1650559413252
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4250
         "time": 1650559413254
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4250
         "time": 1650559413255
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4250
         "time": 1650559413257
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4250
         "time": 1650559413258
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4250
         "time": 1650559413259
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4250
         "time": 1650559413261
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4250
         "time": 1650559413365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D42EAA4C2D233AD7EDA92C41BB7B748F7E69717F-1"
         "pid": 4250
         "time": 1650559413394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:39.997Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:39.997Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:39.997Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:39.998Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:40.059Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:40.173Z appoptics:patching patched crypto 
2022-04-21T16:43:40.191Z appoptics:patching patched https 
2022-04-21T16:43:40.192Z appoptics:patching patched http 
2022-04-21T16:43:40.224Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:40.225Z appoptics:patching patched fs 
2022-04-21T16:43:40.230Z appoptics:patching patched pino 6.1.1
2022-04-21T16:43:40.233Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4272
         "time": 1650559420258
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4272
         "time": 1650559420265
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4272
         "time": 1650559420268
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4272
         "time": 1650559420271
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4272
         "time": 1650559420273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4272
         "time": 1650559420275
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4272
         "time": 1650559420277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4272
         "time": 1650559420278
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4272
         "time": 1650559420279
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4272
         "time": 1650559420281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4272
         "time": 1650559420282
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4272
         "time": 1650559420283
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4272
         "time": 1650559420387
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F46116CD59F6AA91C8B0D246AFDE34F7131BED5D-1"
         "pid": 4272
         "time": 1650559420415
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:46.384Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:46.386Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:46.386Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:46.386Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:46.451Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:46.581Z appoptics:patching patched crypto 
2022-04-21T16:43:46.621Z appoptics:patching patched https 
2022-04-21T16:43:46.622Z appoptics:patching patched http 
2022-04-21T16:43:46.659Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:46.659Z appoptics:patching patched fs 
2022-04-21T16:43:46.664Z appoptics:patching patched pino 6.2.0
2022-04-21T16:43:46.668Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4294
         "time": 1650559426695
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4294
         "time": 1650559426702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4294
         "time": 1650559426706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4294
         "time": 1650559426709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4294
         "time": 1650559426711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4294
         "time": 1650559426714
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4294
         "time": 1650559426715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4294
         "time": 1650559426717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4294
         "time": 1650559426718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4294
         "time": 1650559426720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4294
         "time": 1650559426721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4294
         "time": 1650559426723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4294
         "time": 1650559426826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 050958D9E9A550659DA68E3CBC84530FD762D7F0-1"
         "pid": 4294
         "time": 1650559426855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:43:53.521Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:43:53.522Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:43:53.522Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:43:53.523Z appoptics:debug using context provider: ace-context
2022-04-21T16:43:53.582Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:43:53.694Z appoptics:patching patched crypto 
2022-04-21T16:43:53.711Z appoptics:patching patched https 
2022-04-21T16:43:53.711Z appoptics:patching patched http 
2022-04-21T16:43:53.742Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:43:53.743Z appoptics:patching patched fs 
2022-04-21T16:43:53.748Z appoptics:patching patched pino 6.2.1
2022-04-21T16:43:53.752Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4316
         "time": 1650559433776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4316
         "time": 1650559433783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4316
         "time": 1650559433786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4316
         "time": 1650559433789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4316
         "time": 1650559433791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4316
         "time": 1650559433793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4316
         "time": 1650559433795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4316
         "time": 1650559433796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4316
         "time": 1650559433798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4316
         "time": 1650559433799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4316
         "time": 1650559433800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4316
         "time": 1650559433802
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4316
         "time": 1650559433906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 50BE4A628AA9E3AE13E6BA903B00258010A8698E-1"
         "pid": 4316
         "time": 1650559433934
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:00.696Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:00.697Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:00.697Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:00.697Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:00.756Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:00.869Z appoptics:patching patched crypto 
2022-04-21T16:44:00.891Z appoptics:patching patched https 
2022-04-21T16:44:00.891Z appoptics:patching patched http 
2022-04-21T16:44:00.947Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:00.947Z appoptics:patching patched fs 
2022-04-21T16:44:00.953Z appoptics:patching patched pino 6.3.0
2022-04-21T16:44:00.956Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4338
         "time": 1650559440983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4338
         "time": 1650559440990
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4338
         "time": 1650559440993
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4338
         "time": 1650559440996
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4338
         "time": 1650559440998
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4338
         "time": 1650559441001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4338
         "time": 1650559441002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4338
         "time": 1650559441003
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4338
         "time": 1650559441005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4338
         "time": 1650559441006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4338
         "time": 1650559441007
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4338
         "time": 1650559441009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4338
         "time": 1650559441113
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7D1391F57866BA4F74A0CF7ECAAE227CCEEAE231-1"
         "pid": 4338
         "time": 1650559441142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:14.598Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:14.599Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:14.599Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:14.600Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:14.660Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:14.773Z appoptics:patching patched crypto 
2022-04-21T16:44:14.790Z appoptics:patching patched https 
2022-04-21T16:44:14.790Z appoptics:patching patched http 
2022-04-21T16:44:14.832Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:14.832Z appoptics:patching patched fs 
2022-04-21T16:44:14.837Z appoptics:patching patched pino 6.3.1
2022-04-21T16:44:14.841Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4360
         "time": 1650559454866
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4360
         "time": 1650559454873
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4360
         "time": 1650559454876
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4360
         "time": 1650559454879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4360
         "time": 1650559454881
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4360
         "time": 1650559454884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4360
         "time": 1650559454885
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4360
         "time": 1650559454887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4360
         "time": 1650559454888
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4360
         "time": 1650559454889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4360
         "time": 1650559454891
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4360
         "time": 1650559454892
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4360
         "time": 1650559454996
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C24C7DAE3C7136D49302A5B35E44C9A29046CAF0-1"
         "pid": 4360
         "time": 1650559455025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 19s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:34.489Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:34.490Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:34.490Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:34.491Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:34.556Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:34.685Z appoptics:patching patched crypto 
2022-04-21T16:44:34.726Z appoptics:patching patched https 
2022-04-21T16:44:34.726Z appoptics:patching patched http 
2022-04-21T16:44:34.761Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:34.761Z appoptics:patching patched fs 
2022-04-21T16:44:34.767Z appoptics:patching patched pino 6.3.2
2022-04-21T16:44:34.771Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4382
         "time": 1650559474799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4382
         "time": 1650559474806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4382
         "time": 1650559474810
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4382
         "time": 1650559474813
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4382
         "time": 1650559474816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4382
         "time": 1650559474819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4382
         "time": 1650559474821
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4382
         "time": 1650559474822
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4382
         "time": 1650559474824
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4382
         "time": 1650559474825
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4382
         "time": 1650559474826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4382
         "time": 1650559474828
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4382
         "time": 1650559474932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 35C8FB23B629F46B5BDA837225A0EBF600AE10B1-1"
         "pid": 4382
         "time": 1650559474960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:40.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:40.910Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:40.910Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:40.910Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:40.964Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:41.067Z appoptics:patching patched crypto 
2022-04-21T16:44:41.082Z appoptics:patching patched https 
2022-04-21T16:44:41.083Z appoptics:patching patched http 
2022-04-21T16:44:41.113Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:41.114Z appoptics:patching patched fs 
2022-04-21T16:44:41.119Z appoptics:patching patched pino 6.4.0
2022-04-21T16:44:41.122Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (172ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4404
         "time": 1650559481143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FCEBCF615CF7A9A67F82A85BB46C0DA27C0512F8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4404
         "time": 1650559481149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "807AEB5A8F8E9656262B72D5F25030DB05F39188-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4404
         "time": 1650559481152
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C6D90B9B0CD90242C636D4DC0A8C3AE917A4B67-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4404
         "time": 1650559481155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C30A0F9AC1EC7BF8FE5A6AC5B116B4992CF3F028-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4404
         "time": 1650559481156
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4404
         "time": 1650559481159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "151BABCDA20A7ED51138EABA693D8C56F488A604-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4404
         "time": 1650559481160
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B6F4BFFDBC66819965DA6FF1C84675456EA06378-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4404
         "time": 1650559481161
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4404
         "time": 1650559481162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "133942527ACF3C38A59AF0F67AC52517C4743F2E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4404
         "time": 1650559481163
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4404
         "time": 1650559481164
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B05EF394C2BE43FB377049852D16DD1EED10F4AE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4404
         "time": 1650559481166
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5C0F061CCFAFD3BCCD31FC0F963645F04A5D2914-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4404
         "time": 1650559481270
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 50D71C88FEE24C6A51459800AB31313C13407A58-1"
         "pid": 4404
         "time": 1650559481298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:47.953Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:47.954Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:47.954Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:47.954Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:48.085Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:48.215Z appoptics:patching patched crypto 
2022-04-21T16:44:48.233Z appoptics:patching patched https 
2022-04-21T16:44:48.234Z appoptics:patching patched http 
2022-04-21T16:44:48.270Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:48.270Z appoptics:patching patched fs 
2022-04-21T16:44:48.276Z appoptics:patching patched pino 6.4.1
2022-04-21T16:44:48.279Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4426
         "time": 1650559488304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "71AD40E1904383F7DC897F3D6D2F4C8DB7351860-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4426
         "time": 1650559488312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C15E932B58EA8B4B0721E9C7AC73704903CA31DE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4426
         "time": 1650559488315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "344AA59BF5E33977BEB57C9C9A9130ED9EEDE18B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4426
         "time": 1650559488318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8860FF5A66D13249986EF5A20E994B9C0B3DEE7B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4426
         "time": 1650559488320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4426
         "time": 1650559488323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6313072394BA7725806B63DF176429D31CB2956D-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4426
         "time": 1650559488324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4478000396CACBB4ED4A713119E65DAA555375E6-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4426
         "time": 1650559488326
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4426
         "time": 1650559488327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60482611B552A9BB83D0C063EB18FE5B674C8D0C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4426
         "time": 1650559488328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4426
         "time": 1650559488329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5B87258F40D97DBD0B7E1C9061F16336F5CA1AE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4426
         "time": 1650559488331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "951C03BAACBD848713C3D262E62C9D0632534744-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4426
         "time": 1650559488435
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0AD70C613AA465211DCE2F397108EC21097E1FC0-1"
         "pid": 4426
         "time": 1650559488463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:44:54.680Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:44:54.681Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:44:54.681Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:44:54.682Z appoptics:debug using context provider: ace-context
2022-04-21T16:44:54.757Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:44:54.883Z appoptics:patching patched crypto 
2022-04-21T16:44:54.903Z appoptics:patching patched https 
2022-04-21T16:44:54.903Z appoptics:patching patched http 
2022-04-21T16:44:54.939Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:44:54.940Z appoptics:patching patched fs 
2022-04-21T16:44:54.945Z appoptics:patching patched pino 6.5.0
2022-04-21T16:44:54.949Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4448
         "time": 1650559494973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2123CC632762762B9B12CF56F4EC3C1E48F304AC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4448
         "time": 1650559494980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "080A052A94C91F63FD254F6230775D80E8A9373D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4448
         "time": 1650559494983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "671E35EEFAE76BB24A60EBA90A5826CC08681CC3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4448
         "time": 1650559494986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "425E44D2C28715CFD89A20E66B51ABF4EA1D31B3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4448
         "time": 1650559494988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4448
         "time": 1650559494992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "296ACFAC4A8402DB748CB70629BFBFFCCDAF1E2C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4448
         "time": 1650559494993
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DD928D982F565ABCD1B693953A9CB9273C61499-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4448
         "time": 1650559494995
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4448
         "time": 1650559494996
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF1D2F6B2E2E391F3C56ECFDDEAF1144181F1F68-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4448
         "time": 1650559494997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4448
         "time": 1650559494998
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D34D0881880A190D55807409AFA29D93C72F0795-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4448
         "time": 1650559495000
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4CA35C38EA3CA066D193C27A77E75087EAB8B87F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4448
         "time": 1650559495105
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3DFBF32B231E07AE0BA273F53352E70BC36E5BC9-1"
         "pid": 4448
         "time": 1650559495134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:01.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:01.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:01.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:01.706Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:01.788Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:01.905Z appoptics:patching patched crypto 
2022-04-21T16:45:01.923Z appoptics:patching patched https 
2022-04-21T16:45:01.924Z appoptics:patching patched http 
2022-04-21T16:45:01.966Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:01.966Z appoptics:patching patched fs 
2022-04-21T16:45:01.972Z appoptics:patching patched pino 6.5.1
2022-04-21T16:45:01.975Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4470
         "time": 1650559502001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "19192CCAA0EBC81C59F9F3162ED4D1DAC655BD01-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4470
         "time": 1650559502008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15A4A884CA67C6F8744AA2662D63BF95BB8CB7D4-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4470
         "time": 1650559502011
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "378B34E7A1D615322ACC1F4149A48367D735B534-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4470
         "time": 1650559502014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "602BA31C155336A3BB91E3F7A924551C3975AF1C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4470
         "time": 1650559502016
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4470
         "time": 1650559502018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6F58DBE70973282E8CB3770C1F19BD69076F4D0-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4470
         "time": 1650559502020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "536594EBE3EC29A20557C88475F076051F220714-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4470
         "time": 1650559502021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4470
         "time": 1650559502022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0963F257C7BA1B81D86829F19BE357BCE2264904-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4470
         "time": 1650559502024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4470
         "time": 1650559502025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FA73A2D99736BC861D4B5D4FFC44EB0EB5E0271-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4470
         "time": 1650559502026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2673762B7DF22793FC432E80DDFE727E2417A5FC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4470
         "time": 1650559502130
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 354540674EBDF8786B168B6408BAF014E6933B51-1"
         "pid": 4470
         "time": 1650559502159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:08.435Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:08.435Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:08.435Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:08.436Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:08.495Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:08.609Z appoptics:patching patched crypto 
2022-04-21T16:45:08.626Z appoptics:patching patched https 
2022-04-21T16:45:08.635Z appoptics:patching patched http 
2022-04-21T16:45:08.666Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:08.666Z appoptics:patching patched fs 
2022-04-21T16:45:08.672Z appoptics:patching patched pino 6.6.0
2022-04-21T16:45:08.675Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4492
         "time": 1650559508700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "03975F3B9E06C4C5511C4C41AB2810C089C0806E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4492
         "time": 1650559508707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB61DF8E480D95F010645A5FAA51D7242925ADD6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4492
         "time": 1650559508710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "17FF16A07572AFF0472CA2E70B1B7440F8A4351D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4492
         "time": 1650559508713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A4D00C44E9E1F644A71C576571822B6BFAE0A9E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4492
         "time": 1650559508715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4492
         "time": 1650559508718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3FEF2839A7D4FD91B5DC5B5B380EE7D362E4E0DB-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4492
         "time": 1650559508719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A66B33EDA1E516C7107A50039CFD5A3055A222FD-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4492
         "time": 1650559508720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4492
         "time": 1650559508722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0FC0DAC834A5AD0F85EAE35642E82A41D7C501C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4492
         "time": 1650559508723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4492
         "time": 1650559508724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "20C0C1D2EBC65648B9CC4AD9A9A02676722B4377-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4492
         "time": 1650559508726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CAB6394B28EFF7B8B0469921BAC5FA72F91911E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4492
         "time": 1650559508830
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 72A20593BE2ED17B23CD123ECD3A288B3E606657-1"
         "pid": 4492
         "time": 1650559508858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:15.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:15.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:15.687Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:15.687Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:15.763Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:15.897Z appoptics:patching patched crypto 
2022-04-21T16:45:15.932Z appoptics:patching patched https 
2022-04-21T16:45:15.933Z appoptics:patching patched http 
2022-04-21T16:45:15.966Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:15.966Z appoptics:patching patched fs 
2022-04-21T16:45:15.972Z appoptics:patching patched pino 6.6.1
2022-04-21T16:45:15.975Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4514
         "time": 1650559516002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AE92975BAA44248BCBFEF4549C497D0CBD5FA8FE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4514
         "time": 1650559516011
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8694C4CDBA9F9946748B2D5EA9E12302B8BC1851-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4514
         "time": 1650559516014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C3A49E60FC3013EF098B69E641DD3EF48E5934D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4514
         "time": 1650559516017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E2A9190A98251E40174028B161DE5BCBF572E14-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4514
         "time": 1650559516019
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4514
         "time": 1650559516022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD21CC97698544F4D50BE901498DC9E0827535C5-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4514
         "time": 1650559516024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40199F64B3388C12D56F2FF9B3162C5F58DC9B49-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4514
         "time": 1650559516025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4514
         "time": 1650559516026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AFC075213E30BBB97BBA8BD09B9B895C0A8BBC67-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4514
         "time": 1650559516028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4514
         "time": 1650559516029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A0359F13C35DA771A783F27BC4530623380EBE8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4514
         "time": 1650559516031
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9756387B09529EDB921C415DCFA42A4C60F3907B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4514
         "time": 1650559516135
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6CB4E638744DC099C657836DFF8EE7DCE8338DEA-1"
         "pid": 4514
         "time": 1650559516163
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:22.267Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:22.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:22.267Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:22.268Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:22.334Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:22.452Z appoptics:patching patched crypto 
2022-04-21T16:45:22.489Z appoptics:patching patched https 
2022-04-21T16:45:22.490Z appoptics:patching patched http 
2022-04-21T16:45:22.524Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:22.525Z appoptics:patching patched fs 
2022-04-21T16:45:22.530Z appoptics:patching patched pino 6.7.0
2022-04-21T16:45:22.533Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (203ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4536
         "time": 1650559522564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C138045334156D9B7B66B2E0F4CC5A59903EDACF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4536
         "time": 1650559522580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E4FD2D86BF5281CBB856F6971A885CE6A00E4DB-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4536
         "time": 1650559522589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63DB37862EC2E420EB133F4A2C409901232E48F1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4536
         "time": 1650559522594
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "826A7C8434C1339978B7BCED9C7BF71DF00E6F94-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4536
         "time": 1650559522597
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4536
         "time": 1650559522602
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C7DD1FEA6CFA0803C9B661A75BFDC90E7B163D0-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4536
         "time": 1650559522603
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDF11E9888D0AB24BCE4788DE390917D5B3C8485-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4536
         "time": 1650559522605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4536
         "time": 1650559522606
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2177CBCC324A8D66E70FD68AFC9AF83D9928D4EC-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4536
         "time": 1650559522607
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4536
         "time": 1650559522609
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D9D36946511425041C2B59BC3408AB153371AD26-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4536
         "time": 1650559522610
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "889B41D2D7DD100E4FBA18CAAB59D197F84CD604-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4536
         "time": 1650559522714
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CE44BD70A7A43F9D461BE48ECEA947D6A0325298-1"
         "pid": 4536
         "time": 1650559522741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:29.132Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:29.132Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:29.132Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:29.133Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:29.187Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:29.291Z appoptics:patching patched crypto 
2022-04-21T16:45:29.308Z appoptics:patching patched https 
2022-04-21T16:45:29.309Z appoptics:patching patched http 
2022-04-21T16:45:29.342Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:29.342Z appoptics:patching patched fs 
2022-04-21T16:45:29.347Z appoptics:patching patched pino 6.8.0
2022-04-21T16:45:29.351Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4558
         "time": 1650559529373
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9265C65BC33A21E71E6B810BB4878EE22A9FD14E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4558
         "time": 1650559529379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85EC4C870A0B420118B6FE3BEF1F4BEFB1AF47F4-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4558
         "time": 1650559529382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "926020E8656EA53D623CF56B8F30DC2EB536F12A-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4558
         "time": 1650559529384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46B5A56A202C8F5FA8701462A533588155962D1D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4558
         "time": 1650559529386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4558
         "time": 1650559529389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99C59D3D6C3358B2563C07B4FED601A4AC397ED3-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4558
         "time": 1650559529390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48128BF1B7849CF3DF7AAE4BCD4414FB6BAF8B80-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4558
         "time": 1650559529391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4558
         "time": 1650559529392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A16E0F6F82687F83EF124EA080882ADB7218CFAB-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4558
         "time": 1650559529393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4558
         "time": 1650559529394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5B5C44D383D1A17A445E19A56EE6D94444A9961-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4558
         "time": 1650559529396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EA23109B8E4C54F7E75954E7ED2426E5DF4ECAB3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4558
         "time": 1650559529500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 70C74B30057E4229D7DDBB4094483950EAC88A8F-1"
         "pid": 4558
         "time": 1650559529529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:36.130Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:36.130Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:36.130Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:36.131Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:36.184Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:36.287Z appoptics:patching patched crypto 
2022-04-21T16:45:36.303Z appoptics:patching patched https 
2022-04-21T16:45:36.304Z appoptics:patching patched http 
2022-04-21T16:45:36.335Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:36.335Z appoptics:patching patched fs 
2022-04-21T16:45:36.340Z appoptics:patching patched pino 6.9.0
2022-04-21T16:45:36.343Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4580
         "time": 1650559536365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4FF8F38017565D0CD526D70854754A3D9ACE6ED8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4580
         "time": 1650559536371
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3108C1D9825A75E28776A595E0DC0DDF494E57D2-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4580
         "time": 1650559536374
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "956B4ED7555D8C928A1CFE40928B7C25377079DF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4580
         "time": 1650559536376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDEFB5A00A7AC99F1A52433E93106D154F16A7F1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4580
         "time": 1650559536378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4580
         "time": 1650559536381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "56E0D56400A11E9FA7039C442506D17ACABD8CA9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4580
         "time": 1650559536382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C02001519790F3C7230E26D72E679D0F8A3A611-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4580
         "time": 1650559536384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4580
         "time": 1650559536385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C765D41B2F76A5B7C135F14F1DE78B0CA91DE8F8-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4580
         "time": 1650559536386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4580
         "time": 1650559536387
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2EEBFD84ED9DA86774149AC98C6AED67E80CDD70-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4580
         "time": 1650559536388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3DDC109675585D00E9915A15BD336EA3A15F5C7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4580
         "time": 1650559536493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 09DF625D9AD587232CF4DE8D1BCBD5D66B89D634-1"
         "pid": 4580
         "time": 1650559536522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:42.484Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:42.484Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:42.484Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:42.485Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:42.548Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:42.664Z appoptics:patching patched crypto 
2022-04-21T16:45:42.682Z appoptics:patching patched https 
2022-04-21T16:45:42.683Z appoptics:patching patched http 
2022-04-21T16:45:42.730Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:42.730Z appoptics:patching patched fs 
2022-04-21T16:45:42.736Z appoptics:patching patched pino 6.10.0
2022-04-21T16:45:42.740Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4602
         "time": 1650559542766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC23DEB4187F823E804D70669004883C9C3F4727-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4602
         "time": 1650559542774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C75FC077F7C3A0D3D3274422E5D94E10E3083D43-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4602
         "time": 1650559542777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7603B86EF8125F000D9F4C4FC3A9631BE4B678D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4602
         "time": 1650559542780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E4AF80CEAF04274FAC517E8ADA956B80B1B55BC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4602
         "time": 1650559542784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4602
         "time": 1650559542788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF77DDA175A87D99C525D553666AF00F641AC06B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4602
         "time": 1650559542789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "156FE84D5D285179CBF8B471F4F6C4A4361E1A52-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4602
         "time": 1650559542791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4602
         "time": 1650559542792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C8E3B1EC94905FAD51FBC2716D129A3D1FA7C65-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4602
         "time": 1650559542793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4602
         "time": 1650559542794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B16FE3C28FA8F4743AE13F958A553BFC884BF749-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4602
         "time": 1650559542796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E7FC38E5FD66F652AD80425053B5FF45E97E41C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4602
         "time": 1650559542901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 19D1086CC9B69B7000DE7BA38FF9F9046660148D-1"
         "pid": 4602
         "time": 1650559542930
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:49.884Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:49.885Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:49.885Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:49.885Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:49.950Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:50.079Z appoptics:patching patched crypto 
2022-04-21T16:45:50.096Z appoptics:patching patched https 
2022-04-21T16:45:50.097Z appoptics:patching patched http 
2022-04-21T16:45:50.134Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:50.134Z appoptics:patching patched fs 
2022-04-21T16:45:50.139Z appoptics:patching patched pino 6.11.0
2022-04-21T16:45:50.143Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4624
         "time": 1650559550167
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2AA5A6211DB7E7B1D8A5C268F23E7372C39F8445-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4624
         "time": 1650559550176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "518DDB5271E72409F5911C7D4E1D9DEEA9BFEEAF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4624
         "time": 1650559550179
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B7CCFE1C328E9501F27EE75490C0B486C63B4446-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4624
         "time": 1650559550182
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9AA5761444D95ADAB9996570BFE4293E70C2855-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4624
         "time": 1650559550184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4624
         "time": 1650559550187
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "986933D3B2E45C48050BEE7C2BE7257174FCD718-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4624
         "time": 1650559550188
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07C029908003811D777A0ABC49D530FED4EB31E6-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4624
         "time": 1650559550189
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4624
         "time": 1650559550190
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A7065DDBC6788D9C611C75387175FB6DFF212F5-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4624
         "time": 1650559550192
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4624
         "time": 1650559550193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4119DD0629170033ACC39712318890278AED88EE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4624
         "time": 1650559550194
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF7762C81B255E25CED36716F60038D13FDD2F11-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4624
         "time": 1650559550298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6A35B98210980338B77A1448C1CDA90632357FDC-1"
         "pid": 4624
         "time": 1650559550327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:45:56.314Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:45:56.314Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:45:56.314Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:45:56.315Z appoptics:debug using context provider: ace-context
2022-04-21T16:45:56.374Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:45:56.487Z appoptics:patching patched crypto 
2022-04-21T16:45:56.504Z appoptics:patching patched https 
2022-04-21T16:45:56.505Z appoptics:patching patched http 
2022-04-21T16:45:56.546Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:45:56.547Z appoptics:patching patched fs 
2022-04-21T16:45:56.552Z appoptics:patching patched pino 6.11.1
2022-04-21T16:45:56.556Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4646
         "time": 1650559556580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CFEB23D2A2B21F9A811009500C47492BC727EA3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4646
         "time": 1650559556588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2786F106B66809A87B3A66603EDFEE2585982CA2-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4646
         "time": 1650559556591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "617FE1993E8E7177262BF61EE2CE8C6245E5F938-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4646
         "time": 1650559556593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01E45C8BA56B1C71739D3AFC9BA83BD7A95516E9-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4646
         "time": 1650559556596
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4646
         "time": 1650559556598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F45E2E59FFF35A458432F694E66E01407A8E5A57-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4646
         "time": 1650559556600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A86350A066820EAC86746E2B811761BCFEEB9C5E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4646
         "time": 1650559556601
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4646
         "time": 1650559556602
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46777FB543D8CCD05F8538557EF4AF3C45350F11-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4646
         "time": 1650559556604
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4646
         "time": 1650559556605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "17A14175A9E6F4E12DBFB5A93DFF5986C65F92A3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4646
         "time": 1650559556606
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDCA9C592002C70C81C1A6B14ACDAB80B12E295C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4646
         "time": 1650559556710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous ED412667F30BA5D6BE4237253BBC4434E613CCAF-1"
         "pid": 4646
         "time": 1650559556738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:03.896Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:03.896Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:03.896Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:03.897Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:03.956Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:04.067Z appoptics:patching patched crypto 
2022-04-21T16:46:04.084Z appoptics:patching patched https 
2022-04-21T16:46:04.085Z appoptics:patching patched http 
2022-04-21T16:46:04.121Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:04.121Z appoptics:patching patched fs 
2022-04-21T16:46:04.127Z appoptics:patching patched pino 6.11.2
2022-04-21T16:46:04.130Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4668
         "time": 1650559564155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "163B313B05D39286D020221620E9400DB86AFE69-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4668
         "time": 1650559564162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "28EB19972B920228B524E134F84295C01B19BDA7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4668
         "time": 1650559564165
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E8D5989BF00E85FD7613BF784C0980109B72600-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4668
         "time": 1650559564168
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA06B259C4010CFD86C4C1B9419250EF2BA0F187-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4668
         "time": 1650559564170
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4668
         "time": 1650559564173
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18D83927C90C3C4A29762DA8ECAB45438C3C615E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4668
         "time": 1650559564174
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ACDF7386FE48BD9158A64EB40517FE33AED151A9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4668
         "time": 1650559564175
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4668
         "time": 1650559564176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A914DD51EE4341DEEA2EE80CC18C94A333B2102-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4668
         "time": 1650559564178
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4668
         "time": 1650559564179
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B67CC62DDB58CB02E08C366310DA04D375242ECB-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4668
         "time": 1650559564180
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A65820214396B3C7E79E4EA3821D46C3C910A9F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4668
         "time": 1650559564284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 471DB6A453691B26BA38035495723F210FC4D8C2-1"
         "pid": 4668
         "time": 1650559564312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:10.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:10.102Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:10.102Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:10.103Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:10.167Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:10.299Z appoptics:patching patched crypto 
2022-04-21T16:46:10.315Z appoptics:patching patched https 
2022-04-21T16:46:10.315Z appoptics:patching patched http 
2022-04-21T16:46:10.350Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:10.350Z appoptics:patching patched fs 
2022-04-21T16:46:10.355Z appoptics:patching patched pino 6.11.3
2022-04-21T16:46:10.358Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4690
         "time": 1650559570381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4141425B41005066A0ADFEEB6E2BDB125D4079EF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4690
         "time": 1650559570392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D1EC549E54A3E4A49C8075BB256F3B53F07BC893-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4690
         "time": 1650559570396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5C4BF6882D5799AC4735676741F37FD8E219F5A6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4690
         "time": 1650559570402
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9053A1D1B92BA9F3D21C6651B06A1570108C78C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4690
         "time": 1650559570408
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4690
         "time": 1650559570410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4381CA970068FEAEC340659091304288B72B37F2-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4690
         "time": 1650559570412
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "717BE5182426781FAC6DB7BE08FCE1CF06A7FFB1-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4690
         "time": 1650559570413
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4690
         "time": 1650559570415
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33DE8D03055F00E465885F3A79569AF4C972EF32-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4690
         "time": 1650559570416
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4690
         "time": 1650559570417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E406B0AAAC2FB8DC13A7A4ED73B1CB3B3BDA457C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4690
         "time": 1650559570419
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "433E31815EA09C82572824955CA5D2C6D135A0F8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4690
         "time": 1650559570523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 756346E5009A625F58B1436E9ACE33601A1A3900-1"
         "pid": 4690
         "time": 1650559570551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:17.541Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:17.542Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:17.542Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:17.543Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:17.601Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:17.722Z appoptics:patching patched crypto 
2022-04-21T16:46:17.740Z appoptics:patching patched https 
2022-04-21T16:46:17.765Z appoptics:patching patched http 
2022-04-21T16:46:17.804Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:17.804Z appoptics:patching patched fs 
2022-04-21T16:46:17.809Z appoptics:patching patched pino 6.12.0
2022-04-21T16:46:17.813Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4712
         "time": 1650559577840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50C9E86F2BC1E837E3CB4B855CEA3BA831B1A020-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4712
         "time": 1650559577848
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EB890D455E8D3C7ED4003BE9ACF1A5EB1EA8C067-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4712
         "time": 1650559577852
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3EC64C8D99D44CF3CFFA7EA4E179CA78AFBC6DA3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4712
         "time": 1650559577854
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFF687C3A6B2C03FE91400E1F0490FB574268C90-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4712
         "time": 1650559577857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4712
         "time": 1650559577860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A751A27472846F25F1304756A0A676ACA63101FC-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4712
         "time": 1650559577861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E29B61F8C71993CCA6A498B06C0DE2F6041DC756-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4712
         "time": 1650559577863
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4712
         "time": 1650559577864
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C54634EA2810C2835E2A062317AE288F8217E7EE-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4712
         "time": 1650559577865
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4712
         "time": 1650559577867
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DD302BB85EF1E463B956C90D7F660CEE364D7C1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4712
         "time": 1650559577869
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B065A44BC6352B6B56E850C85CD6753040AA658-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4712
         "time": 1650559577972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D8F5938C0BFA5B3F0E3491B3A255A9C27221792B-1"
         "pid": 4712
         "time": 1650559578001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:25.203Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:25.203Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:25.203Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:25.204Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:25.263Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:25.377Z appoptics:patching patched crypto 
2022-04-21T16:46:25.395Z appoptics:patching patched https 
2022-04-21T16:46:25.395Z appoptics:patching patched http 
2022-04-21T16:46:25.431Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:25.431Z appoptics:patching patched fs 
2022-04-21T16:46:25.437Z appoptics:patching patched pino 6.13.0
2022-04-21T16:46:25.440Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4734
         "time": 1650559585465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C0DB9EE4487C19144AFB0AC56F447FF0A9D2E490-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4734
         "time": 1650559585472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B14FF74897D922A776D5AE34A2686FBEE58B25D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4734
         "time": 1650559585476
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3293C85F7B541300B9D1392A25D61B56C46AE02E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4734
         "time": 1650559585478
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "125F4FD798350BFCFE32456AE0FD9D0A9E3776FD-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4734
         "time": 1650559585480
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4734
         "time": 1650559585483
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DF7739F6A5878780FFFEF9F1B422A30DD1105AD8-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4734
         "time": 1650559585484
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CECEEF327012015AA30275696948D47FA6162F61-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4734
         "time": 1650559585486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4734
         "time": 1650559585487
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "95A86098D2A5202C94D19BDE553BFDDA764CA57B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4734
         "time": 1650559585488
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4734
         "time": 1650559585489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C55F92D41CE0B1CBA05EFAF71881984AF3CE1EFA-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4734
         "time": 1650559585491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA6EA9162233655BA9EADE018BBD1FFEDCE72CE5-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4734
         "time": 1650559585595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D62A724C0AB7B0371FE6C68AC4800FBA1545B3E1-1"
         "pid": 4734
         "time": 1650559585624
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:31.523Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:31.524Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:31.524Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:31.525Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:31.584Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:31.700Z appoptics:patching patched crypto 
2022-04-21T16:46:31.720Z appoptics:patching patched https 
2022-04-21T16:46:31.720Z appoptics:patching patched http 
2022-04-21T16:46:31.753Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:31.753Z appoptics:patching patched fs 
2022-04-21T16:46:31.760Z appoptics:patching patched pino 6.13.1
2022-04-21T16:46:31.763Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4756
         "time": 1650559591788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0D1B0AE953BC9D399B0A52FEB3A737CCC17BCA5-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4756
         "time": 1650559591796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87B06DD5CED54CE9B24112C1B616572DBA179E2F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4756
         "time": 1650559591799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B942FE9446399E87D7938574B2AC4BF49404689-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4756
         "time": 1650559591801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2955DB2A0A74ADE7B4EEAA35653DB930A7210C7A-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4756
         "time": 1650559591804
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4756
         "time": 1650559591806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3CE528F334D943465EF24FDA841293B7558D499C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4756
         "time": 1650559591808
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CE0D362CBDA95643350C9CCE26BD52BC4E1DD18-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4756
         "time": 1650559591809
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4756
         "time": 1650559591810
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4BF346E73DEB6548B1CBBA09FD840CBBE5404498-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4756
         "time": 1650559591811
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4756
         "time": 1650559591812
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B271100848F6011A228AD5E88A1C0D335563A078-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4756
         "time": 1650559591814
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82BF01F214339A8FD4B1719A60908DDFBDCD2706-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4756
         "time": 1650559591919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 01C9CD834C7996286472A5E7D94592EDD93A2B36-1"
         "pid": 4756
         "time": 1650559591947
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:38.966Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:38.966Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:38.967Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:38.967Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:39.026Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:39.177Z appoptics:patching patched crypto 
2022-04-21T16:46:39.200Z appoptics:patching patched https 
2022-04-21T16:46:39.201Z appoptics:patching patched http 
2022-04-21T16:46:39.253Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:39.253Z appoptics:patching patched fs 
2022-04-21T16:46:39.259Z appoptics:patching patched pino 6.13.2
2022-04-21T16:46:39.263Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4778
         "time": 1650559599288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4EC387EFEE804CFD3420B273E5E8B65F096DE6E3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4778
         "time": 1650559599295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C0E37AF0E805C187AD0848A5B6F6A3D03233B97-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4778
         "time": 1650559599298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7842EEB5E4B77761AE545A93916ECF22713E7E52-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4778
         "time": 1650559599301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05533CA7ED444AED6B17DF910B907B695E212456-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4778
         "time": 1650559599303
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4778
         "time": 1650559599306
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5621AD541EEC18642AF0FACF3F44339BEBC5A1B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4778
         "time": 1650559599307
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "237B8702BA8A5AF10086CCACD86A9216A3930557-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4778
         "time": 1650559599308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4778
         "time": 1650559599310
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E26DBB402299EB489D8A2E839D1309047D35694-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4778
         "time": 1650559599311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4778
         "time": 1650559599312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "539A80293FF645F2690ABE8206115669412AF537-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4778
         "time": 1650559599314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B95E784AA508B613278A4BDA09B7410E82ECFA7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4778
         "time": 1650559599418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 668C963141ACC5266756BF5F0203AB5E866F6FD5-1"
         "pid": 4778
         "time": 1650559599447
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:45.582Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:45.583Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:45.583Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:45.584Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:45.642Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:45.755Z appoptics:patching patched crypto 
2022-04-21T16:46:45.772Z appoptics:patching patched https 
2022-04-21T16:46:45.773Z appoptics:patching patched http 
2022-04-21T16:46:45.810Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:45.810Z appoptics:patching patched fs 
2022-04-21T16:46:45.816Z appoptics:patching patched pino 6.13.3
2022-04-21T16:46:45.819Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4800
         "time": 1650559605842
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA24F91A6486763427B798B5A72C02EB37492D53-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4800
         "time": 1650559605848
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8842C10442558630ECA11E5559F4C7DEFAC239DD-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4800
         "time": 1650559605851
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B045EA1F3B388336CFB79BCDC9C670F13E22B1D3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4800
         "time": 1650559605853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26F51BB9089640B79D95162D17189C4B52756AD1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4800
         "time": 1650559605855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4800
         "time": 1650559605858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D1FEB1E3A51394446FF6C1B9011CE1B7B9E5572-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4800
         "time": 1650559605859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "28214DF9B318FC1393EADA6D9DE579C6BD4E8156-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4800
         "time": 1650559605860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4800
         "time": 1650559605861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C79C5AB1348DDB073DBDD68AD585B63E1415D04E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4800
         "time": 1650559605863
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4800
         "time": 1650559605864
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7BE5089591FCEF9B627C1FBE6A1B4F81B5DDF71C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4800
         "time": 1650559605865
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5A77356CFD425EBD02849D08880EEC29085CD93-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4800
         "time": 1650559605969
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 368DE02702B5C353D20A666F4DAB5A7D23C8277A-1"
         "pid": 4800
         "time": 1650559605997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:52.461Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:52.462Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:52.462Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:52.462Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:52.515Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:52.616Z appoptics:patching patched crypto 
2022-04-21T16:46:52.632Z appoptics:patching patched https 
2022-04-21T16:46:52.632Z appoptics:patching patched http 
2022-04-21T16:46:52.665Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:52.665Z appoptics:patching patched fs 
2022-04-21T16:46:52.671Z appoptics:patching patched pino 6.13.4
2022-04-21T16:46:52.674Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4822
         "time": 1650559612696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77EE2E757C7D3A6130209DB364B1C4D1BDC83F3D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4822
         "time": 1650559612702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B339BC18AD65CB2A7E58113DE37E8F6C7AE78BFF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4822
         "time": 1650559612705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B341CEF5197335C34E17B52A77D44269478146A-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4822
         "time": 1650559612707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A113D3AC3B4D215402E6B843E9B3C324DCCEF5F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4822
         "time": 1650559612709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4822
         "time": 1650559612712
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B058D50D249807E035BEBA57E86D62A6C1EA2420-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4822
         "time": 1650559612713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3A9AEF1126E88753083936FEDFB5EB16725D08E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4822
         "time": 1650559612714
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4822
         "time": 1650559612715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3327759E662F04E02D072D09C0A019D6AC55FB09-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4822
         "time": 1650559612716
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4822
         "time": 1650559612717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9133BEB3807DBF4AEBA6B627DAC7ECB871BF1628-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4822
         "time": 1650559612719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "624163A348008401A46498F018B327929CC97048-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4822
         "time": 1650559612823
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7AB8F42C17ACF1028C8AC4A8E8F39B61A0818DC0-1"
         "pid": 4822
         "time": 1650559612852
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:46:59.164Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:46:59.165Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:46:59.165Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:46:59.166Z appoptics:debug using context provider: ace-context
2022-04-21T16:46:59.238Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:46:59.469Z appoptics:patching patched crypto 
2022-04-21T16:46:59.510Z appoptics:patching patched https 
2022-04-21T16:46:59.511Z appoptics:patching patched http 
2022-04-21T16:46:59.559Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:46:59.560Z appoptics:patching patched fs 
2022-04-21T16:46:59.566Z appoptics:patching patched pino 6.14.0
2022-04-21T16:46:59.570Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4844
         "time": 1650559619605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F4CB06CB02D440F8F3CF3B8FE39AD2C10AA08DAD-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4844
         "time": 1650559619612
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "29E1E386363728BFDAAD19EE99F21F665662088D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4844
         "time": 1650559619615
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BCAF0F50CCDBC266F1F9605BF8BFF46593A9416D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4844
         "time": 1650559619617
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F123F637D53F430B3CF447D1229E839B9FEB169B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4844
         "time": 1650559619620
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4844
         "time": 1650559619622
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "876DD505E34F740A48348E91CAF832A5EB4CFCBA-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4844
         "time": 1650559619623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E4C887AAA9702D865ED1341EF4A4EFBE98763EE-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4844
         "time": 1650559619625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4844
         "time": 1650559619626
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1689C46F34A0AF3666418F6C4C9B24471287395A-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4844
         "time": 1650559619627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4844
         "time": 1650559619628
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "538D8649E0534B4424EA3D4096FA2171D0AACA38-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4844
         "time": 1650559619630
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C1BE78705B581300C21D4E61621060B5FFCD5393-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4844
         "time": 1650559619733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 363E9B5144D00AE95E6425756212940E44D6B543-1"
         "pid": 4844
         "time": 1650559619761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:06.565Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:06.566Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:06.566Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:06.566Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:06.644Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:06.785Z appoptics:patching patched crypto 
2022-04-21T16:47:06.803Z appoptics:patching patched https 
2022-04-21T16:47:06.804Z appoptics:patching patched http 
2022-04-21T16:47:06.840Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:06.840Z appoptics:patching patched fs 
2022-04-21T16:47:06.847Z appoptics:patching patched pino 7.0.0
2022-04-21T16:47:06.851Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4866
         "time": 1650559626876
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2208AFBDA5922C448F8089D4153EC23A8B01A588-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4866
         "time": 1650559626883
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "75270F953BD192ADDBD10984CF42C615E49D11A6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4866
         "time": 1650559626887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "111008526EC0C15EBEEC305E909CD59680AF5ED8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4866
         "time": 1650559626893
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0F48A626C0AE7A409DFB8A99CBD8E1B9ACA387D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4866
         "time": 1650559626895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4866
         "time": 1650559626898
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A38BE71B78409196B6D348AC706A003A2CB8CC0-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4866
         "time": 1650559626899
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BFE34EC7311BC136C22AC0CCBC75952C93400C9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4866
         "time": 1650559626900
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4866
         "time": 1650559626902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A93A80C365086A4E915FECD186A79EB6C1ABC18E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4866
         "time": 1650559626903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4866
         "time": 1650559626904
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "520CA30484CDF748371BFCC55D2FEB5178B48A89-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4866
         "time": 1650559626906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "81A20C5C06DD5E85AFE61219FF69D96EB73B184D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4866
         "time": 1650559627009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 288106F7371178FFECD4F4FA87AF374A8F51302C-1"
         "pid": 4866
         "time": 1650559627038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:13.572Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:13.573Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:13.573Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:13.573Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:13.646Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:13.768Z appoptics:patching patched crypto 
2022-04-21T16:47:13.785Z appoptics:patching patched https 
2022-04-21T16:47:13.786Z appoptics:patching patched http 
2022-04-21T16:47:13.824Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:13.824Z appoptics:patching patched fs 
2022-04-21T16:47:13.831Z appoptics:patching patched pino 7.0.1
2022-04-21T16:47:13.835Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4888
         "time": 1650559633859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4191877FC50EA5B8480C424B7297599B5692D412-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4888
         "time": 1650559633866
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D8B6E22FC49A3EAF1325F5DA3DEB558613373C20-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4888
         "time": 1650559633869
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "190A3FBA468D9141C27BE4ADE7C19FC1FB7A97ED-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4888
         "time": 1650559633871
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DC7BDA9D09B4C7AB22FEAADA196060ADD81A6C6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4888
         "time": 1650559633874
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4888
         "time": 1650559633876
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C24A2EE141706C97A1D7F332CDDE86DF1A8D7AA6-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4888
         "time": 1650559633878
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E81E1CDBBBE216EFEF04E913D0C493C12CFD5F7-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4888
         "time": 1650559633879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4888
         "time": 1650559633880
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40F35F43B37DEFA226A038A78CFBF3788D1B669B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4888
         "time": 1650559633882
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4888
         "time": 1650559633883
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E684A12B7BCAD77EDEDA745DD088CFF2A912317-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4888
         "time": 1650559633884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5DDA6C940C45C1F8549BA8C3E84A9B363E3B4C82-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4888
         "time": 1650559633988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 12A660F2CBAB96A5E2E402B3E5AE2F9503AAA317-1"
         "pid": 4888
         "time": 1650559634017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:20.481Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:20.482Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:20.482Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:20.482Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:20.543Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:20.658Z appoptics:patching patched crypto 
2022-04-21T16:47:20.677Z appoptics:patching patched https 
2022-04-21T16:47:20.677Z appoptics:patching patched http 
2022-04-21T16:47:20.717Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:20.717Z appoptics:patching patched fs 
2022-04-21T16:47:20.724Z appoptics:patching patched pino 7.0.2
2022-04-21T16:47:20.728Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4910
         "time": 1650559640752
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07DDABD11B8ADF0DF72C6B67566A840A5EF8D765-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4910
         "time": 1650559640760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FCF6ACE96F3BCD30EA0F3F75AFA92FDA3CDF13D9-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4910
         "time": 1650559640763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C74F2B3095B18E9ED51B5B2C382AD484B59E07F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4910
         "time": 1650559640766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09A08CCF19FF9ADE73E7DFB28185CF107E41AF53-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4910
         "time": 1650559640768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4910
         "time": 1650559640770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7733AFA0908777412BF9FB7F3659630491C8EC12-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4910
         "time": 1650559640772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62BE19844A6AB9A859916584678084BE5F25DA6C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4910
         "time": 1650559640773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4910
         "time": 1650559640774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C2F6630B59A253F881C604B7E417D8620E8D771-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4910
         "time": 1650559640776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4910
         "time": 1650559640777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7EBB831C1C5FA3B377DEA0659B3B9CB75C4FB88-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4910
         "time": 1650559640778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D6FDF30E5EC11ABDE64CF0CACCDF8D193B4F3C7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4910
         "time": 1650559640882
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 35D3A38444226141C6C44F1AE02140DFBCBBF770-1"
         "pid": 4910
         "time": 1650559640912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:27.608Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:27.609Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:27.609Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:27.609Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:27.668Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:27.800Z appoptics:patching patched crypto 
2022-04-21T16:47:27.831Z appoptics:patching patched https 
2022-04-21T16:47:27.832Z appoptics:patching patched http 
2022-04-21T16:47:27.867Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:27.868Z appoptics:patching patched fs 
2022-04-21T16:47:27.874Z appoptics:patching patched pino 7.0.3
2022-04-21T16:47:27.878Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4932
         "time": 1650559647904
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5A54158B98490906833F06DADE9847F91FB6AEC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4932
         "time": 1650559647912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1331055968CC3604313ECB71797C1E9028EDA7F2-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4932
         "time": 1650559647916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68902218A4268C23E38D1F0A70A1B87A1422D92C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4932
         "time": 1650559647918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1C758E9961EAC8B5F65F4E6C1C2CA130C3130C4-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4932
         "time": 1650559647920
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4932
         "time": 1650559647923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A6A73E27C2CEF963C131794E6B1EEB1C6638461-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4932
         "time": 1650559647925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6106308D1F4827677FA84244C5133C6EC5D870B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4932
         "time": 1650559647926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4932
         "time": 1650559647927
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31A09B7661525E4472FC96488004C2F4FE8D996B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4932
         "time": 1650559647929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4932
         "time": 1650559647930
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "766321692A1551BD368B8825507F7226E868C066-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4932
         "time": 1650559647932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A899C285FDE1B8882884B010BC7467C068B8D68C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4932
         "time": 1650559648036
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 05B06C3065DF578CB57ABDFAE7AF1588123BD3AA-1"
         "pid": 4932
         "time": 1650559648065
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:34.154Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:34.155Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:34.155Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:34.156Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:34.216Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:34.332Z appoptics:patching patched crypto 
2022-04-21T16:47:34.361Z appoptics:patching patched https 
2022-04-21T16:47:34.362Z appoptics:patching patched http 
2022-04-21T16:47:34.397Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:34.397Z appoptics:patching patched fs 
2022-04-21T16:47:34.404Z appoptics:patching patched pino 7.0.4
2022-04-21T16:47:34.408Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4954
         "time": 1650559654434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CAB640DB2BBF13A0017AB32AE8E5A4F2E055CC8F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4954
         "time": 1650559654442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44735645979EE359555EB6C33C88131BA33FC1A0-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4954
         "time": 1650559654445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "869EB707A1DFF7E2C61BFDCD4E3650B245A047FA-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4954
         "time": 1650559654447
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7246D177E1484DC8C8226B076E9CBAB1166BB6A0-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4954
         "time": 1650559654450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4954
         "time": 1650559654452
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "71FA591FC946497EEC5BC36B44484FFF310D681C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4954
         "time": 1650559654454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9514BAE3AC1C877D3B012D60701C1DA29AFFD46-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4954
         "time": 1650559654455
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4954
         "time": 1650559654457
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "796FCE689A832F4E2EADC88C6B0358F94750BA15-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4954
         "time": 1650559654458
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4954
         "time": 1650559654459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "729440C71B7F858BC00B51A94EB42FC22C141402-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4954
         "time": 1650559654461
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "10B2667ED3C822E95D0F5DD26D267A7FD8020EB8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4954
         "time": 1650559654565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 2643BAC9D6264D3EB4C8F5C18E9D68219E4EDFA4-1"
         "pid": 4954
         "time": 1650559654594
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:41.504Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:41.505Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:41.505Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:41.505Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:41.564Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:41.676Z appoptics:patching patched crypto 
2022-04-21T16:47:41.694Z appoptics:patching patched https 
2022-04-21T16:47:41.694Z appoptics:patching patched http 
2022-04-21T16:47:41.731Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:41.732Z appoptics:patching patched fs 
2022-04-21T16:47:41.739Z appoptics:patching patched pino 7.0.5
2022-04-21T16:47:41.742Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4976
         "time": 1650559661767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "399DE2F94865BD7861879F45D3DBDBB333D312D7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4976
         "time": 1650559661774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "311A0A16B8E1E08AED3421188756F5AB57F54882-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4976
         "time": 1650559661777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45EEA30FCE7AC7AB35B0A4EE8393ABFBEFCBEBE5-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4976
         "time": 1650559661780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4E82D50F6756184465741822C10F14FEC05B24F1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4976
         "time": 1650559661783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4976
         "time": 1650559661785
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61204EC2912D68E254A6A70B6BDBE96046430EB9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4976
         "time": 1650559661787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "795A0ED4A4E30B9B52739AE3D3E7ECD8AE9DCB3F-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4976
         "time": 1650559661788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4976
         "time": 1650559661789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77DFC1B6C9DE1209C4A6CE6A74A747E4A9ED8212-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4976
         "time": 1650559661790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4976
         "time": 1650559661791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BE6B5EB9A7A8523B9FACE273354F18312175735-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4976
         "time": 1650559661793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2E39395CB15A0022D608D261DC0BB83D7F284FD1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4976
         "time": 1650559661897
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F569678CC579F2F12262FD07BDC1ACD04C2341ED-1"
         "pid": 4976
         "time": 1650559661926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:48.503Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:48.503Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:48.503Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:48.504Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:48.572Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:48.686Z appoptics:patching patched crypto 
2022-04-21T16:47:48.724Z appoptics:patching patched https 
2022-04-21T16:47:48.724Z appoptics:patching patched http 
2022-04-21T16:47:48.763Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:48.764Z appoptics:patching patched fs 
2022-04-21T16:47:48.772Z appoptics:patching patched pino 7.1.0
2022-04-21T16:47:48.776Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (207ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4998
         "time": 1650559668802
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EE1ABCE197F96F538CE7A7A14CD4262CBB8A2C07-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4998
         "time": 1650559668809
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51F79F2B98F6CB3E7F289BCBA7122091E0C7D7C7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4998
         "time": 1650559668813
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "24B557DCC3DAB12D45439039DA44DFBABD23D72C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4998
         "time": 1650559668817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5957094D402CDCC56E2659DCAB81F59B7E9DCE46-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4998
         "time": 1650559668824
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4998
         "time": 1650559668833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "026308CFF479A6F459BBCC0327D2D70C60A32544-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4998
         "time": 1650559668835
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01D6507BC40B80099074C2859E8089293C4F61EE-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4998
         "time": 1650559668843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4998
         "time": 1650559668845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6CD4D9E30034647AA2A1F88EAB1D9DD71B2BEBF8-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4998
         "time": 1650559668846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 4998
         "time": 1650559668853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "37D1A64B08BC0DB5DED31BB1141BAB95AC2449F6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4998
         "time": 1650559668856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "067BDAF602B79860D04C9F555049C95B0C25BBC5-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4998
         "time": 1650559668959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 49D176DA29E6EF609D00A2E5A70F9C1005266FEF-1"
         "pid": 4998
         "time": 1650559668989
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:47:55.175Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:47:55.175Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:47:55.175Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:47:55.176Z appoptics:debug using context provider: ace-context
2022-04-21T16:47:55.251Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:47:55.392Z appoptics:patching patched crypto 
2022-04-21T16:47:55.410Z appoptics:patching patched https 
2022-04-21T16:47:55.411Z appoptics:patching patched http 
2022-04-21T16:47:55.452Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:47:55.453Z appoptics:patching patched fs 
2022-04-21T16:47:55.460Z appoptics:patching patched pino 7.2.0
2022-04-21T16:47:55.464Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5020
         "time": 1650559675489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39365DABFA60F98D70F0F0506C5AD5D776001031-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5020
         "time": 1650559675496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "896C75FB2382B32652EFC7E974AEA0CB8CD31443-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5020
         "time": 1650559675499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4A960E1817032C6B57CFD56A8EBC581C1B20E28-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5020
         "time": 1650559675501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C08548CEA8BD8AC04994706117D5F2D2E87E1E8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5020
         "time": 1650559675504
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5020
         "time": 1650559675506
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0402E285D660E82E3330704D40A94F8A622C8BDD-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5020
         "time": 1650559675508
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E2D5704AC8B6E1EB13E09BEA8C3CD591E5F40DB9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5020
         "time": 1650559675509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5020
         "time": 1650559675510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4E62E0DCFF52D239116B15DDD27E5BBCD4FAA53-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5020
         "time": 1650559675511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5020
         "time": 1650559675512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63641F7D49862D9419F1ED3A47703DAA63DB4DAE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5020
         "time": 1650559675514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6150C34639764D290040F509D9ECA412A49BA8F8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5020
         "time": 1650559675618
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1BCD34BBD59C4D2E4B48C6F7178C36F95F88E3C9-1"
         "pid": 5020
         "time": 1650559675647
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:03.098Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:03.098Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:03.098Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:03.099Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:03.159Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:03.278Z appoptics:patching patched crypto 
2022-04-21T16:48:03.296Z appoptics:patching patched https 
2022-04-21T16:48:03.297Z appoptics:patching patched http 
2022-04-21T16:48:03.330Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:03.330Z appoptics:patching patched fs 
2022-04-21T16:48:03.338Z appoptics:patching patched pino 7.3.0
2022-04-21T16:48:03.341Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5042
         "time": 1650559683368
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAACC6CFC4B33ED22A3FA0AC07A53EC14B91FA22-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5042
         "time": 1650559683375
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFC3D04574DE28A89B0F0C772090067B2DDB5167-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5042
         "time": 1650559683379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CFFBE005522151FE52F15B3916EEF8BE8B2940EB-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5042
         "time": 1650559683381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "474A133F65CED3C32DBC0FF17CB06948EC58D7DA-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5042
         "time": 1650559683384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5042
         "time": 1650559683386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F647514447D531AE5B8A58E28995A2884088FF00-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5042
         "time": 1650559683388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F448B963740D36673AFF4CCFE5F37A40B3E387F9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5042
         "time": 1650559683389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5042
         "time": 1650559683390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C0D757928B3CEC767B5733BFD42BFD79AD4C9A26-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5042
         "time": 1650559683391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5042
         "time": 1650559683392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61FFED46D700CC67710BFDF18BF4A4FAE9B552D7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5042
         "time": 1650559683394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "81D45EFE84861C7A080AE9D349F1853991933C96-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5042
         "time": 1650559683498
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0FD9B30BC4D94E78249DD74125B7CA89E590EBBB-1"
         "pid": 5042
         "time": 1650559683526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:11.357Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:11.358Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:11.358Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:11.359Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:11.437Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:11.559Z appoptics:patching patched crypto 
2022-04-21T16:48:11.577Z appoptics:patching patched https 
2022-04-21T16:48:11.578Z appoptics:patching patched http 
2022-04-21T16:48:11.621Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:11.621Z appoptics:patching patched fs 
2022-04-21T16:48:11.629Z appoptics:patching patched pino 7.4.0
2022-04-21T16:48:11.633Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5064
         "time": 1650559691658
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A84D93396F5D1310FAFC53EE7F8BB47B8C2DEAB-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5064
         "time": 1650559691665
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F36F06CC8C118AAF580F84B5C1A289ACB24068D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5064
         "time": 1650559691669
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51A9234882E85DAA8CBF51AB54C62B3B02087ADC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5064
         "time": 1650559691671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E8F5E1513D68449DA1A062830E8E12F8B7F46E7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5064
         "time": 1650559691674
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5064
         "time": 1650559691676
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "900C25815B006D8C37CE96FB7BC43D5ED1DD2B33-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5064
         "time": 1650559691678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9341B7339B0C5CB396BCF7222043E32DCD017D99-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5064
         "time": 1650559691679
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5064
         "time": 1650559691680
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0906B70B8C335FE6B67D369BF51B9748F50A5D63-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5064
         "time": 1650559691682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5064
         "time": 1650559691683
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1957859BC6CEFFE8AFBA1629AB43D9588C51552B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5064
         "time": 1650559691685
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4EB06C7CBA838208F65DD82DD1292E3B5FC41446-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5064
         "time": 1650559691788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous ED46978C8E5D0F9D8F64B7E1088BACFFF9905BA4-1"
         "pid": 5064
         "time": 1650559691816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:18.536Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:18.536Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:18.536Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:18.537Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:18.589Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:18.692Z appoptics:patching patched crypto 
2022-04-21T16:48:18.708Z appoptics:patching patched https 
2022-04-21T16:48:18.709Z appoptics:patching patched http 
2022-04-21T16:48:18.739Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:18.740Z appoptics:patching patched fs 
2022-04-21T16:48:18.746Z appoptics:patching patched pino 7.4.1
2022-04-21T16:48:18.750Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5086
         "time": 1650559698773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F67BF9823CFAC5E2F1E18344DDDA3A93EC54576F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5086
         "time": 1650559698780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16AAB0A0173819E4B6EC36D39809434061A21E9F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5086
         "time": 1650559698783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3784820F2688035F6AC4352FAAC918507FA003FF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5086
         "time": 1650559698785
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9B81B406AFF64CB2561B527F400A192184CCC5D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5086
         "time": 1650559698787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5086
         "time": 1650559698790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "778F78CA3DBFCC565268BE58EE038C8ED8E585EE-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5086
         "time": 1650559698791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B486226CD8D0F7FEC0B352F2B1384A9F929D5262-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5086
         "time": 1650559698792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5086
         "time": 1650559698793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6BFD03F1296D8C665C497CDF193D03ADA21A526-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5086
         "time": 1650559698795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5086
         "time": 1650559698796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D540788FF6A05154CD42EB6714562E4E02473C1-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5086
         "time": 1650559698797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4ECF843C8B8368A2C3B94126A02D483BABC68C21-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5086
         "time": 1650559698902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 24C32953D95D58475A99BF7AD2C859596E9AF52A-1"
         "pid": 5086
         "time": 1650559698931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:25.779Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:25.779Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:25.779Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:25.780Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:25.864Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:26.049Z appoptics:patching patched crypto 
2022-04-21T16:48:26.092Z appoptics:patching patched https 
2022-04-21T16:48:26.092Z appoptics:patching patched http 
2022-04-21T16:48:26.151Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:26.151Z appoptics:patching patched fs 
2022-04-21T16:48:26.167Z appoptics:patching patched pino 7.5.0
2022-04-21T16:48:26.171Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (196ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5108
         "time": 1650559706204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48DE1A0B4A508F8FF840A60F09493CB51DB6D516-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5108
         "time": 1650559706213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E7BAB7FD2BEA8D0F7F9D1C817D5C2C79D94E9C0-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5108
         "time": 1650559706220
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C2B0C0628C9D671351B2A2BC3DC2F5ED4C7CE14-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5108
         "time": 1650559706226
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C36BDBF22B5FD71958564E68E1BD59A235B01009-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5108
         "time": 1650559706228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5108
         "time": 1650559706232
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8498F3828653C951AB003B5F7A3EF42FF91093E7-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5108
         "time": 1650559706234
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "142D1ADE85514FB14A01D3FDADB6613C0A88D436-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5108
         "time": 1650559706236
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5108
         "time": 1650559706238
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2DEC6BBEBE52AA373BB340E4F39AF82DA26703A8-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5108
         "time": 1650559706240
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5108
         "time": 1650559706241
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1286706E946CFD8B6639E5371D4D7D334685581B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5108
         "time": 1650559706243
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0CB056FC2D628EA2CE62657CAEA175EB48AB2692-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5108
         "time": 1650559706346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A53D3B9966E745BBE2998BBA4375DC18EB0943C0-1"
         "pid": 5108
         "time": 1650559706374
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:32.456Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:32.456Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:32.456Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:32.457Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:32.521Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:32.637Z appoptics:patching patched crypto 
2022-04-21T16:48:32.654Z appoptics:patching patched https 
2022-04-21T16:48:32.655Z appoptics:patching patched http 
2022-04-21T16:48:32.695Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:32.695Z appoptics:patching patched fs 
2022-04-21T16:48:32.703Z appoptics:patching patched pino 7.5.1
2022-04-21T16:48:32.707Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5130
         "time": 1650559712734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E079016E9937D8CB95EB11C4E621DFEA502CEB31-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5130
         "time": 1650559712741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82D4D8FB7F36935A6D5942506256FD36FC320D32-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5130
         "time": 1650559712745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F7C5F555759D03F22437FB4ED3FAF9456E2D37E8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5130
         "time": 1650559712747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E4C85B435C843B6B5E4841C0DE33523294B1845-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5130
         "time": 1650559712754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5130
         "time": 1650559712756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4805BBCCEFD860430703EC48EE8AB9AF98420DE4-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5130
         "time": 1650559712758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6F14007382A239C8305B2B10BD0BE2EBF6583E2-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5130
         "time": 1650559712760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5130
         "time": 1650559712761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F2764732B512E738CBBBCD242B144C9491D70A9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5130
         "time": 1650559712762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5130
         "time": 1650559712763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "298DA55E10693BA8F96ABEEC290C47B06BF07943-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5130
         "time": 1650559712765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C44DE019FE27FB6DFA4838CEACB1783C3833D6B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5130
         "time": 1650559712870
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A1270CEF9545F4BD568BA5C4B00E04BD4F25A14F-1"
         "pid": 5130
         "time": 1650559712898
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:39.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:39.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:39.646Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:39.647Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:39.726Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:39.854Z appoptics:patching patched crypto 
2022-04-21T16:48:39.872Z appoptics:patching patched https 
2022-04-21T16:48:39.872Z appoptics:patching patched http 
2022-04-21T16:48:39.916Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:39.916Z appoptics:patching patched fs 
2022-04-21T16:48:39.924Z appoptics:patching patched pino 7.6.0
2022-04-21T16:48:39.928Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5152
         "time": 1650559719953
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F599F554AA18999AFBD285DC7583DD71296B1250-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5152
         "time": 1650559719960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B4885F5459D5A2E159FC3AAEE3B4E80E8ABE408-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5152
         "time": 1650559719964
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FAC7EC4595D31B33883920B831DC037CC11C695B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5152
         "time": 1650559719966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D39DF1DFA00BA9593DFAE0311A3308D1F8B4F48F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5152
         "time": 1650559719968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5152
         "time": 1650559719971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "788A9F8AF2DF6530589BF077A12F35D185DC4DD5-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5152
         "time": 1650559719973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93F9EFB54EEBC80C883DB3EC9A746012A3CC45C0-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5152
         "time": 1650559719974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5152
         "time": 1650559719975
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60D644D8A80FC4CD18ACB236547BD56257EBF96D-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5152
         "time": 1650559719977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5152
         "time": 1650559719978
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0512801F2F935807B6C68E25BE3C30EDB25EEF79-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5152
         "time": 1650559719979
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F5AAE17C9AAB53D3F020F9E5739DCDF55A06261-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5152
         "time": 1650559720083
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BBDD4357FC849AFEBEC9A0C51241AB1493EFC55B-1"
         "pid": 5152
         "time": 1650559720111
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:46.491Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:46.492Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:46.492Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:46.492Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:46.552Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:46.667Z appoptics:patching patched crypto 
2022-04-21T16:48:46.685Z appoptics:patching patched https 
2022-04-21T16:48:46.686Z appoptics:patching patched http 
2022-04-21T16:48:46.714Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:46.718Z appoptics:patching patched fs 
2022-04-21T16:48:46.731Z appoptics:patching patched pino 7.6.1
2022-04-21T16:48:46.735Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5174
         "time": 1650559726759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15931CF71A9922AA8C1687F9FA7631CF7F4EF981-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5174
         "time": 1650559726767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3C61C5634ACC08F4EAC77D11CEF24B4B9E226D6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5174
         "time": 1650559726770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38716AD255279F1C4CB8AAA0AC75C0C619688B60-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5174
         "time": 1650559726772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5A25C228157F537170E87EF73ADDEDE9DDA118D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5174
         "time": 1650559726774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5174
         "time": 1650559726777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7A8956763C94E3A7481CC3F27C9B0B24CAC45EB3-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5174
         "time": 1650559726778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "80B19360BE1C52680EA69704CD6215B49E4762EE-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5174
         "time": 1650559726780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5174
         "time": 1650559726781
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B8D2F738195867ADF077504B2293E769F22FB6A-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5174
         "time": 1650559726782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5174
         "time": 1650559726783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F19D1EE1F491C15A9CF6DBF73EB76D629AFE7638-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5174
         "time": 1650559726785
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6125F3FBF05146677F47C220CECED26CAF2B759-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5174
         "time": 1650559726889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CF8B0B28E0D008A0FF0CFCBE27F94BF718AFBA42-1"
         "pid": 5174
         "time": 1650559726918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:48:53.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:48:53.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:48:53.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:48:53.562Z appoptics:debug using context provider: ace-context
2022-04-21T16:48:53.621Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:48:53.737Z appoptics:patching patched crypto 
2022-04-21T16:48:53.769Z appoptics:patching patched https 
2022-04-21T16:48:53.769Z appoptics:patching patched http 
2022-04-21T16:48:53.793Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:48:53.793Z appoptics:patching patched fs 
2022-04-21T16:48:53.807Z appoptics:patching patched pino 7.6.2
2022-04-21T16:48:53.810Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5196
         "time": 1650559733835
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAF69284BC60581EC0117E910024CD31C500E381-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5196
         "time": 1650559733843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BBA8829B7364649AC824173B14264ED27D31695-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5196
         "time": 1650559733846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4A2E58BD6D0063D8AF7A5687DC0D8A5CD34478B9-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5196
         "time": 1650559733848
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "92221BD3FD87FE1501D18B3C00DA3952325CBF6A-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5196
         "time": 1650559733851
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5196
         "time": 1650559733853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B47DC61084BEF156B88E80DBC413D1C931EA7E7C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5196
         "time": 1650559733855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87C0DEF54BA67F7FC3BC2BEDA143A714EA5FF3FB-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5196
         "time": 1650559733856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5196
         "time": 1650559733858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "024CFDFB467A5BF1C7D5E0772588C111174C691D-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5196
         "time": 1650559733859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5196
         "time": 1650559733860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "354A79329999C5465E7DD6518F18BCD2D0930E39-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5196
         "time": 1650559733862
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4D2B25A8CB691566BAF99F300134BD07BDED670-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5196
         "time": 1650559733966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EBD74DF6114886D0E503CC2497AC861D3494B936-1"
         "pid": 5196
         "time": 1650559733994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:00.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:00.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:00.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:00.219Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:00.278Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:00.395Z appoptics:patching patched crypto 
2022-04-21T16:49:00.413Z appoptics:patching patched https 
2022-04-21T16:49:00.413Z appoptics:patching patched http 
2022-04-21T16:49:00.442Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:00.442Z appoptics:patching patched fs 
2022-04-21T16:49:00.455Z appoptics:patching patched pino 7.6.3
2022-04-21T16:49:00.459Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5218
         "time": 1650559740491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6CB2DA0572D6A5F06E07367CD9802182A5C320E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5218
         "time": 1650559740499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "17B633B0E7BBE67FC3290B20AF1A85D59DA3DF57-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5218
         "time": 1650559740502
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A6BC0740865841B7DF317B652AD6BAB872130081-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5218
         "time": 1650559740505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8351A86A13234B7C6184CF541843701206FC4773-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5218
         "time": 1650559740515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5218
         "time": 1650559740519
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5E79D7C9D60705733D615308BF752233BAEBCEF9-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5218
         "time": 1650559740521
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A2502A12F739C26F1C9D12809C7B8297D09497A-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5218
         "time": 1650559740522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5218
         "time": 1650559740523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DB0F4A18B5D26F1B38B5F9A3780118C645197B19-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5218
         "time": 1650559740524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5218
         "time": 1650559740526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B856B39A6C65865309FC2A001310228DC6BCD92-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5218
         "time": 1650559740527
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "66F121DC3B275E422A72C45DB1BC27E258EC1355-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5218
         "time": 1650559740631
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FD4AC17B746F27BFEA3DED74B52579E1CAE8D8FC-1"
         "pid": 5218
         "time": 1650559740659
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:07.554Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:07.554Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:07.554Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:07.555Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:07.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:07.730Z appoptics:patching patched crypto 
2022-04-21T16:49:07.748Z appoptics:patching patched https 
2022-04-21T16:49:07.748Z appoptics:patching patched http 
2022-04-21T16:49:07.784Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:07.784Z appoptics:patching patched fs 
2022-04-21T16:49:07.791Z appoptics:patching patched pino 7.6.4
2022-04-21T16:49:07.794Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5240
         "time": 1650559747817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "57178E71857CCE1D27A22F3D569DCE49CE82815F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5240
         "time": 1650559747824
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3919FE6DFD096103D25855DB94B28CFC0732488-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5240
         "time": 1650559747827
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D1C3CC09507318E4130BE3FE8F0984DC50EA2B64-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5240
         "time": 1650559747829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDEFFD9E8578D632BFEE548EEC119CAD631B788F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5240
         "time": 1650559747831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5240
         "time": 1650559747833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9D73AABEE9EE3EDCED2F192F259824ACB091F914-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5240
         "time": 1650559747835
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87C89CB1B7605247304F5BC39CE7FFD4063D1E78-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5240
         "time": 1650559747836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5240
         "time": 1650559747837
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55664AE37827F8D521B57F5D7878C81796AC3F92-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5240
         "time": 1650559747838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5240
         "time": 1650559747839
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0BB47234F784E203B5791C568EA632AFE37264C4-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5240
         "time": 1650559747841
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "22761A2A5A43FC895E8F8DD848C41C2AFCD3C07B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5240
         "time": 1650559747944
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3B2F424A5881110A78B3642062A53A692D09631F-1"
         "pid": 5240
         "time": 1650559747972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 11s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:19.856Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:19.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:19.857Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:19.858Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:19.919Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:20.036Z appoptics:patching patched crypto 
2022-04-21T16:49:20.054Z appoptics:patching patched https 
2022-04-21T16:49:20.055Z appoptics:patching patched http 
2022-04-21T16:49:20.090Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:20.091Z appoptics:patching patched fs 
2022-04-21T16:49:20.099Z appoptics:patching patched pino 7.6.5
2022-04-21T16:49:20.103Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5262
         "time": 1650559760129
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FEE3C9C3E178B6B038A208359CF1F3CC52FB07D2-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5262
         "time": 1650559760136
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4D3AD748D21D775616F1CA4C9C93E11C2D0A26A-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5262
         "time": 1650559760139
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D1807A3CCA9451EBDAF1C2061D483B72B8B37621-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5262
         "time": 1650559760142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EE2C62FA58390D7E6BDFE52B61797533CD45610-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5262
         "time": 1650559760144
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5262
         "time": 1650559760146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16BFC88F3ECAC5BBA437699F5018B27528EDB352-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5262
         "time": 1650559760148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A83AFA325C53F72D719FB79D77252667B3EE39C8-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5262
         "time": 1650559760149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5262
         "time": 1650559760150
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "10A0D4AFB6F790209433F2038C7A8E5C36F22022-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5262
         "time": 1650559760151
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5262
         "time": 1650559760153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4CBD93C6216B0C169032BBC5F4404EC19F136209-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5262
         "time": 1650559760154
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7DDC7CAC2EE5981C750F1C2BF715C965D2B9C8E8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5262
         "time": 1650559760260
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CDF57BA3326014B8D283D078DEE1C12AC5ECDBE0-1"
         "pid": 5262
         "time": 1650559760289
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 16s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:36.955Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:36.955Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:36.956Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:36.956Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:37.058Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:37.210Z appoptics:patching patched crypto 
2022-04-21T16:49:37.237Z appoptics:patching patched https 
2022-04-21T16:49:37.238Z appoptics:patching patched http 
2022-04-21T16:49:37.269Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:37.269Z appoptics:patching patched fs 
2022-04-21T16:49:37.277Z appoptics:patching patched pino 7.7.0
2022-04-21T16:49:37.280Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5284
         "time": 1650559777304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "103B5854AB53486C4ACCA184D259EC46421D9110-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5284
         "time": 1650559777311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3083EF4A440B171EAD9D2916A77280CC56A3531E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5284
         "time": 1650559777315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C28F02CE8B9A3FD3C209ECA88070DBA890249F3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5284
         "time": 1650559777317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B5839802B7B3FF275DA115DAEA4D52DFDB1E68D8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5284
         "time": 1650559777319
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5284
         "time": 1650559777322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DF9F8D9041B7E455A8448C5B6C8E4BDC0173314-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5284
         "time": 1650559777324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "317A367B80A66CD13C3C5ADEEF0BC2D299749588-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5284
         "time": 1650559777325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5284
         "time": 1650559777326
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "08C97F63086D0944876305010DED92963F8C864C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5284
         "time": 1650559777328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5284
         "time": 1650559777329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5880F5C24BE4A75D4F96DEC720CEAE369C69F6E6-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5284
         "time": 1650559777331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B508E8C17D73A2E52572DDB3E841320806C0E004-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5284
         "time": 1650559777434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 79E0DF86986D37A0EB87951A9D5485262AE92238-1"
         "pid": 5284
         "time": 1650559777463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:43.832Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:43.832Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:43.832Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:43.833Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:43.892Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:44.006Z appoptics:patching patched crypto 
2022-04-21T16:49:44.024Z appoptics:patching patched https 
2022-04-21T16:49:44.025Z appoptics:patching patched http 
2022-04-21T16:49:44.062Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:44.062Z appoptics:patching patched fs 
2022-04-21T16:49:44.070Z appoptics:patching patched pino 7.8.0
2022-04-21T16:49:44.074Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5306
         "time": 1650559784098
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A008E2E2BC50A68AA724287ED8D0FF7A568AE650-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5306
         "time": 1650559784105
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3D14737DB828D55C5BEBB4F0EE87881831F5F5E7-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5306
         "time": 1650559784109
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C43C66FA238E42323421C69F6580A227575AC4BF-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5306
         "time": 1650559784111
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "53599ED9772F009702B1FEE24415625E9C854752-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5306
         "time": 1650559784113
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5306
         "time": 1650559784116
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "561F4A0529676C4C99A3045AB537B6C1B1D21CBB-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5306
         "time": 1650559784117
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "43FC4BA4E8F1ACF0DD48B72C29EE927082482038-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5306
         "time": 1650559784119
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5306
         "time": 1650559784120
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6C517314C91C6B871882C22EFBFE391BC30797E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5306
         "time": 1650559784121
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5306
         "time": 1650559784122
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76E6D09173827746286E7DE5C9B020AB8AC7B518-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5306
         "time": 1650559784124
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7F18F27435428C38ADAD67DD2F3389C5355246F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5306
         "time": 1650559784228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AD84F8A628D5F705C0A47F53C4D5F00084259B7C-1"
         "pid": 5306
         "time": 1650559784256
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:51.334Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:51.334Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:51.334Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:51.335Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:51.394Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:51.514Z appoptics:patching patched crypto 
2022-04-21T16:49:51.549Z appoptics:patching patched https 
2022-04-21T16:49:51.549Z appoptics:patching patched http 
2022-04-21T16:49:51.630Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:51.630Z appoptics:patching patched fs 
2022-04-21T16:49:51.642Z appoptics:patching patched pino 7.8.1
2022-04-21T16:49:51.646Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5328
         "time": 1650559791672
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7BF3A82614F044D09E9B8ED1D45DEDB97DDDD1CA-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5328
         "time": 1650559791679
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7586FAB9DD9C7879A230581EAAB5F0EA2FDBFDE-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5328
         "time": 1650559791682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31B7A8E9D0E194BD4BF0F1EC75A26C924473301C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5328
         "time": 1650559791685
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD81A924AEFE05386A1D8D70C2C955F9877F707F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5328
         "time": 1650559791687
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5328
         "time": 1650559791690
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9839B98CA84EB69D4F5D8028EE0F26B87B0D5C5B-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5328
         "time": 1650559791691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AC1A4F679F2457633065CD6072E7ABC0C9761B3C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5328
         "time": 1650559791693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5328
         "time": 1650559791694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B4336C3FFCF82BE9BF13F7B994C632CD1F52FFA-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5328
         "time": 1650559791696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5328
         "time": 1650559791697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2FF83F8A77C13F56012042DA9E323C98C989B91E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5328
         "time": 1650559791699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "70024B53B54E0A5A73890BB129F75A07302E7E99-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5328
         "time": 1650559791802
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 66ADB5F868EE13428C478CAC630C61A5146AEFBB-1"
         "pid": 5328
         "time": 1650559791830
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:49:57.854Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:49:57.855Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:49:57.855Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:49:57.855Z appoptics:debug using context provider: ace-context
2022-04-21T16:49:57.915Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:49:58.028Z appoptics:patching patched crypto 
2022-04-21T16:49:58.046Z appoptics:patching patched https 
2022-04-21T16:49:58.046Z appoptics:patching patched http 
2022-04-21T16:49:58.083Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:49:58.083Z appoptics:patching patched fs 
2022-04-21T16:49:58.091Z appoptics:patching patched pino 7.9.0
2022-04-21T16:49:58.094Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5350
         "time": 1650559798119
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E2530E5A91D89E86133B63D63DC72B1E1D3FE09B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5350
         "time": 1650559798126
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "014AF58762641E854762B48B5F0F8C064C7E2C4E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5350
         "time": 1650559798129
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4EEE77FB41E3B3BBD7CCBB43880AD23AE827BE15-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5350
         "time": 1650559798132
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B5D61A01F9F042C4481EC2994EB26E8B430FC0E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5350
         "time": 1650559798134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5350
         "time": 1650559798137
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F8B3CF4C91977E7C4A177A1AB97D60F4F11D40E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5350
         "time": 1650559798138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "890A64A9C19BB167F3DBAC31851CA8090BEEE52E-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5350
         "time": 1650559798140
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5350
         "time": 1650559798141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EB6C55A37BB440C775C94D902EB14FEC2F9EE909-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5350
         "time": 1650559798142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5350
         "time": 1650559798143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "052AABB38E66AE795B6AF13A61C640465619FD59-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5350
         "time": 1650559798145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D335C5454650B9EB4EB754E47C32B897DAC78429-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5350
         "time": 1650559798249
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EC7ECFC6D659B17B509A5D9C63934BE9116B9039-1"
         "pid": 5350
         "time": 1650559798277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:50:05.374Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:50:05.375Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:50:05.375Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:50:05.375Z appoptics:debug using context provider: ace-context
2022-04-21T16:50:05.435Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:50:05.549Z appoptics:patching patched crypto 
2022-04-21T16:50:05.565Z appoptics:patching patched https 
2022-04-21T16:50:05.566Z appoptics:patching patched http 
2022-04-21T16:50:05.604Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:50:05.604Z appoptics:patching patched fs 
2022-04-21T16:50:05.612Z appoptics:patching patched pino 7.9.1
2022-04-21T16:50:05.615Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5372
         "time": 1650559805640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E50A149DC26C6F595DE6CBD05BEE9226935620D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5372
         "time": 1650559805647
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7126425FD466DEBBF5FDF4D4EAA0E98EDA0758B-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5372
         "time": 1650559805651
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77EB789F2EC33D3C320CCD6CECFA85B42B9146FA-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5372
         "time": 1650559805653
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0661E8F9CB2F5DEBFCE58FD5CB90455B265A9BE3-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5372
         "time": 1650559805655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5372
         "time": 1650559805658
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F9C6681AE3A92539C281F35428E3678E634332C-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5372
         "time": 1650559805660
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8AD6F7811FD3F95BB0E0FA377B804031A6A30800-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5372
         "time": 1650559805661
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5372
         "time": 1650559805662
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3050F0D80DA458621AD0DCBD1D17B86D3167C25-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5372
         "time": 1650559805667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5372
         "time": 1650559805668
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A14BF98D988255FE85FB5FECD55BE3B3E4E713F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5372
         "time": 1650559805669
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6532A232E298F6B5B709663E4A318C0C9A233B8C-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5372
         "time": 1650559805773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4E7C13C205E501DE7CD485F71450734A34C92328-1"
         "pid": 5372
         "time": 1650559805802
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:50:12.129Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:50:12.130Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:50:12.130Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:50:12.131Z appoptics:debug using context provider: ace-context
2022-04-21T16:50:12.199Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:50:12.336Z appoptics:patching patched crypto 
2022-04-21T16:50:12.412Z appoptics:patching patched https 
2022-04-21T16:50:12.413Z appoptics:patching patched http 
2022-04-21T16:50:12.470Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:50:12.470Z appoptics:patching patched fs 
2022-04-21T16:50:12.478Z appoptics:patching patched pino 7.9.2
2022-04-21T16:50:12.481Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (206ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5394
         "time": 1650559812505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C8536B18DAD825DD2B6421BB7F8B64B158E26840-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5394
         "time": 1650559812512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "899DFBCD2BF7FA4341F225E559A33940A41CE6DD-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5394
         "time": 1650559812524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DDFCE28B5AF08D133D1ECA7D8BE7B01A1EC65DCD-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5394
         "time": 1650559812530
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E345B5A9B83E1F26AD38A05FD5382C29D2A66A8-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5394
         "time": 1650559812533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5394
         "time": 1650559812536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C625BFBD95A3B371C2304B1EC2F126525399C3B6-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5394
         "time": 1650559812537
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8057500F20911622943F442007473515440240FF-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5394
         "time": 1650559812554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5394
         "time": 1650559812556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E04D704EEFB3C90800C5B2973EB3966259BB7EDC-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5394
         "time": 1650559812557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5394
         "time": 1650559812559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CA795975AD51F5BCF6D0F1EBA7F68867ABDCF0F-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5394
         "time": 1650559812560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC1FE984B7D16C10CDD622B9E8538B9CF31F22BC-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5394
         "time": 1650559812664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FE832DD44D1CFDF98A3E8641F13542FA6938DBA6-1"
         "pid": 5394
         "time": 1650559812693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:50:19.343Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:50:19.343Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:50:19.343Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:50:19.344Z appoptics:debug using context provider: ace-context
2022-04-21T16:50:19.408Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:50:19.521Z appoptics:patching patched crypto 
2022-04-21T16:50:19.540Z appoptics:patching patched https 
2022-04-21T16:50:19.540Z appoptics:patching patched http 
2022-04-21T16:50:19.578Z appoptics:patching fs.realpath - adding native method
2022-04-21T16:50:19.578Z appoptics:patching patched fs 
2022-04-21T16:50:19.586Z appoptics:patching patched pino 7.10.0
2022-04-21T16:50:19.590Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5416
         "time": 1650559819614
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A16BA838302878A0F4D65219E957A776E1B48B68-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5416
         "time": 1650559819621
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C57E5A3BB95279A834046E41964A586DC9166453-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5416
         "time": 1650559819625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4668751E1642993896BAB27811B9A6D4EC89C72E-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5416
         "time": 1650559819627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D63654A39D6063067F3EC5C9AE95D205DE4998D-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5416
         "time": 1650559819629
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5416
         "time": 1650559819632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F33741A06AF4BBBCDF9405FD941580603C01AC4A-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5416
         "time": 1650559819633
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F412BFAE481DFDB6197FBDBFDEDB74EAFBF81FB-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5416
         "time": 1650559819635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5416
         "time": 1650559819636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0044A7582D6C5E67E71F31FCD29C5F942632DAA7-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5416
         "time": 1650559819637
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "always insert"
         "pid": 5416
         "time": 1650559819638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DFE951C37E20C809F3E2094D48DC57B1D2C1EC4-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5416
         "time": 1650559819640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E542427B950DF6E451629E0408529D61DAC2B9D2-1"
      +  }
         "hostname": "dead19447b0a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5416
         "time": 1650559819744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0EB2D9D97C310AD8C60F237B01435BEA7A511864-1"
         "pid": 5416
         "time": 1650559819773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
